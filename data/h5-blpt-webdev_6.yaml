- en: Chapter 6. Making Your Site Better
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第6章。让您的网站更好
- en: The nature of website design and development is such that not all optimizations
    and recommendations apply in all scenarios. In this chapter, we will look at the
    various optimization tools available and which situations they are best suited
    for, to make an HTML5 Boilerplate site load and render faster.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 网站设计和开发的性质是这样的，不是所有的优化和建议都适用于所有情况。在本章中，我们将看看各种可用的优化工具以及它们最适合的情况，以使HTML5 Boilerplate网站加载和呈现更快。
- en: Finding the best experience for Internet Explorer
  id: totrans-2
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 为Internet Explorer找到最佳体验
- en: Internet Explorer versions 8 and below have had very haphazard support for standards
    and consistent rendering. Depending on the number of users who visit your site
    using Internet Explorer, you may or may not want to spend the effort optimizing
    for Internet Explorer.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: Internet Explorer 8及以下版本对标准和一致的呈现支持非常混乱。根据使用Internet Explorer访问您的网站的用户数量，您可能会或不会花费精力优化Internet
    Explorer。
- en: Mobile-first styles for IE
  id: totrans-4
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: IE的移动优先样式
- en: '**Media Queries** are CSS features that allow you to apply different sets of
    rules depending on the value of a particular media feature. For example, if the
    browser has minimum width of `500` pixels, you could make all your `h1` elements
    turn `red`, as shown in the following code:'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: '**媒体查询**是CSS功能，允许您根据特定媒体特征的值应用不同的规则集。例如，如果浏览器的最小宽度为`500`像素，您可以使所有的`h1`元素变成`红色`，如下面的代码所示：'
- en: '[PRE0]'
  id: totrans-6
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'However, IE6, IE7, and IE8 do not understand media queries that are typically
    used to adjust widths according to different screen widths. As such, they will
    never render the optimized styles you create for browsers with screen widths that
    match a certain media query break point (`min-width: 500px` in the previous snippet).
    In our Sun and Sand Music Festival website, we have style rules within three different
    media queries, as shown in the following code snippet:'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: '然而，IE6、IE7和IE8不理解媒体查询，通常用于根据不同的屏幕宽度调整宽度。因此，它们永远不会呈现出您为与某个媒体查询断点匹配的屏幕宽度的浏览器创建的优化样式（在上面的片段中为`min-width:
    500px`）。在我们的Sun and Sand Music Festival网站中，我们在三个不同的媒体查询中有样式规则，如下面的代码片段所示：'
- en: '[PRE1]'
  id: totrans-8
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: This means IE6, IE7, and IE8 will render the styles as though these queries
    did not exist! If you specify rules for device widths that are smaller at the
    end, it is likely that those will be overriding the rules for device widths that
    are larger, leading to less than optimal designs on Internet Explorer 8 and below.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 这意味着IE6、IE7和IE8将呈现样式，就好像这些查询不存在一样！如果您指定的设备宽度规则在最后较小，那么这些规则很可能会覆盖较大设备宽度的规则，导致Internet
    Explorer 8及以下版本上的设计不够理想。
- en: Ideally, in this situation, you simply want IE to render all the styles and
    have the user scroll, if necessary, so that the style rules for the largest widths
    always apply. To do this, we can create a separate `ie.css` file that will render
    all the rules within `main.css` except these rules will no longer be contained
    in media queries.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 理想情况下，在这种情况下，您只希望IE呈现所有样式，并且用户可以滚动，如果必要的话，以便最大宽度的样式规则始终适用。为此，我们可以创建一个单独的`ie.css`文件，它将呈现`main.css`中的所有规则，除了这些规则将不再包含在媒体查询中。
- en: Doing this manually is hard work, and almost impossible to maintain. However,
    Nicolas Gallagher writes about an elegant solution he invented, which uses Sass
    to import separate stylesheets for each media query breakpoint and compile them
    into two separate stylesheets; one without media queries (`ie.css`) and the other
    with media queries (`main.css`); we will look at this next.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 手动完成这项工作很困难，几乎不可能维护。然而，Nicolas Gallagher写了一个他发明的优雅解决方案，使用Sass来导入每个媒体查询断点的单独样式表，并将它们编译成两个单独的样式表；一个没有媒体查询（`ie.css`），另一个有媒体查询（`main.css`）；我们将在下面看到这个。
- en: ie.scss
  id: totrans-12
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: ie.scss
- en: 'The code snippet for `ie.scss` is as follows:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: '`ie.scss`的代码片段如下：'
- en: '[PRE2]'
  id: totrans-14
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: main.scss
  id: totrans-15
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: main.scss
- en: 'The code snippet for `main.scss` is as follows:'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: '`main.scss`的代码片段如下：'
- en: '[PRE3]'
  id: totrans-17
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Do note that you need each file titled `300-up.scss`, `750-up.scss`, and `1150-up.scss`
    within the same parent folder as `main.scss` and `ie.scss`.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，您需要在与`main.scss`和`ie.scss`相同的父文件夹中分别命名为`300-up.scss`、`750-up.scss`和`1150-up.scss`的每个文件。
- en: 'In the `head` tag of `index.html` page, you can now write the following code:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 在`index.html`页面的`head`标签中，您现在可以编写以下代码：
- en: '[PRE4]'
  id: totrans-20
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Note
  id: totrans-21
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Jake Archibald also has a far more easy-to-write solution using Sass at `jakearchibald.github.com/sass-ie/`.
    It takes advantage of newer features of Sass 3.2, and has slightly different composition
    for `main.scss` and `ie.scss`. It requires advanced knowledge of Sass, which is
    beyond the scope of this book.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: Jake Archibald还提供了一个更容易编写的解决方案，使用Sass在`jakearchibald.github.com/sass-ie/`。它利用了Sass
    3.2的新功能，并且`main.scss`和`ie.scss`的组合略有不同。这需要对Sass有深入的了解，这超出了本书的范围。
- en: Printing with jQuery in IE6 and IE7
  id: totrans-23
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 在IE6和IE7中使用jQuery打印
- en: IE6 and IE7 do not support the `:after` pseudo selector that all other browsers
    support. This means our print stylesheet that provides a feature for all links
    to be printed alongside the linked text will not work in IE6 and IE7\. You can
    simply use jQuery code to overcome this.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: IE6和IE7不支持所有其他浏览器支持的`:after`伪选择器。这意味着我们的打印样式表，提供所有链接与链接文本一起打印的功能，在IE6和IE7中将无法工作。您可以简单地使用jQuery代码来克服这个问题。
- en: Note
  id: totrans-25
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Bill Beckelman has written a post about this on his blog at `beckelman.net/2009/02/16/use-jquery-to-show-a-links-address-after-its-text-when-printing-in-ie6-and-ie7/`.
    IE supports its own proprietary `onbeforeprint` and `onafterprint` events that
    can be used to our advantage. Based on Bill Beckelman's work, we can write our
    own simple jQuery code to print link URLs in IE6 and IE7.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: Bill Beckelman在他的博客`beckelman.net/2009/02/16/use-jquery-to-show-a-links-address-after-its-text-when-printing-in-ie6-and-ie7/`上写了一篇关于这个问题的文章。IE支持自己的专有`onbeforeprint`和`onafterprint`事件，可以用于我们的优势。根据Bill
    Beckelman的工作，我们可以编写我们自己简单的jQuery代码来在IE6和IE7中打印链接URL。
- en: 'First, we check if `window.onbeforeprint` exists, because this would indicate
    this code is being executed on one of the IE browsers. We also want to verify
    if this browser supports generated content or not, as we only need to use this
    code when it is not supported. The following code snippet checks for the presence
    of the `window.onbeforeprint` event:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我们检查`window.onbeforeprint`是否存在，因为这将表明此代码正在一个IE浏览器上执行。我们还想验证此浏览器是否支持生成的内容，因为我们只需要在不支持时使用此代码。以下代码片段检查`window.onbeforeprint`事件是否存在：
- en: '[PRE5]'
  id: totrans-28
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'Then, we set functions to execute when either `onbeforeprint` or `onafterprint`
    occurs, as shown in the following code:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，我们设置函数在`onbeforeprint`或`onafterprint`发生时执行，如下所示的代码：
- en: '[PRE6]'
  id: totrans-30
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'Then, we write the following functions:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，我们编写以下函数：
- en: '[PRE7]'
  id: totrans-32
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Styling disabled form elements in Internet Explorer
  id: totrans-33
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 在Internet Explorer中为禁用的表单元素设置样式
- en: Internet Explorer up to version 9 has no way to indicate a form field is disabled
    other than the color of the text used in that field. Sometimes, a field simply
    has an icon rather than text (or it could be an empty input textbox), in which
    case it is almost impossible to discern which buttons are disabled and which are
    not.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 直到9版本，Internet Explorer没有办法指示表单字段是否被禁用，除了使用该字段中的文本的颜色。有时，一个字段只是一个图标而不是文本（或者可能是一个空的输入文本框），在这种情况下，几乎不可能分辨哪些按钮被禁用，哪些没有。
- en: 'For Internet Explorer 7 and above, by just adding the following rules in `main.css`,
    you can get the disabled fields to display significantly differently from the
    enabled ones:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 对于Internet Explorer 7及以上版本，只需在`main.css`中添加以下规则，即可使禁用的字段显示方式与启用的字段明显不同：
- en: '[PRE8]'
  id: totrans-36
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'If you have to support Internet Explorer 6, then make sure you add a class
    called `disabled` on the form elements that have the `disabled` attribute set
    and alter the previous rule to the following:'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您需要支持Internet Explorer 6，则确保在具有`disabled`属性设置的表单元素上添加一个名为`disabled`的类，并将上一个规则修改为以下内容：
- en: '[PRE9]'
  id: totrans-38
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: Suppressing IE6 image toolbar
  id: totrans-39
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 抑制IE6图像工具栏
- en: 'In IE6, all images, have a toolbar visible when hovered over. You can disable
    them by adding the following code within the `head` tag in the `index.html` file:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 在IE6中，当鼠标悬停在所有图像上时，都会显示工具栏。您可以通过在`index.html`文件的`head`标签中添加以下代码来禁用它们：
- en: '[PRE10]'
  id: totrans-41
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: Writing CSS3 easier with tools
  id: totrans-42
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用工具更轻松地编写CSS3
- en: 'CSS3 is at the bleeding edge. Some properties require what is known as a vendor
    prefix. For example, the 3D transforms property `perspective` is implemented as
    follows, in different browsers:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: CSS3处于前沿。一些属性需要所谓的供应商前缀。例如，3D变换属性`perspective`在不同的浏览器中实现如下：
- en: '[PRE11]'
  id: totrans-44
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: Only a short while ago, Firefox implemented this property as `–moz-perspective`,
    but have since dropped support for the `–moz-` prefix.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 就在不久之前，Firefox将此属性实现为`-moz-perspective`，但后来放弃了对`-moz-`前缀的支持。
- en: As you will come to realize, it is really hard to keep track of which browser
    requires a prefix and which browser does not, and it is not quite feasible to
    keep all the sites that we create updated on a regular basis every time a browser
    adds or drops support for a prefix.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 正如您将意识到的那样，很难跟踪哪个浏览器需要前缀，哪个浏览器不需要，而且不太可行的是，每次浏览器添加或删除对前缀的支持时，都要定期更新我们创建的所有网站。
- en: To make this easier, we could use abstractions without these prefixes such that
    a tool that has an updated index of which property requires which prefix could
    convert them into the required final CSS.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 为了使这更容易，我们可以使用没有这些前缀的抽象，这样一个具有哪个属性需要哪个前缀的更新索引的工具可以将它们转换为所需的最终CSS。
- en: This is exactly what Sass (`sass-lang.com`) or Less (`lesscss.org`) provide.
    Sass is a language that comes with a compiler that converts code written in Sass
    to CSS, in Ruby. Less is a similar language, but written in JavaScript.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 这正是Sass（`sass-lang.com`）或Less（`lesscss.org`）提供的。Sass是一种语言，带有一个编译器，将用Sass编写的代码转换为Ruby中的CSS。Less是一种类似的语言，但是用JavaScript编写。
- en: In both cases, the languages are extensions of the syntax used in CSS, which
    means you can copy your existing CSS files into Sass or Less files and have them
    compile into pure CSS files without any errors.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 在这两种情况下，这些语言都是CSS语法的扩展，这意味着您可以将现有的CSS文件复制到Sass或Less文件中，并将它们编译为纯CSS文件，而不会出现任何错误。
- en: The extra features that these languages provide are the ability to use mixins,
    variables, functions, and more.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 这些语言提供的额外功能包括使用mixin、变量、函数等。
- en: For Sass, **Compass** is an additional framework that provides a ready library
    of CSS3 mixins found at `compass-style.org/reference/compass/css3`. Less has many
    options; the most popular and frequently updated can be found within Twitter Bootstrap
    and are available at `twitter.github.com/bootstrap/less.html#mixins`. The following
    sections show you how to create a rule that uses CSS transforms in Sass and Less.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 对于Sass，**Compass**是一个额外的框架，提供了一个在`compass-style.org/reference/compass/css3`中找到的CSS3
    mixin的库。Less有许多选项；最受欢迎和经常更新的可以在Twitter Bootstrap中找到，在`twitter.github.com/bootstrap/less.html#mixins`中可用。以下部分向您展示如何在Sass和Less中创建使用CSS变换的规则。
- en: Sass
  id: totrans-52
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Sass
- en: 'The code snippet for Sass is as follows:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: Sass的代码片段如下：
- en: '[PRE12]'
  id: totrans-54
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: Less
  id: totrans-55
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Less
- en: 'The code snippet for Less is as follows:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: Less的代码片段如下：
- en: '[PRE13]'
  id: totrans-57
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: Output CSS
  id: totrans-58
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 输出的CSS
- en: 'The output CSS would be as follows:'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 输出的CSS将如下所示：
- en: '[PRE14]'
  id: totrans-60
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: Converting HTML5 Boilerplate CSS to Sass or Less
  id: totrans-61
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 将HTML5 Boilerplate CSS转换为Sass或Less
- en: You could typically just rename the `main.css` file to `main.scss` or `main.less`
    and start using that as your base Sass or Less file. To compile these files to
    the corresponding Less or Sass files, you can either use GUI-based browser refreshing
    software that compiles these files automatically like **LiveReload** (`livereload.com/`)
    or **Codekit** (`incident57.com/codekit`).
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 您通常只需将`main.css`文件重命名为`main.scss`或`main.less`，然后开始使用它作为基本的Sass或Less文件。要将这些文件编译为相应的Less或Sass文件，您可以使用GUI-based浏览器刷新软件，它会自动编译这些文件，比如**LiveReload**(`livereload.com/`)或**Codekit**(`incident57.com/codekit`)。
- en: If you are someone familiar with the command line, you can install Less or Sass
    and run their respective command-line interpreters to compile the files into pure
    CSS.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您熟悉命令行，可以安装Less或Sass，并运行它们各自的命令行解释器将文件编译为纯CSS。
- en: If you wish to use a pure Sass or Less file to start with (instead of the contents
    of the `main.css` file), there are also forks of HTML5 Boilerplate that have the
    stylesheet converted to Sass. We will see two of them in the following sections.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您希望使用纯Sass或Less文件（而不是`main.css`文件的内容）开始，还有HTML5 Boilerplate的分支将样式表转换为Sass。我们将在以下部分看到其中的两个。
- en: HTML5 Boilerplate Compass extension
  id: totrans-65
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: HTML5 Boilerplate Compass扩展
- en: There is a Compass extension that is available for use with Compass at `github.com/sporkd/compass-html5-boilerplate`.
    Note that it is not as frequently updated as the `main.css` file you find in HTML5
    Boilerplate. This is extensively modularized and splits the `main.css` file into
    multiple Sass files. The CSS comments are also removed from the resulting CSS
    file.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 有一个可用于与Compass一起使用的Compass扩展，位于`github.com/sporkd/compass-html5-boilerplate`。请注意，它的更新频率不如在HTML5
    Boilerplate中找到的`main.css`文件。这是广泛模块化的，并将`main.css`文件拆分为多个Sass文件。结果CSS文件中的CSS注释也被删除。
- en: HTML5 Boilerplate Sass fork
  id: totrans-67
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: HTML5 Boilerplate Sass分支
- en: There is a Sass fork of the `main.css` that is frequently updated at `github.com/grayghostvisuals/html5-boilerplate/tree/h5bp-scss`
    that you can use, if all you want is a base Sass file to start from. This version
    uses Sass variables but does not split the file into individual files.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 有一个Sass分支的`main.css`经常更新，网址为`github.com/grayghostvisuals/html5-boilerplate/tree/h5bp-scss`，您可以使用它，如果您只想要一个基本的Sass文件来开始。这个版本使用Sass变量，但不会将文件拆分为单独的文件。
- en: Unfortunately, there is no up-to-date Less fork of HTML5 Boilerplate. However,
    you can rename the `main.css` to `main.less` and then use it as a Less file.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 不幸的是，HTML5 Boilerplate没有最新的Less分支。但是，您可以将`main.css`重命名为`main.less`，然后将其用作Less文件。
- en: Print considerations
  id: totrans-70
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 打印注意事项
- en: If your web page is likely to be printed, you might want to consider using colors
    that are printable. Some browsers consider some colors too light to print and
    force a darker version of the color for printing; `merttol.com/articles/code/too-light-for-print.html`
    has more details on this interesting quirk.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您的网页可能会被打印，您可能希望考虑使用可打印的颜色。一些浏览器认为一些颜色太浅，无法打印，并会强制使用较深的颜色进行打印；`merttol.com/articles/code/too-light-for-print.html`上有关于这个有趣怪癖的更多细节。
- en: '[Appendix](apa.html "Appendix A. You Are an Expert,Now What?"), *You Are an
    Expert, Now What?*, covers the reasoning and rationale behind the print styles
    in great detail.'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: '[附录](apa.html "附录 A. 您是专家，现在怎么办？")，*您是专家，现在怎么办？*，详细介绍了打印样式背后的推理和原理。'
- en: Finding and using polyfills
  id: totrans-73
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 查找和使用polyfills
- en: Most of HTML5 and CSS3 features have differing levels of support in different
    browsers, hence, either use JavaScript code to mimic these features in browsers
    that do not support them or provide an altering view. Such snippets of code are
    called **polyfills**.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数HTML5和CSS3功能在不同浏览器中具有不同级别的支持，因此，要么使用JavaScript代码在不支持这些功能的浏览器中模拟这些功能，要么提供一个可变的视图。这些代码片段称为polyfills。
- en: I help maintain `html5please.com` which is an opinionated list of polyfills
    for some popular HTML5 and CSS3 features.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 我帮助维护`html5please.com`，这是一个关于一些流行的HTML5和CSS3功能的polyfills的主观列表。
- en: Beware of the performance penalty of using a lot of polyfills on a browser that
    does not support a lot of features.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 要注意的是，在不支持许多功能的浏览器上使用大量polyfills会带来性能损失。
- en: When you do use your polyfills, make sure you use Modernizr's `load` function
    like we did for the audio polyfill for Sun and Sand Music Festival website in
    [Chapter 4](ch04.html "Chapter 4. Adding Interactivity and Completing Your Site"),
    *Adding Interactivity and Completing Your Site*. This would prevent unnecessary
    loading of polyfills on browsers that support the features you want to use.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 当您使用polyfills时，请确保使用Modernizr的`load`函数，就像我们在[第4章](ch04.html "第4章. 添加交互和完成您的网站")中为Sun
    and Sand音乐节网站的音频polyfill所做的那样。这将防止在支持您想要使用的功能的浏览器上不必要地加载polyfills。
- en: A comprehensive list of all kinds of polyfills is available on the Modernizr
    Wiki at `github.com/Modernizr/Modernizr/wiki/HTML5-Cross-browser-Polyfills`.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 在Modernizr Wiki上提供了所有类型polyfills的全面列表，网址为`github.com/Modernizr/Modernizr/wiki/HTML5-Cross-browser-Polyfills`。
- en: Making your site faster
  id: totrans-79
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 加快您的网站速度
- en: If your pages use a lot of resources such as images, then perhaps it would be
    wise to prefetch those resources so your page loads faster. **DNS prefetching**
    would be a way to do that.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您的页面使用了大量资源，比如图片，那么也许预取这些资源会更明智，这样您的页面加载速度会更快。**DNS预取**就是一种方法。
- en: DNS prefetching
  id: totrans-81
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: DNS预取
- en: DNS prefetching informs the browser of resources on other domain names that
    are referred to within the page early on during the page load, so it can do the
    DNS resolution of these domain names.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: DNS预取通知浏览器页面加载过程中提前引用的其他域名资源，以便它可以解析这些域名的DNS解析。
- en: A browser has to look up a domain name on a **Domain Name Server** (**DNS**)
    to figure out where it is located on the Internet. Sometimes, it has to go through
    multiple layers of Domain Name Servers and it could be very slow and is not always
    consistent. By using DNS prefetching, even before a user clicks a link, or loads
    a resource, the DNS resolution for that particular domain name is done and the
    resource can be fetched much faster.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 浏览器必须在域名服务器（DNS）上查找域名，以确定其在互联网上的位置。有时，它必须经过多层域名服务器，这可能非常缓慢，而且并不总是一致的。通过使用DNS预取，即使在用户点击链接或加载资源之前，也会对特定域名的DNS解析进行处理，并且资源可以更快地获取。
- en: Google states that this saves about 200 milliseconds on a resource hosted on
    an external domain name.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 谷歌表示，这可以节省大约200毫秒的时间，用于托管在外部域名上的资源。
- en: If you host your assets on a **Content Delivery Network** (**CDN**) like Amazon's
    S3 or even if you refer to Google's API or Microsoft's API CDN, it would be faster
    to get these files when they are prefetched.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您将资产托管在像亚马逊的S3这样的内容交付网络（CDN）上，甚至是引用Google的API或Microsoft的API CDN，那么在预取这些文件时会更快。
- en: 'DNS prefetching is invoked by writing the following code within the `head`
    tag of a HTML file:'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 通过在HTML文件的`head`标签中编写以下代码来调用DNS预取：
- en: '[PRE15]'
  id: totrans-87
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'Browsers that understand prefetching would immediately start attempting to
    resolve the DNS for the link within the `href` attribute. The following is how
    it would look for Amazon S3:'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 理解预取的浏览器将立即开始尝试解析`href`属性中的链接的DNS。以下是它在Amazon S3上的样子：
- en: '[PRE16]'
  id: totrans-89
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: Currently, Firefox 3.5 and higher, Safari 5 and higher, and IE9 and higher,
    support DNS prefetching.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 目前，Firefox 3.5及更高版本，Safari 5及更高版本，以及IE9及更高版本支持DNS预取。
- en: Making your site more visible on search engines
  id: totrans-91
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使您的站点在搜索引擎上更加可见
- en: While the content of your website matters the most, making sure everything else
    supports better visibility of the content on search engines is important too.
    The following sections explain some ways you can do this.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管您网站的内容最重要，但确保其他一切都支持更好地在搜索引擎上显示内容也很重要。以下部分解释了一些您可以做到这一点的方法。
- en: Directing search spiders to your site map
  id: totrans-93
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 引导搜索蜘蛛到您的站点地图
- en: Site maps inform search engines of the existence of pages within your site that
    are otherwise not discoverable; perhaps they are not linked to from other pages
    on your site, or from external sites.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 站点地图通知搜索引擎站点内页面的存在，否则这些页面是无法发现的；也许它们在站点的其他页面或外部站点上都没有链接。
- en: Some CMSs provide plugins to generate site maps, listed at `code.google.com/p/sitemap-generators/wiki/SitemapGenerators`,
    or you can write one yourself using the guidelines at [www.sitemaps.org/protocol.html](http://www.sitemaps.org/protocol.html).
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 一些CMS提供插件来生成站点地图，列在`code.google.com/p/sitemap-generators/wiki/SitemapGenerators`，或者您可以按照[www.sitemaps.org/protocol.html](http://www.sitemaps.org/protocol.html)上的指南自己编写一个。
- en: 'Once you have written your site map, you can let search engine spiders discover
    it when they crawl your website if you add a link to the sitemap by using the
    following:'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦编写了站点地图，您可以通过添加以下内容，让搜索引擎蜘蛛在爬行您的网站时发现它：
- en: '[PRE17]'
  id: totrans-97
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: You can also submit the site map to individual search engines instead of linking
    to the site map within the HTML page, if you would like to make your page as small
    as possible.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 您还可以将站点地图提交给各个搜索引擎，而不是在HTML页面中链接到站点地图，如果您希望尽可能减小页面大小。
- en: Implementing X-Robots-Tag headers
  id: totrans-99
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 实施X-Robots-Tag标头
- en: You will likely sometimes have a staging server, such as `staging.example.com`
    for your site `example.com`. If an external site links to the files on the staging
    server (say you were asking a question about some feature not working on a forum
    and link to the staging server), it is likely to be indexed by search engines
    even though the domain name does not figure in the `robots.txt` file or does not
    hold a `robots.txt` file.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 您可能会有一个暂存服务器，例如`staging.example.com`，用于您的站点`example.com`。如果外部站点链接到暂存服务器上的文件（比如您在论坛上询问某些功能不起作用并链接到暂存服务器），即使域名不在`robots.txt`文件中，或者没有`robots.txt`文件，它也可能被搜索引擎索引。
- en: 'To prevent this, you can add `X-Robots-Tag` HTTP header tags by appending and
    uncommenting the following code snippet to the `.htaccess` file on the staging
    server:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 为了防止这种情况，您可以通过将以下代码片段附加并取消注释的方式，将`X-Robots-Tag` HTTP标头标签添加到暂存服务器上的`.htaccess`文件中：
- en: '[PRE18]'
  id: totrans-102
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: Trailing slash redirects
  id: totrans-103
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 尾部斜杠重定向
- en: Search engines consider folder URLs `http://example.com/foo` and `http://example.com/foo/`
    as two different URLs and as such would consider the content to be duplicates
    of each other. To prevent this, rewrite the URLs either to change `http://example.com/foo`
    to `http://example.com/foo/` or `http://example.com/foo/` to `http://example.com/foo`.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 搜索引擎将文件夹URL `http://example.com/foo`和`http://example.com/foo/`视为两个不同的URL，因此会将内容视为彼此的副本。为了防止这种情况，重写URL，要么将`http://example.com/foo`改为`http://example.com/foo/`，要么将`http://example.com/foo/`改为`http://example.com/foo`。
- en: The way we do this is to edit the `.htaccess` file for Apache server and add
    the following rewrite rules (see [Chapter 5](ch05.html "Chapter 5. Customizing
    the Apache Server"), *Customizing the Apache Server*, for details on how we edit
    `.htaccess` files).
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 我们这样做的方法是编辑Apache服务器的`.htaccess`文件，并添加以下重写规则（有关如何编辑`.htaccess`文件的详细信息，请参见[第5章](ch05.html
    "第5章 自定义Apache服务器")，“自定义Apache服务器”）。
- en: 'Option 1: Rewrite example.com/foo to example.com/foo/'
  id: totrans-106
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 选项1：将example.com/foo重写为example.com/foo/
- en: 'The following code snippet helps us to rewrite `example.com/foo` to `example.com/foo/`:'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 以下代码片段帮助我们将`example.com/foo`重写为`example.com/foo/`：
- en: '[PRE19]'
  id: totrans-108
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'Option 2: Rewrite example.com/foo/ to example.com/foo'
  id: totrans-109
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 选项2：将example.com/foo/重写为example.com/foo
- en: 'The following code snippet helps us to rewrite `example.com/foo/` to `example.com/foo`:'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 以下代码片段帮助我们将`example.com/foo/`重写为`example.com/foo`：
- en: '[PRE20]'
  id: totrans-111
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: If you have existing rewrite rules, perform the following steps to make sure
    you set up your rewrite rules correctly. Not doing so can cause incorrect redirects
    and 404 errors.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您有现有的重写规则，请执行以下步骤，以确保正确设置重写规则。不这样做可能会导致不正确的重定向和404错误。
- en: 'Keep a backup: Back up the `.htaccess` file you are going to add redirects
    to, before you start adding them. This way you can quickly go back to the backup
    file if you are unable to access your site because of an error in the .`htaccess`
    file.'
  id: totrans-113
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 备份：在开始添加重定向之前，备份您要添加重定向的`.htaccess`文件。这样，如果因为`.htaccess`文件中的错误而无法访问您的站点，您可以快速返回到备份文件。
- en: 'Do not append or replace existing rewrite rules: Instead of appending or replacing
    existing rules from CMSes you are using, merge them within.'
  id: totrans-114
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不要附加或替换现有的重写规则：不要附加或替换您正在使用的CMS的现有规则，而是将它们合并在一起。
- en: 'Watch the order of rewrite rules: Make sure you add the slash first and then
    your existing rules, which might rewrite the end paths.'
  id: totrans-115
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 观察重写规则的顺序：确保您先添加斜杠，然后再添加可能重写末尾路径的现有规则。
- en: 'Confirm the `RewriteBase` path: If your website is in a subfolder, ensure you
    have set the right `RewriteBase` path for your rewrite rules. If you have a working
    `RewriteBase` path, do not remove it.'
  id: totrans-116
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确认`RewriteBase`路径：如果您的网站在子文件夹中，请确保为您的重写规则设置了正确的`RewriteBase`路径。如果您有一个有效的`RewriteBase`路径，请不要删除它。
- en: Note
  id: totrans-117
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Finally, consider implementing guidelines from Google's *SEO Starter Guide*
    at [http://googlewebmastercentral.blogspot.com/2008/11/googles-seo-starter-guide.html](http://googlewebmastercentral.blogspot.com/2008/11/googles-seo-starter-guide.html).
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，考虑从Google的*SEO入门指南*中实施指南，网址为[http://googlewebmastercentral.blogspot.com/2008/11/googles-seo-starter-guide.html](http://googlewebmastercentral.blogspot.com/2008/11/googles-seo-starter-guide.html)。
- en: Handling users without JavaScript
  id: totrans-119
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 处理没有JavaScript的用户
- en: HTML5 Boilerplate provides a class called `no-js` that gets replaced with a
    class called `js`, when JavaScript is detected by Modernizr on the `html` tag.
    Using this class name, you can craft the style for how the website should look
    when JavaScript is disabled.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: HTML5 Boilerplate提供了一个名为`no-js`的类，当Modernizr在`html`标签上检测到JavaScript时，它会被替换为一个名为`js`的类。使用这个类名，你可以为禁用JavaScript时网站的外观制定样式。
- en: In our Sun and Sand Festival website, when JavaScript is not enabled, clicking
    on the **Day 2** link produces nothing.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的Sun and Sand Festival网站上，当JavaScript未启用时，点击**Day 2**链接不会产生任何效果。
- en: 'You can view how the site works when JavaScript is disabled on various browsers,
    in the following ways:'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以通过以下方式查看在各种浏览器上禁用JavaScript时网站的工作方式：
- en: '**Firefox**: Go to **Preferences**, click on **Content**, and then uncheck
    the **EnableJavaScript** checkbox.'
  id: totrans-123
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Firefox**：进入**偏好设置**，点击**内容**，然后取消勾选**启用JavaScript**复选框。'
- en: '**Chrome**: Download the **Chrome Web Developer** extension and disable JavaScript
    from within the extension.'
  id: totrans-124
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Chrome**：下载**Chrome Web Developer**扩展，并在扩展内禁用JavaScript。'
- en: '**Safari**: Click the **Disable JavaScript** menu item on the **Develop** menu.
    You can see the **Develop** menu when you check the **Show Develop** toolbar on
    the **Advanced** tab in the Safari **Preferences** pane.'
  id: totrans-125
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Safari**：在**开发**菜单上点击**禁用JavaScript**菜单项。当你在Safari的**偏好设置**窗格的**高级**选项卡上勾选**显示开发**工具栏时，你就可以看到**开发**菜单。'
- en: '**Internet Explorer**: Click the **Internet Options** in the **Settings** menu,
    and click **Custom Level** and check the **Disable in the Active scripting** menu.'
  id: totrans-126
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Internet Explorer**：在**设置**菜单中点击**Internet选项**，然后点击**自定义级别**，勾选**在Active
    scripting中禁用**菜单。'
- en: '**Opera**: Click **Quick Preferences** and unselect the **Enable JavaScript**
    option.'
  id: totrans-127
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Opera**：点击**快速偏好设置**，取消选择**启用JavaScript**选项。'
- en: 'Let us make sure that the tabs do not render when JavaScript is not available,
    and make sure the whole listing is displayed at the same time, as shown in the
    following screenshot:'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们确保在JavaScript不可用时选项卡不会渲染，并确保整个列表同时显示，如下面的截图所示：
- en: '![Handling users without JavaScript](img/8505_06_01.jpg)'
  id: totrans-129
  prefs: []
  type: TYPE_IMG
  zh: '![处理没有JavaScript的用户](img/8505_06_01.jpg)'
- en: 'We can do this by editing `main.css` to take advantage of the `no-js` class.
    First, we need to remove the tabbed navigation, as shown in the following code:'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以通过编辑`main.css`来利用`no-js`类来实现这一点。首先，我们需要删除选项卡导航，如下面的代码所示：
- en: '[PRE21]'
  id: totrans-131
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'Then, we need to make the two lists be positioned statically instead of being
    absolutely positioned one below the other, as shown in the following code:'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，我们需要确保这两个列表在特定情况下是静态定位，而不是绝对定位在彼此下方，如下面的代码所示：
- en: '[PRE22]'
  id: totrans-133
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'We need to make sure the `hidden` class does not get applied in this specific
    instance for **Day 2**, so we can see all the artists at once, as shown in the
    following code:'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要确保在**Day 2**的特定情况下不应用`hidden`类，这样我们就可以一次看到所有的艺术家，如下面的代码所示：
- en: '[PRE23]'
  id: totrans-135
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: Now, when you enable JavaScript again, you will notice that the tabbed navigation
    appears and everything functions as you expected.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，当你重新启用JavaScript时，你会注意到选项卡导航出现了，一切都按你的预期运行。
- en: Optimizing your images
  id: totrans-137
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 优化你的图片
- en: Every resource you add to your page is an extra request to the server and extra
    network trip for the browser before it declares the page complete. Network requests
    are typically the slowest components of a page load. This is especially obvious
    on mobile devices when surfing websites on 3G or even lower connections. The smaller
    your files are, the faster they will reach the browser.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 你添加到页面上的每个资源都是对服务器的额外请求，也是浏览器在宣布页面完成之前额外的网络请求。网络请求通常是页面加载中最慢的组件。这在移动设备上特别明显，当在3G甚至更低的连接上浏览网站时。你的文件越小，它们就会越快地到达浏览器。
- en: If you can avoid using a large image, you are better off not using them.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 如果可以避免使用大图片，最好不要使用。
- en: 8-bit PNGs
  id: totrans-140
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 8位PNG文件
- en: If you are considering using a GIF format for your images, always use PNG. PNG
    formats for images are far less heavy and much smaller. Even further, 8-bit PNGs
    are significantly smaller in size.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 如果考虑使用GIF格式的图片，应该始终使用PNG。PNG格式的图片要轻得多，体积也小得多。此外，8位PNG文件的体积要小得多。
- en: If you are using PNGs, you should use PNG-8 with a full alpha channel that gives
    you compatibility all the way back to IE6\. Ensure you verify the final output
    to ensure they are not too grainy or pixelated.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你使用PNG格式的图片，应该使用带有完整alpha通道的PNG-8，这样可以兼容IE6。确保验证最终输出，以确保它们不会太粗糙或像素化。
- en: Tools for image optimization
  id: totrans-143
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 图片优化工具
- en: There are build tools in HTML5 Boilerplate that will optimize images,which we
    will look into in the next chapter. There are also standalone tools that are worth
    looking at, when you want to compress a bunch of images in one go. If you wish
    to upload your images and optimize them, you can do so at `smushit.com/ysmush.it/`.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: HTML5 Boilerplate中有构建工具可以优化图片，我们将在下一章中进行讨论。还有一些独立的工具也值得一看，当你想要一次压缩一堆图片时。如果你希望上传你的图片并对其进行优化，可以在`smushit.com/ysmush.it/`上进行。
- en: ImageAlpha
  id: totrans-145
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: ImageAlpha
- en: If you have 24-bit PNG images, you can convert them into 8-bit PNGs that have
    a full alpha channel with this tool that you can download from `pngmini.com`.
    It is only for Mac OS X.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你有24位PNG图片，可以使用从`pngmini.com`下载的工具将它们转换为带有完整alpha通道的8位PNG文件。这个工具只适用于Mac OS
    X。
- en: GUIs and command-line tools that work on other Operating Systems are outlined
    at `pngquant.org`.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 在`pngquant.org`上列出了适用于其他操作系统的图形用户界面和命令行工具。
- en: ImageOptim
  id: totrans-148
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: ImageOptim
- en: If you would like to optimize images of various formats in one go, **ImageOptim**
    would be your best tool of choice. You can download this from `imageoptim.com`.
    This is also for Mac OS X only, and takes advantage of several tools to perform
    these optimizations.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您想一次优化各种格式的图像，**ImageOptim**将是您最佳的选择。您可以从`imageoptim.com`下载。这也仅适用于Mac OS X，并利用多个工具执行这些优化。
- en: 'If you would like to use something similar on other systems, you can download
    the specific tool you need for each image format. The following table lists tools
    for some of the popular image formats:'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您想在其他系统上使用类似的东西，您可以为每种图像格式下载您需要的特定工具。以下表格列出了一些流行图像格式的工具：
- en: '| Format | Tool |'
  id: totrans-151
  prefs: []
  type: TYPE_TB
  zh: '| 格式 | 工具 |'
- en: '| --- | --- |'
  id: totrans-152
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| Animated GIF | `Gifsiclewww.lcdf.org/gifsicle/` |'
  id: totrans-153
  prefs: []
  type: TYPE_TB
  zh: '| 动画GIF | `Gifsiclewww.lcdf.org/gifsicle/` |'
- en: '| JPEG | `Jpegtranjpegclub.org/` |'
  id: totrans-154
  prefs: []
  type: TYPE_TB
  zh: '| JPEG | `Jpegtranjpegclub.org/` |'
- en: '| PNG | `Pngcrushpmt.sourceforge.net/pngcrush/``Imageworsenerentropymine.com/imageworsener/``Optipngoptipng.sourceforge.net/``PNGOUT
    advsys.net/ken/utils.htm` |'
  id: totrans-155
  prefs: []
  type: TYPE_TB
  zh: '| PNG | `Pngcrushpmt.sourceforge.net/pngcrush/``Imageworsenerentropymine.com/imageworsener/``Optipngoptipng.sourceforge.net/``PNGOUT
    advsys.net/ken/utils.htm` |'
- en: 'If you would like to learn more about using these tools for optimization, read
    more on the slides by Stoyan Stefanov about image optimization for the Web at
    [www.slideshare.net/stoyan/image-optimization-for-the-web-at-phpworks-presentation](http://www.slideshare.net/stoyan/image-optimization-for-the-web-at-phpworks-presentation).
    There are even more clever optimizations that could be done for PNG and JPEG image
    formats, detailed over on *Smashing Magazine* at [www.smashingmagazine.com/2009/07/15/clever-png-optimization-techniques](http://www.smashingmagazine.com/2009/07/15/clever-png-optimization-techniques     )/ and [http://www.smashingmagazine.com/2009/07/01/clever-jpeg-optimization-techniques/](http://www.smashingmagazine.com/2009/07/01/clever-jpeg-optimization-techniques/)
    respectively.'
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: '如果您想了解更多关于使用这些优化工具的信息，请阅读Stoyan Stefanov关于网络图像优化的幻灯片，网址为[www.slideshare.net/stoyan/image-optimization-for-the-web-at-phpworks-presentation](http://www.slideshare.net/stoyan/image-optimization-for-the-web-at-phpworks-presentation)。关于PNG和JPEG图像格式还有更多巧妙的优化方法，可以在*Smashing
    Magazine*上找到详细信息，网址分别为[www.smashingmagazine.com/2009/07/15/clever-png-optimization-techniques](http://www.smashingmagazine.com/2009/07/15/clever-png-optimization-techniques     )和[http://www.smashingmagazine.com/2009/07/01/clever-jpeg-optimization-techniques/](http://www.smashingmagazine.com/2009/07/01/clever-jpeg-optimization-techniques/)。'
- en: Using image sprites
  id: totrans-157
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用图像精灵
- en: Network requests take a long time to make for each resource. To make these smaller,
    you could combine multiple image files into one single image file that needs to
    be requested once and be cached for a very long time so that the page loads significantly
    faster. This is especially useful if your page is going to be viewed on devices
    with very low bandwidth connections to the Internet.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 对于每个资源进行网络请求需要很长时间。为了使这些更小，您可以将多个图像文件合并为一个单一的图像文件，只需请求一次，并且可以缓存很长时间，以便页面加载速度显著加快。如果您的页面将在互联网连接非常低带宽的设备上查看，这将特别有用。
- en: This means, you combine multiple images in one large image and use the CSS background
    property on all selectors where these images would be used. Let us convert all
    our artist images into a big sprite and replace the image elements into background
    images.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 这意味着，您可以将多个图像合并为一个大图像，并在所有选择器上使用CSS背景属性，其中这些图像将被使用。让我们将所有艺术家的图像转换为一个大精灵，并将图像元素替换为背景图像。
- en: 'The following is our final sprite:'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是我们的最终精灵：
- en: '![Using image sprites](img/8505_06_02.jpg)'
  id: totrans-161
  prefs: []
  type: TYPE_IMG
  zh: '![使用图像精灵](img/8505_06_02.jpg)'
- en: 'Let us replace our image elements in `index.html`, like the following one:'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们替换`index.html`中的图像元素，就像以下这样：
- en: '[PRE24]'
  id: totrans-163
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'With the following:'
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 使用以下内容：
- en: '[PRE25]'
  id: totrans-165
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: 'We do this for each of the artists. Then, in our `style.css`, we add the following
    code snippet:'
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 我们为每位艺术家都这样做。然后，在我们的`style.css`中，我们添加以下代码片段：
- en: '[PRE26]'
  id: totrans-167
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: Nothing has changed in the final page, except we have now reduced the number
    of network requests to 1 instead of 6 for these images. By optimizing the final
    sprite, we can make this request even faster.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 最终页面没有发生任何变化，只是我们现在将这些图像的网络请求数量减少到1个而不是6个。通过优化最终的精灵，我们甚至可以使这个请求更快。
- en: Generating a sprite would seem like a lot of work, but there are many tools
    to help with this.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 生成精灵似乎是很多工作，但有许多工具可以帮助完成这项工作。
- en: CSS sprites from within Adobe Photoshop
  id: totrans-170
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 从Adobe Photoshop中的CSS精灵
- en: Using the instructions documented at `arnaumarch.com/en/sprites.html`, you can
    use a script file from Photoshop to select a folder of images and also generate
    the associated CSS file using images within these files positioned and corrected
    as a background image.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 使用`arnaumarch.com/en/sprites.html`中记录的说明，您可以使用Photoshop中的脚本文件选择一个图像文件夹，并生成使用这些文件中的图像定位和校正为背景图像的相关CSS文件。
- en: 'There are some things to note when using this tool, as explained in the following
    points:'
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 在使用此工具时，有一些需要注意的事项，如下所述：
- en: Make sure the folder only contains the images you want to add to a sprite
  id: totrans-173
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确保文件夹只包含您想要添加到精灵中的图像
- en: The resulting CSS file is generated within the folder used to create the sprite
  id: totrans-174
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 生成的CSS文件位于用于创建精灵的文件夹内
- en: The generated sprite is opened in Adobe Photoshop and you are required to crop
    it before you save it out as an image at the location of your choice
  id: totrans-175
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 生成的精灵在Adobe Photoshop中打开，您需要在将其保存到所选位置之前裁剪它
- en: CSS sprites with Compass
  id: totrans-176
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 使用Compass的CSS精灵
- en: Compass—the framework on top of Sass—can stitch your images together at compile
    time and have the images referenced in your Sass file, turned into a sprite in
    the resulting CSS file.
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: Compass——Sass的框架——可以在编译时将您的图像拼接在一起，并在您的Sass文件中引用这些图像，然后在生成的CSS文件中将其转换为精灵。
- en: 'All you need to do is to make sure you set up a folder within your images folder,
    such that you have the right names for each of the images, as described in the
    following list (taken from Compass documentation):'
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 您只需要确保在图像文件夹中设置一个文件夹，以便为每个图像设置正确的名称，如下列表所述（摘自Compass文档）：
- en: '`images/my-icons/new.png`'
  id: totrans-179
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`images/my-icons/new.png`'
- en: '`images/my-icons/edit.png`'
  id: totrans-180
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`images/my-icons/edit.png`'
- en: '`images/my-icons/save.png`'
  id: totrans-181
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`images/my-icons/save.png`'
- en: '`images/my-icons/delete.png`'
  id: totrans-182
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`images/my-icons/delete.png`'
- en: 'The name `my-icons` can be any name you prefer. Then in the Sass file, use
    the following code:'
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 名称`my-icons`可以是您喜欢的任何名称。然后在Sass文件中，使用以下代码：
- en: '[PRE27]'
  id: totrans-184
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: 'Use the same name you used instead of `my-icons` in the previous step. Presto!
    You are done! Compass generates a CSS file that has the following code:'
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一步中使用的名称与`my-icons`相同。完成！Compass会生成一个包含以下代码的CSS文件：
- en: '[PRE28]'
  id: totrans-186
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: Now, use the appropriate class name in your markup to add the appropriate image
    to your element.
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，在您的标记中使用适当的类名，以向您的元素添加适当的图像。
- en: SpriteMe
  id: totrans-188
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: SpriteMe
- en: SpriteME, available at `spriteme.org/`, is a bookmarklet that analyses images
    used on a page and creates sprites out of them. If you have an existing site to
    convert to using sprites, this would be a great place to start from.
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: SpriteME，可在`spriteme.org/`上获得，是一个书签工具，可分析页面上使用的图像并将其制作成精灵。如果您有现有站点要转换为使用精灵，这将是一个很好的起点。
- en: Augmenting Google Analytics
  id: totrans-190
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 增强Google Analytics
- en: '**Google Analytics** can track several kinds of data and here are some easy,
    obvious augments you can make to your Analytics data.'
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: '**Google Analytics**可以跟踪多种数据类型，以下是一些易于明显的增强，您可以对您的分析数据进行的。 '
- en: Adding more tracking settings
  id: totrans-192
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 添加更多跟踪设置
- en: 'Google Analytics gives you a number of optional settings to track, which you
    need not use the `.push()` method on; instead you can directly append to the initial
    array. Instead of the following:'
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: Google Analytics提供了许多可选设置来进行跟踪，您无需在`.push()`方法上使用；而是可以直接附加到初始数组上。而不是以下内容：
- en: '[PRE29]'
  id: totrans-194
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: 'You can do the following:'
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以执行以下操作：
- en: '[PRE30]'
  id: totrans-196
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: Anonymize IP addresses
  id: totrans-197
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 匿名化IP地址
- en: 'In some countries, no personal data may be transferred outside jurisdictions
    that do not have similarly strict laws (that is, from Germany to outside the EU).
    Thus, a webmaster using the Google Analytics script may have to ensure that no
    personal (trackable) data is transferred to the U.S. You can do that with the
    `_gat.anonymizeIp` option. In use it looks like the following:'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 在一些国家，不得将个人数据转移到法律不那么严格的司法管辖区之外（即从德国到欧盟之外）。因此，使用Google Analytics脚本的网站管理员可能需要确保不会将个人（可跟踪的）数据传输到美国。您可以使用`_gat.anonymizeIp`选项来实现。使用时看起来像这样：
- en: '[PRE31]'
  id: totrans-199
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: Tracking jQuery AJAX requests in Google Analytics
  id: totrans-200
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 在Google Analytics中跟踪jQuery AJAX请求
- en: 'Steve Schwartz writes abou can use in the `plugins.js` that will allow you
    to track jQuery AJAX requests at [www.alfajango.com/blog/track-jquery-ajax-requests-in-google-analytics](http://www.alfajango.com/blog/track-jquery-ajax-requests-in-google-analytics).
    The following code snippet shows that script:'
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 史蒂夫·施瓦茨写道，您可以在`plugins.js`中使用的代码，可以让您跟踪jQuery AJAX请求，网址是[www.alfajango.com/blog/track-jquery-ajax-requests-in-google-analytics](http://www.alfajango.com/blog/track-jquery-ajax-requests-in-google-analytics)。以下代码片段显示了该脚本：
- en: '[PRE32]'
  id: totrans-202
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: Tracking JavaScript errors in Google Analytics
  id: totrans-203
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 在Google Analytics中跟踪JavaScript错误
- en: 'If you want to track JavaScript errors on your page using Google Analytics,
    it is possible to do so with the following script, which you need to add after
    the Google Analytics variable `_gaq` has been defined in the `index.html` page:'
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您想要使用Google Analytics在页面上跟踪JavaScript错误，可以使用以下脚本来实现，在`index.html`页面中定义了Google
    Analytics变量`_gaq`之后添加：
- en: '[PRE33]'
  id: totrans-205
  prefs: []
  type: TYPE_PRE
  zh: '[PRE33]'
- en: Summary
  id: totrans-206
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, we looked at how we can provide a better experience for users
    of Internet Explorer. We also considered very briefly some tools that can help
    us write more efficient and robust stylesheets that are easier to maintain in
    the light of cutting edge developments in CSS. We looked at how to use polyfills
    and write pages that are faster to load and more secure in general. We looked
    in detail at how to render the Sun and Sand website when JavaScript is disabled
    and also stitched the artists' images together into a sprite and saved on several
    network requests.
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们看了如何为Internet Explorer的用户提供更好的体验。我们还简要考虑了一些工具，可以帮助我们编写更高效、更健壮的样式表，更易于在CSS的最新发展中进行维护。我们看了如何使用polyfills编写加载更快、更安全的页面。我们详细了解了在禁用JavaScript时如何渲染Sun
    and Sand网站，并将艺术家的图像拼接成精灵并保存在多个网络请求中。
- en: In the next chapter, we will look at automating deployment of our site using
    the build script that HTML5 Boilerplate provides.
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: '在下一章中，我们将看看如何使用HTML5 Boilerplate提供的构建脚本来自动部署我们的网站。 '
