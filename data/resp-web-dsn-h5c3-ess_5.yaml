- en: Chapter 5. Testing and Optimizing for Performance
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第5章。测试和优化性能
- en: Throughout the course of this book, we've explored some of the essentials of
    responsive web design, using HTML5 and CSS3, and learned how to begin to modify
    our code to make content responsive across different devices.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本书的过程中，我们已经探讨了响应式网页设计的一些基本要素，使用了HTML5和CSS3，并学会了如何修改我们的代码，使内容在不同设备上响应。
- en: We should keep in mind that building just a responsive website is not enough—we
    must also test and optimize content to work as efficiently as possible across
    different devices. If pages on our site are slow to load, then this will clearly
    be a concern. Throughout the course of this chapter, we will look at some of the
    tips and tricks we can use to begin to ensure that our sites are sufficiently
    responsive and content loads quickly.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 我们应该记住，仅仅构建一个响应式网站是不够的，我们还必须测试和优化内容，使其在不同设备上尽可能高效地运行。如果我们网站上的页面加载缓慢，那显然是一个问题。在本章的过程中，我们将看一些我们可以使用的技巧和窍门，开始确保我们的网站足够响应，并且内容加载迅速。
- en: 'In this chapter, we will cover the following topics:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖以下主题：
- en: Exploring why pages load slowly
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 探索页面加载缓慢的原因
- en: Optimizing the performance of our sites
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 优化我们网站的性能
- en: Measuring site performance
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 测量网站性能
- en: Testing for cross-browser compatibility
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 测试跨浏览器兼容性
- en: Exploring best practices
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 探索最佳实践
- en: Curious? Let's get started!
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 好奇吗？让我们开始吧！
- en: Understanding the importance of speed
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 了解速度的重要性
- en: The advent of using different devices that can access the Internet means speed
    is critical—the time it takes to download content from hosting servers and how
    quickly the user can interact with the site are key to the success of any site.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 使用可以访问互联网的不同设备的出现意味着速度至关重要——从托管服务器下载内容所需的时间以及用户与网站互动的速度对于任何网站的成功至关重要。
- en: 'Why it is important to focus on the performance of our website on the mobile
    devices or those devices with lesser screen resolution? There are several reasons
    for this, they include the following:'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 为什么重点关注我们网站在移动设备或屏幕分辨率较低的设备上的性能？有几个原因，包括以下：
- en: Nearly 80 percent of Internet users own a smartphone
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 近80％的互联网用户拥有智能手机
- en: Around 90 percent of users go online through a mobile device, with 48% of users
    using search engines to research new products
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 大约90％的用户通过移动设备上网，其中48％的用户使用搜索引擎来研究新产品
- en: Approximately 72 percent of users abandon a website if the loading time is more
    than 5–6 seconds
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 大约72％的用户会在加载时间超过5-6秒时放弃网站
- en: Mobile digital media time is now significantly higher compared to desktop use
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 移动数字媒体的使用时间现在显著高于桌面使用
- en: If we do not consider statistics such as these, then we may go ahead and construct
    our site, but end up with a customer losing both income and market share, if we
    have not fully considered the extent of where our site should work. Coupled with
    this is the question of performance; if our site is slow, then this will put customers
    off and contribute to lost sales.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们不考虑这样的统计数据，那么我们可能会继续构建我们的网站，但最终会导致客户失去收入和市场份额，如果我们没有充分考虑我们的网站应该在何处运行的范围。与此同时，还有性能的问题；如果我们的网站速度慢，那么这将使客户失去兴趣并导致销售额下降。
- en: A study performed by San Francisco-based Kissmetrics shows that mobile users
    wait between 6–10 seconds before they close the website and lose faith in it.
    At the same time, tests performed by Guy Podjarny for the Mediaqueri.es website
    ([http://mediaqueri.es](http://mediaqueri.es)) indicate that we're frequently
    downloading the same content for both large and small screens; this is entirely
    unnecessary when, with some simple changes, we can vary content to better suit
    desktop PCs or mobile devices!
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 旧金山基思度公司进行的一项研究表明，移动用户在关闭网站并对其失去信心之前等待6-10秒。与此同时，Guy Podjarny为Mediaqueri.es网站（[http://mediaqueri.es](http://mediaqueri.es)）进行的测试表明，我们经常为大屏幕和小屏幕下载相同的内容；当然，只要进行一些简单的更改，我们就可以根据需要调整内容以更好地适应台式电脑或移动设备！
- en: So, what can we do? Well, before we start exploring where to make changes, let's
    take a look at some of the reasons why sites run slowly.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 那么，我们能做些什么？在开始探索何处进行更改之前，让我们看一看网站运行缓慢的一些原因。
- en: Understanding why pages load slowly
  id: totrans-20
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 了解页面加载缓慢的原因
- en: 'Although we may build a great site that works well across multiple devices,
    it''s still no good if it is slow! Every website will of course operate differently,
    but there are a number of factors to allow for, which can affect page (and site)
    speed:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管我们可能构建了一个在多个设备上运行良好的网站，但如果速度慢，那还是不够好！当然，每个网站的运行方式都不同，但有一些因素需要考虑，这些因素可能会影响页面（和网站）的速度：
- en: '**Downloading data unnecessarily**: On a responsive site, we may hide elements
    that are not displayed on smaller devices; the use of `display: none` in code
    means that we still download content, even though we''re not showing it on screen,
    resulting in slower sites and higher bandwidth usage.'
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**不必要地下载数据**：在响应式网站上，我们可能会隐藏在较小设备上不显示的元素；在代码中使用`display: none`意味着我们仍然下载内容，即使我们在屏幕上没有显示它，这导致网站加载缓慢和带宽使用更高。'
- en: '**Downloading images before shrinking them**: If we have not optimized our
    site with properly sized images, then we may end up downloading images that are
    larger than necessary on a mobile device. We can of course make them fluid by
    using percentage-based size values, but if the original image is still too large,
    this places extra demand on the server and browser to resize them.'
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**在缩小图像之前下载图像**：如果我们没有使用适当大小的图像优化我们的网站，那么在移动设备上可能会下载比必要更大的图像。当然，我们可以通过使用基于百分比的大小值使它们变得流动，但如果原始图像仍然太大，这会给服务器和浏览器增加额外的需求来调整它们的大小。'
- en: '**A complicated DOM in use on the site**: When creating a responsive site,
    we have to add in a layer of extra code to manage different devices; this makes
    the DOM more complicated and slows our site down. It is, therefore, imperative
    that we don''t add any any unnecessary elements that require additional parsing
    time by the browser.'
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**网站上使用复杂的DOM**: 在创建响应式网站时，我们必须添加一层额外的代码来管理不同的设备；这使得DOM更加复杂，从而减慢了我们的网站速度。因此，我们必须确保不添加任何不必要的元素，这些元素需要浏览器额外的解析时间。'
- en: '**Downloading media or feeds from external sources**: It goes without saying
    that these are not under our control; if our site is dependent on them, then the
    speed of our site will be affected if these external sources fail.'
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**从外部来源下载媒体或源**: 不言而喻，这些不在我们的控制范围内；如果我们的网站依赖于它们，那么如果这些外部来源失败，我们的网站速度将受到影响。'
- en: '**Use of Flash**: Sites that rely heavy on using Flash will clearly be slower
    to access than those that don''t use the technology. It is worth considering if
    our site really needs to use it; recent changes by Adobe mean that Flash as a
    technology is being retired in favor of animation using other means such as HTML5
    Canvas or WebGL.'
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**使用Flash**: 依赖Flash的网站显然比不使用该技术的网站加载速度慢。值得考虑的是，我们的网站是否真的需要使用它；Adobe最近的变化意味着Flash技术正在被淘汰，而更倾向于使用其他方式进行动画，比如HTML5
    Canvas或WebGL。'
- en: 'There is one other point to consider, which we''ve not covered in this list;
    the average size of a page has significantly increased since the dawn of the Internet
    in the mid-nineties. Although these figures may not be 100% accurate, they still
    give a stark impression of how things have changed:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 还有另一个要考虑的问题，我们在这个列表中没有涉及；自从九十年代中期互联网诞生以来，页面的平均大小显著增加。尽管这些数字可能不是100%准确，但它们仍然给人一种明显的印象：事情已经发生了变化。
- en: '**1995**: At that time, the average page size used to be around 14.1 KB. The
    reason for it can be that it contained around two or three embedded objects such
    as images. That meant just two or three calls to the server on which the website
    was hosted.'
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**1995年**：当时，平均页面大小约为14.1 KB。原因可能是它包含了大约两三个嵌入对象，比如图像。这意味着只需两三次对托管网站的服务器的调用。'
- en: '**2008**: The average page size increased to around 498 KB in size, with an
    average use of around 70 objects that includes changes to CSS, images, and JavaScript.
    Although this is tempered with the increased availability of broadband, not everyone
    can afford fast access, so we will lose customers if our site is slow to load.'
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**2008年**：平均页面大小增加到约498 KB，平均使用约70个对象，包括对CSS、图像和JavaScript的更改。尽管宽带的可用性增加了，但并非每个人都能负担得起快速访问，因此如果我们的网站加载速度慢，我们将失去客户。'
- en: All is not lost though—there are some tricks we can use to help optimize the
    performance of our sites. Many of these apply equally to standard sites as well
    as responsive ones—let's take a look in more detail.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 但并非一切都已经失去——我们可以使用一些技巧来帮助优化我们网站的性能。其中许多同样适用于标准网站和响应式网站——让我们更详细地看一下。
- en: Optimizing the performance
  id: totrans-31
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 优化性能
- en: So far, we've explored some of the reasons why our site might be slow, and the
    consequences we face if we do not address performance issues. Although some of
    the issues we could face may not be easy to solve, we can still effect changes
    that help improve performance of our sites.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们已经探讨了我们的网站可能加载缓慢的一些原因，以及如果我们不解决性能问题将面临的后果。尽管我们可能面临的一些问题可能不容易解决，但我们仍然可以做出改变，帮助改善我们网站的性能。
- en: Starting with Google
  id: totrans-33
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 从谷歌开始
- en: Analysis shows that if a page takes longer than 4–5 seconds to load, then customers
    will frequently vote with their feet (that is, walk away). Any delay of more than
    a second can equally lead to a poor user experience.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 分析显示，如果页面加载时间超过4-5秒，那么客户经常会选择放弃（也就是说，离开）。超过一秒的延迟同样会导致用户体验不佳。
- en: A great source that can help us understand where some of our issues are is that
    behemoth, Google. We may knock it for being omnipotent, but it clearly knows some
    useful tricks!
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 一个很好的资源可以帮助我们了解一些问题的来源，那就是谷歌这个庞然大物。我们可能会批评它过于强大，但它显然知道一些有用的技巧！
- en: Google states that our page doesn't have to entirely load within 4–5 seconds,
    but should be usable within this time; any content that is of a lower priority
    can be put below the fold or loaded in the background.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 谷歌表示，我们的页面不必在4-5秒内完全加载，但在此时间内应该可用；任何优先级较低的内容可以放在折叠处或在后台加载。
- en: 'At a basic level, Google recommends that our server response time should be
    less than 200 ms—we should also explore aspects such as client-side rendering
    to help reduce the time taken to load our content:'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 基本上，谷歌建议我们的服务器响应时间应该小于200毫秒——我们还应该探索诸如客户端渲染之类的方面，以帮助减少加载内容所需的时间：
- en: '![Starting with Google](img/image_05_001.jpg)'
  id: totrans-38
  prefs: []
  type: TYPE_IMG
  zh: 从谷歌开始
- en: Although much of this applies to any site, this is particularly important for
    responsive sites, given the extra code required to manage the experience for mobile
    devices.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管大部分内容适用于任何网站，但对于响应式网站来说尤为重要，因为需要额外的代码来管理移动设备的体验。
- en: 'Google also recommends that we should consider performing these tasks:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 谷歌还建议我们考虑执行这些任务：
- en: Minimize the number of redirections and roundtrips required to render content
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 最小化呈现内容所需的重定向和往返次数
- en: Optimize JavaScript execution and image sizes
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 优化JavaScript执行和图像大小
- en: Avoid external blocking of the JavaScript and CSS in above-the-fold content,
    by pushing scripts to the bottom of the page
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 避免阻止上折内容中的JavaScript和CSS，通过将脚本推送到页面底部
- en: Reduce the number of domains called from a page, which helps avoid redirection
    between mobile and desktop clients
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 减少页面调用的域名数量，有助于避免移动和桌面客户端之间的重定向
- en: 'In addition, we can explore the use of other tricks to help with performance.
    These include the following:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，我们可以探索使用其他技巧来提高性能。这些包括以下内容：
- en: '**Use of cache**: We can consider using this as a means to store data temporarily,
    that doesn''t change very often; it will help reduce the number of requests to
    the server (and consequently bandwidth usage), if the content hasn''t changed.
    With the advent of HTML5, we can even use the offline AppCache facility. This
    has the added bonus of making content available offline, if our Internet access
    fails. A similar technique exists with local storage; while this is not available
    offline by default, it can be used to cache more persistent content if needed.'
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**使用缓存**：我们可以考虑使用这种方法来临时存储不经常更改的数据；如果内容没有更改，它将有助于减少对服务器的请求（因此带宽使用），。随着HTML5的出现，我们甚至可以使用离线AppCache功能。这还有一个额外的好处，即在我们的互联网访问失败时，可以使内容离线可用。类似的技术也存在于本地存储；虽然默认情况下无法离线使用，但如果需要，它可以用于缓存更持久的内容。'
- en: '**Use of Scalable Vector Graphics (SVGs)**: Unlike JPEG or PNG images, these
    can resize without loss of quality, so are perfect for responsive designs; their
    size is often smaller than an equivalent standard image. These will not suit every
    application though, as their use is more suited for line drawings or logos.'
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**使用可缩放矢量图形（SVG）**：与JPEG或PNG图像不同，这些图像可以在不损失质量的情况下调整大小，因此非常适合响应式设计；它们的大小通常比等效的标准图像小。但并不是每个应用都适合使用它们，因为它们更适合用于线条绘图或标志。'
- en: '**Apply fragment caching**: If we''re generating dynamic pages that require
    server resources to render but where only a small part changes, then applying
    fragment caching means we can store static versions of the content that doesn''t
    change. When a page is then requested, we send the cached content, and only apply
    the changes needed to update the content. This reduces the number of calls to
    our database backend and therefore the resources required to display our content.'
  id: totrans-48
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**应用片段缓存**：如果我们生成需要服务器资源来呈现的动态页面，但只有一小部分内容发生变化，那么应用片段缓存意味着我们可以存储不发生变化的内容的静态版本。然后在请求页面时，我们发送缓存的内容，只应用需要更新内容的更改。这减少了对我们的数据库后端的调用次数，因此减少了显示内容所需的资源。'
- en: '**Optimize the database**: If our website is one where content is posted from
    different sources, then content will be updated frequently; garbage data will
    equally increase. We should spend time regularly cleaning content in our database
    to ensure it is as small and working as efficiently as possible.'
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**优化数据库**：如果我们的网站是一个内容来自不同来源的网站，那么内容将经常更新；垃圾数据也会同样增加。我们应该定期花时间清理数据库中的内容，以确保它尽可能小而且工作效率高。'
- en: Taking things further
  id: totrans-50
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 进一步进行
- en: 'If we want to explore things further, then there are some more advanced, invasive
    changes we can use to help optimize our site. These involve more work, so should
    be planned as longer term changes:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们想进一步探索，那么有一些更先进的、侵入性更大的改变可以帮助优化我们的网站。这需要更多的工作，因此应该计划为长期改变：
- en: '**Enabling GZip compression**: We can use this to compress resources, which
    will make pages load faster. However, this shouldn''t be applied across a site
    without planning; some elements such as CSS or JavaScript can be compressed or
    minified during development, so applying GZip compression will not result in any
    benefits.'
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**启用GZip压缩**：我们可以使用这个来压缩资源，这将使页面加载更快。但是，这不应该在没有计划的情况下应用于整个网站；一些元素，如CSS或JavaScript，在开发过程中可以进行压缩或缩小，因此应用GZip压缩不会产生任何好处。'
- en: '**Choosing our host**: There are dozens of hosts available; each will offer
    different levels of functionality and performance that can have an impact on the
    operation of our site. It''s important to take time to choose the right host;
    it''s worth comparing different hosts to see how they fare, and get recommendations
    from others as to who has performed well over longer periods of time.'
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**选择我们的主机**：有数十个主机可供选择；每个主机都将提供不同级别的功能和性能，这可能会影响我们网站的运行。选择合适的主机需要花时间；值得比较不同的主机，看看它们的表现如何，并从其他人那里获得推荐，看看谁在较长时间内表现良好。'
- en: Tip
  id: totrans-54
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: Check [http://www.whoishostingthis.com](http://www.whoishostingthis.com) for
    reviews on companies and see how they stack up against others.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 查看[http://www.whoishostingthis.com](http://www.whoishostingthis.com)上的公司评论，看看它们与其他公司相比如何。
- en: '**Excluding content or media that is not required**: This should almost be
    self-explanatory, but we should not load content that isn''t needed! It''s key
    to understand client requirements; if clients insist on making everything available
    from both desktop and mobile devices, then it may be necessary to take them through
    the reasons why this isn''t a good course of action and encourage them to see
    that providing less content on a mobile device won''t necessarily result in a
    poor user experience.'
  id: totrans-56
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**排除不需要的内容或媒体**：这几乎是不言而喻的，但我们不应该加载不需要的内容！理解客户需求是关键；如果客户坚持要在台式机和移动设备上提供所有内容，那么有必要向他们解释为什么这不是一个好的做法，并鼓励他们明白，在移动设备上提供较少的内容并不一定会导致糟糕的用户体验。'
- en: '**Exploring the use of Content Delivery Networks (CDNs)**: This helps render
    content more quickly, as it is fetched from the nearest local server to the client.
    Content is normally uploaded to one central point, but is then replicated to several
    key servers around the world; this reduces the distance travelled and time taken
    to render content on the screen.'
  id: totrans-57
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**探索使用内容交付网络（CDN）**：这有助于更快地呈现内容，因为它是从距离客户端最近的本地服务器获取的。内容通常上传到一个中心点，然后复制到世界各地的几个关键服务器；这减少了内容传输的距离和呈现屏幕上内容所需的时间。'
- en: '**Limiting HTTP requests**: As a part of development, we should consider the
    number of HTTP requests that our site will have to make to the server and aim
    to reduce these as much as possible. This reduction will help toward reducing
    network traffic and improving performance, as we do not have to access the DOM
    as frequently, nor wait as long for content to be downloaded. We can use tools
    such as creating image sprites or pre-processors to merge multiple CSS files into
    one, to help with keeping HTTP requests to a minimum.'
  id: totrans-58
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**限制HTTP请求**：作为开发的一部分，我们应该考虑网站将需要向服务器发出的HTTP请求的数量，并努力尽量减少这些请求。这种减少将有助于减少网络流量并提高性能，因为我们不需要频繁访问DOM，也不需要等待内容下载的时间太长。我们可以使用工具，比如创建图像精灵或预处理器将多个CSS文件合并成一个，来帮助尽量减少HTTP请求。'
- en: It takes time to optimize a site, but the effort spent in refining it will pay
    dividends in increased patronage and ultimately increased sales. The trouble is,
    we won't know how well our site performs unless we test it; let's explore some
    of the tools we can use to help gauge how well our site is operating, in more
    detail.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 优化网站需要时间，但在精炼网站上花费的努力将会带来增加的赞助和最终增加的销售额。问题是，除非我们测试它，否则我们不会知道我们的网站表现如何；让我们更详细地探讨一些可以帮助我们评估网站运行情况的工具。
- en: Testing the performance of our site
  id: totrans-60
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 测试我们网站的性能
- en: We built our responsive pages, improved the look and feel, and also optimized
    the performance of our site. But before the application goes live, it is the duty
    of a developer (or dedicated tester) to test the performance of the website.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 我们构建了响应式页面，改善了外观和感觉，也优化了网站的性能。但在应用上线之前，开发人员（或专门的测试人员）有责任测试网站的性能。
- en: 'There is a set of tools that we can use:'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 有一组工具可以使用：
- en: '**mobiReady** ([http://ready.mobi/](http://ready.mobi/)): This free tool is
    used for testing the performance of a responsive website across different resolutions
    in parallel. It gives each page a score out of five, based on factors such as
    data sent or received and number of requests made.'
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**mobiReady**（[http://ready.mobi/](http://ready.mobi/)）：这个免费工具用于测试响应式网站在不同分辨率下的性能。它根据诸如发送或接收的数据和发出的请求数量等因素，给每个页面打分，最高分为五分。'
- en: '**Webpagetest** ([http://www.webpagetest.org/](http://www.webpagetest.org/)):
    This online tool helps in testing the performance of a website with respect to
    specific location and browser for which we want the result. We can test a page
    for a number of different factors, such as caching static content, effective use
    of CDN, or if keep alive has been enabled.'
  id: totrans-64
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Webpagetest**（[http://www.webpagetest.org/](http://www.webpagetest.org/)）：这个在线工具可以帮助我们测试网站的性能，针对我们想要的特定位置和浏览器。我们可以测试页面的许多不同因素，比如缓存静态内容、有效使用CDN，或者是否启用了持续连接。'
- en: '**Google''s Pagespeed Insights****Tool** ([https://developers.google.com/speed/pagespeed/insights/](https://developers.google.com/speed/pagespeed/insights/)):
    With this tool we can do the speed analysis of our responsive website for both
    desktop and mobile versions of the site. This tool rates the website out of 100
    for the speed and user experience, providing a list of pointers we can fix, along
    with details on how they can be fixed.'
  id: totrans-65
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Google的Pagespeed Insights工具**（[https://developers.google.com/speed/pagespeed/insights/](https://developers.google.com/speed/pagespeed/insights/)）：使用这个工具，我们可以对我们的响应式网站的速度进行分析，包括桌面和移动版本。这个工具根据网站的速度和用户体验给出100分的评分，并提供一个我们可以修复的指针列表，以及如何修复的详细信息。'
- en: '**IntoDns.com** ([http://www.intodns.com/](http://www.intodns.com/)): Although
    this is not a performance testing tool as such, it can help determine if the performance
    of our site is affected, as a result of issues with our DNS. It provides a report
    of the website and mail servers, which we can use to fix issues and ultimately
    help keep performance at peak efficiency.'
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**IntoDns.com**（[http://www.intodns.com/](http://www.intodns.com/)）：虽然这不是一个性能测试工具，但它可以帮助确定我们的DNS是否影响了网站的性能。它提供了网站和邮件服务器的报告，我们可以用来解决问题，最终帮助保持性能达到最高效率。'
- en: '**YSlow** ([http://yslow.org/](http://yslow.org/)): This bookmarklet grades
    any chosen website into either one of three predefined rulesets or a custom one
    we define. It offers suggestions for where we can improve the page''s performance,
    based on an array of different values, such as DNS lookups, making AJAX cacheable,
    avoiding CSS expressions, and configuring eTags.'
  id: totrans-67
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: YSlow（[http://yslow.org/](http://yslow.org/)）：这个书签工具可以根据三个预定义的规则集或我们定义的自定义规则集对任何选择的网站进行评分。它根据不同数值的数组提供建议，比如DNS查找、使AJAX可缓存、避免CSS表达式和配置eTags等，来帮助我们改善页面的性能。
- en: These are some useful tools, which can help with performance and optimization
    of our site (with plenty more available online). However, we are missing out on
    an opportunity, if we focus purely on these tools. What about using what is already
    available in our browser?
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 这些是一些有用的工具，可以帮助我们提高网站的性能和优化（还有很多在线工具可用）。然而，如果我们只专注于这些工具，我们就会错失一个机会。那么，我们可以利用浏览器中已有的功能呢？
- en: 'Most (if not all) browsers have some form of DOM inspector built in to the
    browser or available as a standalone option. These can provide some good information
    that we can use as a precursor to more in-depth details from external services.
    To see what is possible, let''s explore what we can get if we run a simple check
    on a website in a DOM inspector; for this example, we will use that doyenne of
    online retail, Amazon; it has sites available all over the world. We will perform
    the same test twice: the first one will be as a desktop browser and the second
    as an (emulated) mobile version, using Chrome''s built-in DOM inspector.'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数（如果不是全部）浏览器都内置了某种形式的DOM检查器，或者可以作为独立选项使用。这些工具可以提供一些有用的信息，可以作为对外部服务更深入详细信息的前提。为了看看可能性，让我们探索一下，如果我们在DOM检查器中对一个网站进行简单检查，我们可以得到什么；在这个例子中，我们将使用在线零售的权威亚马逊进行相同的测试两次：第一次将作为桌面浏览器，第二次将作为（模拟的）移动版本，使用Chrome内置的DOM检查器。
- en: Working through a desktop example
  id: totrans-70
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 通过桌面示例进行工作
- en: 'For our test, we''ll start with a desktop browser—we''ll use Google''s Chrome
    as it has a good set of tools; other browsers can also be used, but you may not
    get quite the same results. Let''s make a start, using Amazon as the basis for
    our test:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 对于我们的测试，我们将从桌面浏览器开始——我们将使用谷歌的Chrome，因为它有一套很好的工具；其他浏览器也可以使用，但可能得不到完全相同的结果。让我们开始吧，以亚马逊作为我们测试的基础：
- en: '![Working through a desktop example](img/image_05_002.jpg)'
  id: totrans-72
  prefs: []
  type: TYPE_IMG
  zh: '![通过桌面示例工作](img/image_05_002.jpg)'
- en: 'Here''s what we need to do:'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要做的是：
- en: Fire up Chrome, then press ***Shift*** + ***Ctrl*** + ***I*** to display the
    Developer toolbar.
  id: totrans-74
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启动Chrome，然后按下***Shift*** + ***Ctrl*** + ***I***显示开发者工具栏。
- en: Look for the red record button toward the top left of the window, then click
    on it.
  id: totrans-75
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 寻找窗口左上角的红色录制按钮，然后点击它。
- en: Revert back to Chrome's window, then browse to [http://www.amazon.com](http://www.amazon.com).
    As soon as the page has finished loading, click on the red record button to stop
    recording.
  id: totrans-76
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 回到Chrome的窗口，然后浏览到[http://www.amazon.com](http://www.amazon.com)。页面加载完成后，点击红色的录制按钮停止录制。
- en: 'At this point, we will have a set of results we can browse through, similar
    to this extract:'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 此时，我们将得到一组结果，可以浏览类似于这个摘录：
- en: '![Working through a desktop example](img/image_05_003.jpg)'
  id: totrans-78
  prefs: []
  type: TYPE_IMG
  zh: '![通过桌面示例工作](img/image_05_003.jpg)'
- en: At first, these results may not make sense, but the details we want are at the
    foot of the window.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 起初，这些结果可能看起来毫无意义，但我们想要的细节在窗口底部。
- en: '![Working through a desktop example](img/image_05_004.jpg)'
  id: totrans-80
  prefs: []
  type: TYPE_IMG
  zh: '![通过桌面示例工作](img/image_05_004.jpg)'
- en: This shows the number of server requests made, the amount of content transferred,
    and the times taken to initially parse the DOM (`DOMContentLoaded`); then, fully
    download the content (indicated by **Finish** and the **Load** event being fired).
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 这显示了发出的服务器请求数量，传输的内容量以及初始解析DOM（`DOMContentLoaded`）所花费的时间；然后，完全下载内容（由**Finish**和**Load**事件的触发来指示）。
- en: Note
  id: totrans-82
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Note that the `DOMContentLoaded` time relates to parsing the document only,
    and does not allow for whether other resources such as scripts, images, or external
    style sheets have been downloaded.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，`DOMContentLoaded`时间仅与解析文档有关，并不考虑其他资源（如脚本、图像或外部样式表）是否已下载。
- en: Even though Amazon's site downloads a reasonable amount of content, they've
    made good use of some of the tricks we've covered, to help reduce bandwidth usage
    and increase page rendering speed. How can we tell? Try clicking on the bottom
    two links shown in the screenshot (or links 4 and 5 in the asset list shown within
    the browser).
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管亚马逊的网站下载了相当数量的内容，但他们巧妙地利用了我们所介绍的一些技巧，帮助减少带宽使用并提高页面渲染速度。我们如何知道呢？尝试点击屏幕截图中显示的最后两个链接（或者浏览器中显示的资产列表中的链接4和5）。
- en: The first link shows a minified CSS style sheet; if we look at it in more detail,
    it is possible to surmise that some of the links within were generated using an
    automated process. The PNG filename in one example is over 70+ characters long!
    The use of long names will increase the file size of the file concerned; images
    need to be accurately named, but with sensible filename lengths!
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 第一个链接显示了一个压缩的CSS样式表；如果我们仔细观察，可以推断出其中一些链接是使用自动化过程生成的。一个示例中的PNG文件名超过70个字符！使用长名称会增加文件大小；图像需要准确命名，但文件名长度要合理！
- en: Considering the size of the page and the number of requests, it is possible
    to think that this website faces performance issues. However, if we look more
    carefully, we can see a lot of content is being loaded in the background. This
    means we're still providing a good user experience, with prioritized content being
    loaded first, and content of lesser priority being loaded in the background.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑到页面的大小和请求的数量，可能会认为这个网站面临性能问题。然而，如果我们仔细观察，就会发现很多内容是在后台加载的。这意味着我们仍然提供了良好的用户体验，优先加载了内容，次要内容在后台加载。
- en: Note
  id: totrans-87
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: To learn more about what all of the settings mean within the Network tab of
    Chrome's developer toolbar, take a look at the main documentation on the Google
    Developer's site, at [http://bit.ly/2ay9H8g](http://bit.ly/2ay9H8g).
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 要了解Chrome开发者工具中网络选项卡中所有设置的含义，可以查看谷歌开发者网站上的主要文档，网址为[http://bit.ly/2ay9H8g](http://bit.ly/2ay9H8g)。
- en: Let's change track now, and focus on viewing the same site on a mobile device—this
    time the iPhone 6 Plus.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们改变方向，关注在移动设备上查看相同的网站——这次是iPhone 6 Plus。
- en: Viewing on a mobile device
  id: totrans-90
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 在移动设备上查看
- en: 'We perform the same test again, but this time set Chrome to emulate an iPhone
    6 Plus, then we should see this:'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 我们再次进行相同的测试，但这次将Chrome设置为模拟iPhone 6 Plus，然后我们应该看到这样的结果：
- en: '![Viewing on a mobile device](img/image_05_005.jpg)'
  id: totrans-92
  prefs: []
  type: TYPE_IMG
  zh: '![在移动设备上查看](img/image_05_005.jpg)'
- en: 'The real test though is in the number of requests made, amount of data transferred,
    and the time taken to load the page. This time around, our browser made 103 requests,
    with 1.8 MB transferred from the server and completed the total download in approximately
    12 seconds:'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 真正的测试在于请求的数量，数据传输量和页面加载所花费的时间。这一次，我们的浏览器发出了103个请求，从服务器传输了1.8 MB的数据，并在大约12秒内完成了总下载：
- en: '![Viewing on a mobile device](img/image_05_006.jpg)'
  id: totrans-94
  prefs: []
  type: TYPE_IMG
  zh: '![在移动设备上查看](img/image_05_006.jpg)'
- en: Here, we can clearly see that to provide best user experience to its customers,
    Amazon has cleverly reduced the page size and the number of requests.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们可以清楚地看到，为了为客户提供最佳的用户体验，亚马逊巧妙地减少了页面大小和请求的数量。
- en: We should constantly monitor our sites for performance; with CSS3 attributes
    being added or updated frequently, we can begin to update our site and start to
    remove dependencies on external libraries, which allows us to increase the speed
    of our site and ultimately provide a better user experience.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 我们应该不断监控我们的网站性能；随着CSS3属性的频繁添加或更新，我们可以开始更新我们的网站，并开始减少对外部库的依赖，从而提高网站的速度，最终提供更好的用户体验。
- en: Best practices
  id: totrans-97
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 最佳实践
- en: 'In this section, you will learn some of the best practices and paradigms that
    will help us in achieving the actual goals of web development:'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一部分，您将学习一些最佳实践和范例，这将帮助我们实现网页开发的实际目标：
- en: '**Brick-first design paradigm**: When constructing responsive sites, it is
    better practice to base our design about mobile devices as our baseline, before
    adding the extra functionality to manage desktop use. Our mindset should be to
    incorporate the bare minimum required to satisfy users on mobile devices.'
  id: totrans-99
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**砖头优先设计范式**：在构建响应式网站时，最好的做法是以移动设备为基准，然后再添加额外功能以适应桌面使用。我们的思维应该是尽量满足移动设备用户的最低要求。'
- en: Today, we know that a major portion of sales of mobile devices annually has
    been overtaken by smartphones. Although a large percentage of users do not buy
    mobile devices frequently, they still have devices which are capable of supporting
    web applications and even native applications. Adding to these numbers we still
    have those people who use some old generation smartphones too. We can even add
    other devices like Kindles and semi web-capable devices; if we add these numbers
    we might reach a staggering sum!
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 今天，我们知道每年移动设备销售的主要部分已被智能手机超越。尽管有很大比例的用户不经常购买移动设备，他们仍然拥有能够支持Web应用甚至本地应用的设备。除此之外，我们仍然有那些使用一些旧一代智能手机的人。我们甚至可以加入其他设备，如Kindle和半网页能力设备；如果我们加上这些数字，我们可能会达到一个惊人的总数！
- en: 'Now for this huge audience, let''s consider some cases:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 现在针对这个庞大的受众，让我们考虑一些情况：
- en: They are not going to carry out research
  id: totrans-102
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 他们不会进行研究
- en: They are not going to read long articles
  id: totrans-103
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 他们不会阅读长篇文章
- en: The chances are that those users with older cell phones might have to navigate
    the page using a standard key pad similar to a normal landline phone, rather than
    benefit from using a standard keyboard.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 那些使用较旧手机的用户可能需要使用类似普通座机电话的标准键盘来浏览页面，而不是使用标准键盘。
- en: The small size of screens on older devices makes it harder to provide a mobile-first
    layout; it makes it ever more important that we only display the bare essentials
    for these users, and that other elements are removed from display or download.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 较旧设备屏幕的小尺寸使得提供移动优先布局更加困难；这使得我们只显示这些用户所需的基本内容变得更加重要，其他元素应该从显示或下载中移除。
- en: Providing support for older browsers
  id: totrans-106
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 为旧浏览器提供支持
- en: Another best practice to follow to improve the performance of our website for
    those old devices, which have limited functionalities and are not as fast as today's
    mobile devices.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个最佳实践是为那些功能有限且不如今天的移动设备快速的旧设备改善我们网站的性能。
- en: We know that since we have the Internet, we have web browsers to display the
    content. We should not forget that there are users who still use older mobile
    devices and which lack the features of modern equivalents; we can handle this
    using graceful degradation.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 我们知道自从有了互联网，我们就有了用来显示内容的网络浏览器。我们不应忘记仍然有用户使用缺乏现代功能的旧移动设备；我们可以使用优雅降级来处理这个问题。
- en: Graceful degradation is a strategy, which is used to handle the design of web
    pages for different browsers. If we built a website using the graceful degradation
    strategy, then it is intended to be viewed first by the modern browsers and then
    in the old browsers, which have less features. It should degrade in such a way
    that our website still looks good with respect to look and feel and is still functional
    but with less features.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 优雅降级是一种策略，用于处理不同浏览器的网页设计。如果我们使用优雅降级策略构建网站，那么它首先是为现代浏览器设计的，然后是为具有较少功能的旧浏览器设计。它应该以这样一种方式退化，使得我们的网站在外观和功能上仍然良好，但功能较少。
- en: Note
  id: totrans-110
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Note that graceful degradation does not mean that we are telling our users to
    download the most recent browser to view our website.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，优雅降级并不意味着我们告诉用户下载最新的浏览器来查看我们的网站。
- en: But today's modern designers and developers do not like this approach. The main
    reason is that it often turns into a demand where our users should download the
    most recent and updated browser in order to view the best view of our website.
    We should remember that this is not graceful degradation.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 但是今天的现代设计师和开发人员不喜欢这种方法。主要原因是这经常变成了一个要求，即我们的用户应该下载最新和更新的浏览器才能查看我们网站的最佳视图。我们应该记住这不是优雅降级。
- en: 'If we are asking our users to download a modern browser, then that means we
    are using a browser-centric approach. Some points we should remember to follow
    for graceful degradation, which can equally apply to progressive enhancement:'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们要求用户下载现代浏览器，那意味着我们正在使用以浏览器为中心的方法。一些我们应该记住的关于优雅降级的点，同样也适用于渐进增强：
- en: We should write HTML, which is valid and standard compliant
  id: totrans-114
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们应该编写符合标准的有效HTML。
- en: We should use external style sheets
  id: totrans-115
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们应该使用外部样式表
- en: We should always link our scripts externally
  id: totrans-116
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们应该始终将我们的脚本链接到外部。
- en: We should always make sure that our content is accessible for old browsers without
    CSS or JavaScript
  id: totrans-117
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们应该确保我们的内容对没有CSS或JavaScript的旧浏览器是可访问的。
- en: Considering which features to support
  id: totrans-118
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 考虑支持哪些功能
- en: When developing responsive sites, we should check to see if our target browser
    or device can support a specific feature, rather than simply assuming it can be
    used.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 在开发响应式网站时，我们应该检查我们的目标浏览器或设备是否支持特定功能，而不是简单地假设它可以使用。
- en: For example, if we were to install the latest Chrome browser on an old Android
    phone, we might be tempted to assume that it will support the latest features,
    such as CSS animations, background parallax effects, and WebGL.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，如果我们在旧的Android手机上安装最新的Chrome浏览器，我们可能会认为它会支持最新的功能，比如CSS动画、背景视差效果和WebGL。
- en: But, is this really the case? What would happen if we were to try to operate
    a site that relied on a feature that is not supported on an older Android device?
    The end result might be that our browser becomes unresponsive or crash; we would
    be forced to have to reboot it to restore service.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 但是，这真的是这样吗？如果我们试图在一个不支持旧安卓设备的功能的网站上操作会发生什么？最终结果可能是我们的浏览器变得无响应或崩溃；我们将被迫重新启动它以恢复服务。
- en: This issue was faced by Android users recently in a big way and in this the
    most noticeable application to suffer was Google Talk/Hangout. With their upgrade,
    the most lightweight chat service of Google was turned to an almost unusable application
    due to performance issues on the older devices.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 最近，安卓用户在这方面遇到了很大的问题，其中最明显受到影响的应用是Google Talk/Hangout。随着它们的升级，Google最轻量级的聊天服务因旧设备的性能问题而变得几乎无法使用。
- en: This way it is really important to filter out those features, which are less
    usable and have less relevance on small screens. A great example is the applications
    that make use of proximity sensors. This helped push manufacturers to make this
    a standard feature across all newer smartphones.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 这样过滤掉那些在小屏幕上不太可用且不太相关的功能非常重要。一个很好的例子是使用接近传感器的应用程序。这有助于推动制造商将这成为所有新智能手机的标准功能。
- en: Let the user choose what they want
  id: totrans-124
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 让用户选择他们想要的
- en: We developed an eye-catching, responsive, animated, and touch-oriented website
    but for a user who has poor Internet connection or an old device?
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 我们开发了一个引人注目、响应式、动画化和触摸导向的网站，但对于网络连接差或旧设备的用户呢？
- en: What should we do if the site appears to be hanging during the initial load
    or on subsequent page refreshes?
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 如果网站在初始加载或后续页面刷新时出现卡顿，我们应该怎么办？
- en: The reader will of course be confused as to what they should do.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 读者当然会困惑于他们应该怎么做。
- en: 'Here is a simple thing we should do. Ever run Gmail on an old device or slow
    Internet connection? If yes, then you must have noticed **Load basic HTML (for
    slow connections)**, or even this gem, where slower connections mean we may be
    forced to use Gmail''s simple view, because a slow Internet connection makes using
    the standard view impossible:'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 这是我们应该做的一件简单的事情。曾经在旧设备或慢的网络连接上运行Gmail吗？如果是的话，那么你一定注意到了**加载基本HTML（用于慢速连接）**，甚至是这个宝石，慢速连接意味着我们可能被迫使用Gmail的简单视图，因为慢的网络连接使得使用标准视图变得不可能：
- en: '![Let the user choose what they want](img/image_05_007.jpg)'
  id: totrans-129
  prefs: []
  type: TYPE_IMG
  zh: '![让用户选择他们想要的](img/image_05_007.jpg)'
- en: For the elite few who are used to high-speed cable or broadband connections,
    they may find it hard to believe that other users do not have that luxury, and
    are forced to use the basic view, as would be the case in our example. Using this
    option loads the basic GUI version of Gmail, which is optimized for slower connections,
    and allows the user to interact with the site.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 对于那些习惯于高速电缆或宽带连接的精英，他们可能很难相信其他用户没有这种奢侈，被迫使用基本视图，就像我们的例子一样。使用这个选项会加载Gmail的基本GUI版本，它针对较慢的连接进行了优化，并允许用户与网站进行交互。
- en: This illustrates a great point—if a site must use the latest features, then
    we should consider implementing a basic or standard mode in our application. We
    progressed from the days of a select few sites that have all of the latest features
    and which get all of the traffic, providing a user with what they are looking
    for on the website is what they care about.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 这说明了一个很重要的观点——如果一个网站必须使用最新的功能，那么我们应该考虑在我们的应用程序中实现基本或标准模式。我们已经从只有少数网站拥有所有最新功能并获得所有流量的日子中进步了，为用户提供他们在网站上寻找的内容才是他们关心的。
- en: Do we need to include a whole library?
  id: totrans-132
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 我们需要包含整个库吗？
- en: We should always follow the standard of either *use it* or *keep it*. It is
    difficult to keep track of all the libraries and modules which are in use; we
    have to strike a fine balance between the libraries we use and maintaining site
    speed.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 我们应该始终遵循*使用*或*保留*的标准。跟踪所有正在使用的库和模块是困难的；我们必须在使用的库和维护网站速度之间取得微妙的平衡。
- en: Many frameworks and libraries now have the option to customize the functionality
    provided within; for example, we may only require key elements of jQuery (if we
    were using it); we can select to exclude redundant functionality when downloading
    the library. However, if we are still at a development phase, then we will require
    the whole library; we can choose the parts needed to run our application, before
    minifying it for production use.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 现在许多框架和库都有自定义功能的选项；例如，我们可能只需要jQuery的一些关键元素（如果我们在使用它），我们可以选择在下载库时排除多余的功能。然而，如果我们仍处于开发阶段，那么我们将需要整个库；我们可以选择运行我们的应用程序所需的部分，然后将其缩小以供生产使用。
- en: Considering cross-browser compatibility
  id: totrans-135
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 考虑跨浏览器兼容性
- en: A question that must always be at the back of the minds of any developer is
    how to retain maximum browser compatibility when constructing sites; it does not
    matter if the UI is stunning, if it doesn't work on enough browsers!
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 任何开发者心中必须时刻牢记的一个问题是如何在构建网站时保持最大的浏览器兼容性；如果在足够多的浏览器上无法运行，那么UI再惊艳也没有用！
- en: Any site that does not support its target browser market (that is, those browsers
    most used by the site's audience), risks losing business and reputation. This
    makes it even more important that we not only test our site, but test it across
    multiple browsers if we're making it responsive. This testing is a key step to
    retaining customer satisfaction and market share. There are a number of techniques
    we can use to help reduce issues related to cross-browser compatibility, before
    we consider some of the solutions available, let's look at some of the challenges
    we face in more detail.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 任何不支持目标浏览器市场的网站（即，网站受众最多使用的浏览器）都面临失去业务和声誉的风险。这使得我们不仅需要测试我们的网站，而且如果我们正在制作响应式网站，还需要在多个浏览器上进行测试。这种测试是保持客户满意度和市场份额的关键步骤。在我们考虑一些可用的解决方案之前，有许多技术可以帮助减少与跨浏览器兼容性相关的问题，让我们更详细地看看我们面临的一些挑战。
- en: Outlining the challenges
  id: totrans-138
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 概述挑战
- en: The utopia for any designer is to have a 100% bug-free site; the reality though
    is that while this will always be at the back of the developer's mind, it is impossible
    to achieve!
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 任何设计师的乌托邦是拥有一个100%无bug的网站；然而现实是，虽然这总是开发者心中的期望，但却是不可能实现的！
- en: Why? One key consideration is the use of CSS3 (and those elements of CSS4 that
    now exist); although support is constantly improving, there is still a way to
    go before every browser offers consistent support for all CSS3 attributes. In
    the same vein, support for responsive media and media queries are not supported
    by older browsers, so we must consider how much support we can afford to offer
    for these browsers.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 为什么？一个关键考虑因素是CSS3的使用（以及现在存在的CSS4的元素）；尽管支持不断改进，但在每个浏览器提供对所有CSS3属性的一致支持之前还有一段路要走。同样地，对于响应式媒体和媒体查询的支持在旧版浏览器中也不被支持，因此我们必须考虑我们能够为这些浏览器提供多少支持。
- en: Considering possible solutions, we've touched on three elements which are key
    considerations for responsive sites, to work around them, there are a number of
    options open to us.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑可能的解决方案，我们已经提到了对响应式网站至关重要的三个因素，为了解决它们，我们有许多选择。
- en: We can (and should) consider constructing our site using the base content that
    will work on any browser; we can then progressively enhance the experience, by
    adding extra features that may only work for some browsers, but are not key to
    the overall user experience. In comparison, we could take the view that we build
    our site around the latest technologies and browsers, but then add in support
    to allow content to degrade gracefully, when used on older browsers.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以（也应该）考虑使用基本内容构建我们的网站，这样可以在任何浏览器上运行；然后通过添加一些可能只对某些浏览器有效但并不是整体用户体验关键的额外功能，逐步增强体验。相比之下，我们也可以认为我们的网站是基于最新技术和浏览器构建的，但随后添加支持，以允许内容在旧版浏览器上优雅降级。
- en: 'Can we work around these issues? Absolutely, there are a number of different
    options on offer. There is one point we should consider though, using a JavaScript
    solution isn''t necessarily the best solution; there are a number of tips and
    tricks we can use to help retain compatibility. Before we touch on these, let''s
    take a moment to consider some of the options available when using JavaScript
    as a solution:'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 我们能够解决这些问题吗？当然可以，有许多不同的选择。然而，有一点我们应该考虑，使用JavaScript解决方案并不一定是最佳解决方案；我们可以使用一些技巧来帮助保持兼容性。在我们讨论这些之前，让我们花一点时间考虑一下在使用JavaScript作为解决方案时可用的一些选项：
- en: '**Adapt.js**: This script doesn''t use media queries; instead, it works out
    which CSS file to load, based on values such as the browser''s window size. This
    script can be downloaded from [http://adapt.960.gs/](http://adapt.960.gs/).'
  id: totrans-144
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Adapt.js**：这个脚本不使用媒体查询；相反，它根据浏览器窗口大小等值来确定加载哪个CSS文件。该脚本可以从[http://adapt.960.gs/](http://adapt.960.gs/)下载。'
- en: '**Modernizr.js**: This library allows us to pick and choose elements we want
    to support, such as HTML5 `<video>` elements; when chosen elements are detected
    as being in use, Modernizr provides us with an option to gracefully degrade content,
    and not let our site simply fall into a heap! The library is available from [https://modernizr.com/download](https://modernizr.com/download).'
  id: totrans-145
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Modernizr.js**：这个库允许我们选择要支持的元素，比如HTML5的`<video>`元素；当检测到选择的元素正在使用时，Modernizr为我们提供了一个优雅降级内容的选项，不让我们的网站简单地垮掉！该库可以从[https://modernizr.com/download](https://modernizr.com/download)下载。'
- en: '**Respond.js**: This solution uses JavaScript to provide breakpoint support
    for older browsers (such as IE6-8), based on the sizes we specify when configuring
    our pages. We can use it in a similar way to standard CSS-based breakpoints, such
    as setting device-width to 414px, to cater for an iPhone 6 Plus in portrait mode.
    More details and downloads of the library are available from [http://responsejs.com/](http://responsejs.com/).'
  id: totrans-146
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Respond.js**：这个解决方案使用JavaScript为旧版浏览器（如IE6-8）提供断点支持，基于我们在配置页面时指定的大小。我们可以以类似的方式使用它，如将设备宽度设置为414px，以适应iPhone
    6 Plus的纵向模式。有关该库的更多详细信息和下载，请访问[http://responsejs.com/](http://responsejs.com/)。'
- en: Although these solutions will work perfectly well, they all suffer from one
    inherent drawback—JavaScript! In this modern age, most browsers are likely to
    have this switched on by default, but there will be instances where this is not
    the case; let's explore why using JavaScript isn't always the right solution.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管这些解决方案都能很好地工作，但它们都有一个固有的缺点——JavaScript！在这个现代时代，大多数浏览器可能默认已经打开了JavaScript，但也会有一些情况下没有打开；让我们探讨一下为什么使用JavaScript并不总是正确的解决方案。
- en: Understanding the drawbacks of JavaScript
  id: totrans-148
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 理解JavaScript的缺点
- en: During the construction phase of any responsive site, we will naturally need
    to work out which breakpoints we want to support. This will be based on statistics
    such as Google Analytics. The normal route would then be to use media queries
    in our CSS style sheet to load elements when needed. This works fine for recent
    browsers (anything within the last year to eighteen months), but with older browsers
    this will prove an issue.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 在任何响应式网站的构建阶段，我们自然需要确定要支持哪些断点。这将基于诸如Google Analytics之类的统计数据。然后通常的做法是在我们的CSS样式表中使用媒体查询来在需要时加载元素。这对于最近的浏览器（过去一年到十八个月内的任何浏览器）效果很好，但对于旧版浏览器来说，这将是一个问题。
- en: 'We can support them using JavaScript-based solutions:'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以使用基于JavaScript的解决方案来支持它们：
- en: All of the solutions we've touched on need JavaScript – if it's switched off,
    then they clearly won't work!
  id: totrans-151
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们提到的所有解决方案都需要JavaScript——如果它被关闭，那么它们显然就不会起作用！
- en: Some of the solutions use AJAX to fetch content (such as Adapt.js). This can
    show a brief flash when getting the content. The developers have tried to reduce
    this to the absolute minimum, but no matter how much they try, it will be impossible
    to get rid of it; it will look odd when used on a site.
  id: totrans-152
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一些解决方案使用AJAX来获取内容（如Adapt.js）。这可能会在获取内容时出现短暂的闪烁。开发人员已经尽量将其减少到最低，但无论他们如何努力，都不可能完全消除它；在网站上使用时会显得奇怪。
- en: Some of the solutions won't work on older devices, Adapt.js being a good example.
  id: totrans-153
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一些解决方案在旧设备上不起作用，Adapt.js就是一个很好的例子。
- en: We can use a default style sheet if JavaScript is switched off, using `<no script>`
    tags; the question is, what screen size do we support?
  id: totrans-154
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果JavaScript被关闭，我们可以使用默认样式表，使用`<no script>`标签；问题是，我们支持什么屏幕尺寸？
- en: Using JavaScript will require the server to load additional resources, which
    places additional demand on the server; JavaScript was always designed to provide
    additional functionality, and shouldn't be used when that functionality is key
    to the successful operation of a site.
  id: totrans-155
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用JavaScript将需要服务器加载额外的资源，这会给服务器增加额外的负担；JavaScript始终旨在提供额外的功能，并且在该功能对站点的成功运行至关重要时不应使用。
- en: 'Clearly these drawbacks make for a less attractive option when using JavaScript!
    Two key questions we should ask though are: do we really need to support older
    browsers, such as IE8, and use JavaScript to support them?'
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 显然，这些缺点使得在使用JavaScript时成为一个不太吸引人的选择！然而，我们应该问的两个关键问题是：我们真的需要支持旧的浏览器，比如IE8，并使用JavaScript来支持它们吗？
- en: Providing a CSS-based solution
  id: totrans-157
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 提供基于CSS的解决方案
- en: The question of which browsers to support is one that will divide both developers
    and designers; on one hand, we will have creatives that want to take advantage
    of the latest functionality, while others will state that we must support as wide
    a browser population as possible.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 支持哪些浏览器是一个会分裂开发人员和设计师的问题；一方面，我们有创意人员希望利用最新的功能，而另一方面，其他人会说我们必须尽可能支持广泛的浏览器群体。
- en: 'The latter might normally require the use of JavaScript for older browsers;
    given that this requires extra resources that we must call from the server, it
    makes sense to use CSS where possible. To this end, we can consider using the
    relatively new `@supports` feature, (or feature queries, to give it its technical
    name). This works in a similar way to media queries and allows us to style elements
    based on whether the chosen style is supported in the browser. This has gained
    great support in most recent browsers (except of course IE, which always likes
    to be different!):'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 后者通常需要在旧浏览器中使用JavaScript；考虑到这需要从服务器调用额外的资源，因此尽可能使用CSS是有道理的。为此，我们可以考虑使用相对较新的`@supports`功能（或称为功能查询）。这与媒体查询类似，允许我们根据浏览器中是否支持所选样式来设置元素的样式。这在最近的大多数浏览器中得到了很好的支持（当然IE除外，它总是喜欢与众不同！）：
- en: '![Providing a CSS-based solution](img/image_05_008.jpg)'
  id: totrans-160
  prefs: []
  type: TYPE_IMG
  zh: '![提供基于CSS的解决方案](img/image_05_008.jpg)'
- en: 'We can then create code such as this in the main markup:'
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 然后我们可以在主要标记中创建这样的代码：
- en: '[PRE0]'
  id: totrans-162
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'And style it using code such as this, when it is supported:'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 当它受支持时，使用这样的代码来设置样式：
- en: '[PRE1]'
  id: totrans-164
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'However if it isn''t supported, then we simply add a feature query to allow
    it to gracefully degrade:'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，如果它不受支持，我们只需添加一个功能查询来使其优雅地降级：
- en: '[PRE2]'
  id: totrans-166
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: The beauty of this is that we're not reliant on any external libraries to help
    support what might be core functionality; we can use this to support new CSS3
    styles and existing properties. Granted, it means that our style code base will
    increase, but this is tempered as the increase is in an existing file that is
    already cached, than having to call an additional new resource from the server!
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 美妙之处在于，我们不依赖任何外部库来支持可能是核心功能的东西；我们可以使用这个来支持新的CSS3样式和现有属性。当然，这意味着我们的样式代码库会增加，但这是有限度的，因为增加的是已经被缓存的现有文件，而不是从服务器调用额外的新资源！
- en: Testing site compatibility
  id: totrans-168
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 测试网站的兼容性
- en: At this stage, our site would be optimized and tested for performance, but what
    about compatibility?
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个阶段，我们的网站将被优化和测试性能，但兼容性呢？
- en: Although a wide range of available browsers have remained relatively static
    (at least for the ones in mainstream use), the functionality they offer is constantly
    changing; this makes it difficult for developers and designers to handle all of
    the nuances required to support each browser.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管可用浏览器的范围保持相对静态（至少对于主流使用的浏览器），但它们提供的功能不断变化；这使得开发人员和设计师难以处理支持每个浏览器所需的所有细微差别。
- en: In addition, the wide range makes it costly to support. In an ideal world, we
    would support every device available, but this is impossible; instead, we must
    use analytical software to determine which devices are being used for our site
    and therefore worthy of support.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，广泛的范围使得支持成本高昂。在理想的世界中，我们会支持每个可用的设备，但这是不可能的；相反，我们必须使用分析软件来确定哪些设备正在使用我们的网站，因此值得支持。
- en: Working out a solution
  id: totrans-172
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 找出解决方案
- en: If we test our site on a device such as an iPhone 6, there is a good chance
    it will work as well on other Apple devices, such as iPads. The same can be said
    for testing on a mobile device such as a Samsung Galaxy S4; we can use this principle
    to help prioritize support for particular mobile devices, if they require more
    tweaks to be made than in comparison to other devices.
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们在iPhone 6等设备上测试我们的网站，很有可能它也会在其他苹果设备上运行良好，比如iPad。对于在三星Galaxy S4等移动设备上进行测试也是如此；如果它们需要进行比其他设备更多的调整，我们可以使用这个原则来帮助优先支持特定的移动设备。
- en: Ultimately though, we must use analytical software to determine who visits our
    site; the information such as browser, source, OS, and device used will help determine
    what our target audience should be. This does not mean we completely neglect other
    devices; we should try to ensure they work with our site too, but this will not
    be a priority during development.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 但最终，我们必须使用分析软件来确定谁访问我们的网站；诸如浏览器、来源、操作系统和使用的设备等信息将有助于确定我们的目标受众应该是什么。这并不意味着我们完全忽视其他设备；我们应该尽量确保它们也能与我们的网站配合，但这在开发过程中不是优先考虑的事项。
- en: 'A key point to note is that we should not attempt to support every device;
    this is too costly to manage, and we would never keep up with all of the devices
    available for sale! Instead, we can use our analytics software to determine which
    devices are being used by our visitors; we can then test a number of different
    properties:'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 需要注意的关键一点是，我们不应该尝试支持每一种设备；这样管理成本太高，而且我们永远也无法跟上所有可供出售的设备！相反，我们可以使用我们的分析软件来确定我们的访问者使用的设备；然后我们可以测试一些不同的属性：
- en: '**Screen size**: This should encompass a variety of different resolutions for
    desktop and mobile devices.'
  id: totrans-176
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**屏幕尺寸**：这应该包括各种不同的桌面和移动设备的分辨率。'
- en: '**Connection speed**: Testing across different connection speeds will help
    us understand how the site behaves and identify opportunities or weaknesses where
    we may need to effect changes.'
  id: totrans-177
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**连接速度**：在不同的连接速度下进行测试将帮助我们了解网站的行为，并确定我们可能需要进行更改的机会或弱点。'
- en: '**Pixel density**: Some devices will support higher pixel density, which allows
    them to display higher resolution images or content. When designing sites (and
    particularly responsive ones), we clearly want to position our content in the
    right place on screen. The clarity afforded by high-resolution displays makes
    it easier to fine-tune how this content is displayed on screen; this will make
    it easier to view and fix any issues with displaying web content.'
  id: totrans-178
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**像素密度**：一些设备将支持更高的像素密度，这使它们能够显示更高分辨率的图像或内容。在设计网站时（尤其是响应式网站），我们显然希望将我们的内容放在屏幕上的正确位置。高分辨率显示器提供的清晰度使得我们更容易微调如何在屏幕上显示这些内容；这将使查看和修复显示网页内容的任何问题变得更容易。'
- en: '**Interaction style**: The ability to view the Internet across different devices
    means that we should consider how our visitors interact with the site: is it purely
    on a desktop, or do they use tablets, smartphones, or gaming-based devices? It''s
    most likely that the former two will be used to an extent, but the latter is not
    likely to feature as highly.'
  id: totrans-179
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**交互风格**：能够在不同设备上查看互联网意味着我们应该考虑我们的访问者如何与网站进行交互：他们纯粹在桌面上使用，还是使用平板电脑、智能手机或游戏设备？最有可能的是前两者会在一定程度上被使用，但后者不太可能被广泛使用。'
- en: Once we've determined which devices we should be supporting, then there are
    a range of tools available for us to use, to test browser compatibility. These
    include physical devices (ideal, but expensive to maintain), emulators, or online
    services (these can be commercial or free). Let's take a look at a selection of
    what is available, to help us with testing browser compatibility.
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦我们确定了应该支持哪些设备，那么我们就有一系列工具可供我们使用，来测试浏览器兼容性。这些工具包括物理设备（理想，但维护成本高昂）、模拟器或在线服务（这些可以是商业的或免费的）。让我们看一下可供选择的一些工具，以帮助我们测试浏览器兼容性。
- en: Exploring tools available for testing
  id: totrans-181
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 探索可用于测试的工具
- en: 'When we plan to test a mobile or responsive website, there are factors which
    we need to consider before we start testing, to help deliver a website which looks
    consistent across all the devices and browsers. These factors include answering
    these three questions:'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们计划测试移动或响应式网站时，我们需要在开始测试之前考虑一些因素，以帮助交付一个在所有设备和浏览器上看起来一致的网站。这些因素包括回答以下三个问题：
- en: Does the website look good?
  id: totrans-183
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 网站看起来好吗？
- en: Are there any known bugs or defects?
  id: totrans-184
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 是否有已知的错误或缺陷？
- en: Is our website really responsive?
  id: totrans-185
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们的网站真的是响应式的吗？
- en: To help test our sites, we can use any one of several tools available (either
    paid or free); a key point to note though, is that we can already get a good idea
    of how well our sites work, by simply using the Developer toolbar that is available
    in most browsers!
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 为了帮助测试我们的网站，我们可以使用一些可用的工具（付费或免费）；但需要注意的一点是，我们可以通过简单地使用大多数浏览器中可用的开发者工具栏，已经对我们的网站的工作情况有一个很好的了解！
- en: 'Granted, it''s not something we should absolutely rely on, but it provides
    a perfect starting point. We can always move up to a commercial option when we''ve
    outgrown the capabilities offered in a browser. Let''s take a brief look at what''s
    available:'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 当然，这不是我们绝对依赖的东西，但它提供了一个完美的起点。当我们的需求超出了浏览器提供的功能时，我们总是可以升级到商业选项。让我们简要看一下有哪些可用的选项：
- en: Viewing with Chrome
  id: totrans-188
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用Chrome查看
- en: 'We can easily emulate a mobile device within Chrome, by pressing ***Ctrl***
    + ***Shift*** + ***M*** ; Chrome displays a toolbar at the top of the window,
    which allows us to select different devices:'
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以通过在Chrome中按下***Ctrl*** + ***Shift*** + ***M***来轻松模拟移动设备；Chrome会在窗口顶部显示一个工具栏，允许我们选择不同的设备：
- en: '![Viewing with Chrome](img/image_05_009.jpg)'
  id: totrans-190
  prefs: []
  type: TYPE_IMG
  zh: '![使用Chrome查看](img/image_05_009.jpg)'
- en: 'If we click on the menu entry (currently showing iPhone 6 Plus) and change
    it to Edit, we can add new devices; this allows us to set specific dimensions,
    user agent strings, and whether the device supports high-resolution images:'
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们点击菜单项（当前显示为iPhone 6 Plus）并将其更改为“编辑”，我们可以添加新设备；这使我们能够设置特定的尺寸、用户代理字符串以及设备是否支持高分辨率图像：
- en: '![Viewing with Chrome](img/image_05_010.jpg)'
  id: totrans-192
  prefs: []
  type: TYPE_IMG
  zh: '![使用Chrome查看](img/image_05_010.jpg)'
- en: Let's switch now, and take a look at the options available in Firefox.
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们切换一下，看看Firefox中有哪些选项。
- en: Working in Firefox
  id: totrans-194
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 在Firefox中工作
- en: The responsive design view option is available using the same ***Ctrl*** + ***Shift***
    + ***M*** option as Chrome; we can also access it by navigating to **Tools** |
    **Web Developer** | **Responsive Design Mode** from the menu.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 响应式设计视图选项可使用与Chrome相同的***Ctrl*** + ***Shift*** + ***M***选项；我们也可以通过导航到**工具**
    | **Web开发者** | **响应式设计模式**来访问它。
- en: 'When the mode is activated in Firefox, we can switch between different screen
    sizes:'
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 当在Firefox中激活模式时，我们可以在不同的屏幕尺寸之间切换：
- en: '![Working in Firefox](img/image_05_011.jpg)'
  id: totrans-197
  prefs: []
  type: TYPE_IMG
  zh: '![在Firefox中工作](img/image_05_011.jpg)'
- en: Although browsers can go some way in providing an indication of how well our
    site works, they can only cater to a limited range of views. Sometimes, we need
    to take things a step further and use commercial solutions to test our sites across
    multiple browsers at the same time. Let's take a look at some of the options available
    commercially.
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管浏览器在提供网站运行情况的指示方面已经有了一定的进展，但它们只能满足有限范围的视图。有时，我们需要更进一步，使用商业解决方案来同时测试我们的网站在多个浏览器上的运行情况。让我们来看看商业上可用的一些选项。
- en: Exploring our options
  id: totrans-199
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 探索我们的选择
- en: 'If you''ve spent any time developing code, then there is a good chance you
    may already be aware of Browserstack (from [https://www.browserstack.com](https://www.browserstack.com)).
    Other options include the following:'
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你花了一些时间开发代码，那么你很可能已经知道Browserstack（来自[https://www.browserstack.com](https://www.browserstack.com)）。其他选项包括以下内容：
- en: '**GhostLab**: [https://www.vanamco.com/ghostlab/](https://www.vanamco.com/ghostlab/)'
  id: totrans-201
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**GhostLab**：[https://www.vanamco.com/ghostlab/](https://www.vanamco.com/ghostlab/)'
- en: '**Muir**: [http://labs.iqfoundry.com/](http://labs.iqfoundry.com/)'
  id: totrans-202
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Muir**：[http://labs.iqfoundry.com/](http://labs.iqfoundry.com/)'
- en: '**CrossBrowserTesting**: [http://www.crossbrowsertesting.com/](http://www.crossbrowsertesting.com/)'
  id: totrans-203
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**CrossBrowserTesting**：[http://www.crossbrowsertesting.com/](http://www.crossbrowsertesting.com/)'
- en: 'If, however, all we need to do is check our site for its level of responsiveness,
    then we don''t need to use paid options. There are a number of sites that allow
    us to check, without needing to install plugins or additional tools:'
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，如果我们只需要检查我们的网站的响应水平，那么我们不需要使用付费选项。有许多网站可以让我们检查，而无需安装插件或额外的工具：
- en: '**Am I Responsive**: [http://ami.responsive.is](http://ami.responsive.is)'
  id: totrans-205
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Am I Responsive**: [http://ami.responsive.is](http://ami.responsive.is)'
- en: '**ScreenQueries**: [http://screenqueri.es](http://screenqueri.es)'
  id: totrans-206
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**ScreenQueries**：[http://screenqueri.es](http://screenqueri.es)'
- en: '**Cybercrab''s screen check facility**: [http://cybercrab.com/screencheck](http://cybercrab.com/screencheck)'
  id: totrans-207
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Cybercrab的屏幕检查设施**：[http://cybercrab.com/screencheck](http://cybercrab.com/screencheck)'
- en: '**Remy Sharp''s check site**: [http://responsivepx.com](http://responsivepx.com)'
  id: totrans-208
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Remy Sharp的检查站点**：[http://responsivepx.com](http://responsivepx.com)'
- en: We can also use bookmarklets to check to see how well our sites work on different
    devices—a couple of examples to try are at [http://codebomber.com/jquery/resizer](http://codebomber.com/jquery/resizer)
    and [http://responsive.victorcoulon.fr/](http://responsive.victorcoulon.fr/);
    it is worth noting that the current browsers already include this functionality,
    making the bookmarklets less attractive as an option.
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还可以使用书签工具来检查我们的网站在不同设备上的运行情况——可以尝试的一些例子在[http://codebomber.com/jquery/resizer](http://codebomber.com/jquery/resizer)和[http://responsive.victorcoulon.fr/](http://responsive.victorcoulon.fr)；值得注意的是，当前的浏览器已经包含了这个功能，使得书签工具作为一个选项变得不那么吸引人。
- en: Following best practices
  id: totrans-210
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 遵循最佳实践
- en: A key question we must ask ourselves is to what extent we will support the use
    of particular browsers when developing our websites. The answer to this will lie
    in monitoring analytical software, to determine which browsers are being used.
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 我们必须问自己的一个关键问题是，在开发网站时，我们将在多大程度上支持特定浏览器的使用。这个问题的答案将在监控分析软件中，确定哪些浏览器正在使用。
- en: In most cases, it should show modern browsers being used, but there are still
    limited instances of old browsers in use; for example, IE6 is still being used,
    although its market share is now a tiny 0.25%, as at April 2016\. This raises
    the question of what we should support, if monitoring analytics for our sites
    shows that only a tiny percentage (that is, lower than 1%, for example) of usage
    is for older browsers, then we may take the decision to not support them if the
    effort and resources required do not justify the return from such a small market
    share.
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 在大多数情况下，它应该显示正在使用的现代浏览器，但仍然有一些使用旧浏览器的情况；例如，IE6仍在使用，尽管其市场份额现在只有微不足道的0.25%，截至2016年4月。这引发了一个问题，即如果监控我们网站的分析数据显示，只有一个微小的百分比（例如低于1%）的用户使用旧浏览器，那么我们可能会决定不支持它们，如果所需的工作量和资源不足以证明从这么小的市场份额中获得回报的话。
- en: 'This said, there are some basic tips that can help us optimize our sites:'
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 这样说，有一些基本的技巧可以帮助我们优化我们的网站：
- en: We should avoid using hacks where possible. Conditional comments are a better
    option, although we should regularly check and remove styles if they are no longer
    applicable (such as vendor prefixes, which no longer apply).
  id: totrans-214
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们应该尽量避免使用hack。条件注释是一个更好的选择，尽管我们应该定期检查并删除不再适用的样式（例如供应商前缀，它们不再适用）。
- en: Try to use `<!DOCType html>` in your code. This will indicate to the browser
    that it should follow HTML5 rules; it will degrade automatically if the browser
    does not support HTML5.
  id: totrans-215
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 尽量在你的代码中使用`<!DOCType html>`。这将告诉浏览器它应该遵循HTML5规则；如果浏览器不支持HTML5，它将自动降级。
- en: We can use the W3C Validation Service to check our code for consistency. A better
    option though is to build this into part of the development process; we can easily
    do this with Node.js, so it can be done automatically.
  id: totrans-216
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们可以使用W3C验证服务来检查我们的代码是否一致。不过，更好的选择是将其纳入开发过程的一部分；我们可以很容易地用Node.js做到这一点，所以它可以自动完成。
- en: In the age of modern sites, JavaScript has become an essential tool for development.
    It is all too easy to resort to using it, without really considering the options
    available. Try to avoid using JavaScript if possible. It was designed to complement
    existing code, and should not be relied on to provide core functionality. The
    state of CSS is such now that styling functionality that previously was only possible
    with JavaScript may now be feasible with CSS and provide smoother results to boot!
  id: totrans-217
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在现代网站时代，JavaScript已经成为开发的一个必不可少的工具。很容易就会倾向于使用它，而不真正考虑其他选择。尽量避免使用JavaScript。它是设计用来补充现有代码的，并且不应该依赖它来提供核心功能。CSS的状态现在已经是这样，以至于以前只能用JavaScript实现的样式功能现在可能用CSS实现，并且提供更流畅的结果！
- en: Summary
  id: totrans-218
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, we learned what performance is and what the consequences are
    if a website has poor performance. Then, we explored what factors could cause
    our web page to load slowly. In this chapter, we also learned how we can measure
    the performance of a website with the help of various tools available online,
    and covered the steps we can take to improve the performance of our websites.
    We then covered some of the best practices we can follow with relevance to the
    performance of the website.
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们了解了性能是什么，以及如果网站性能不佳会有什么后果。然后，我们探讨了什么因素可能导致我们的网页加载缓慢。在本章中，我们还学习了如何使用在线可用的各种工具来衡量网站的性能，并介绍了我们可以采取的措施来改善网站的性能。然后，我们介绍了一些关于网站性能的最佳实践。
- en: We then moved on to explore the importance of maintaining cross-browser compatibility
    and considered some of the solutions that are available to deal with cross-browser
    issues. Then, we covered the challenges that are present in testing cross-browser
    compatibility across a wide combination of available browsers and devices. Apart
    from that, we discovered how to tackle this problem and devise a strategy to get
    the maximum output. Finally, we saw some of the tools that are available online
    to test the compatibility of our website across various browser-device combinations.
    We have now reached the end of our journey through the essentials of creating
    responsive sites. We hope you enjoyed reading this book as much as we have writing
    it, and that it helps you make a start into the world of responsive design using
    little more than plain HTML and CSS.
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: 我们接着探讨了保持跨浏览器兼容性的重要性，并考虑了一些可用的解决方案来处理跨浏览器问题。然后，我们讨论了在测试跨浏览器兼容性时所面临的挑战，涉及了各种可用浏览器和设备的组合。除此之外，我们发现了如何解决这个问题并制定策略以获得最大的输出。最后，我们看到了一些在线可用的工具，用于测试我们的网站在各种浏览器和设备组合上的兼容性。我们现在已经完成了创建响应式网站基础知识的旅程。希望您喜欢阅读本书，就像我们写作一样，并希望它能帮助您开始使用简单的HTML和CSS进入响应式设计的世界。
