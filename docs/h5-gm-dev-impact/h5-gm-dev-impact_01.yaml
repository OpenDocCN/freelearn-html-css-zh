- en: Chapter 1. Firing Up Your First Impact Game
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第1章。启动您的第一个Impact游戏
- en: Now that we have seen in the *Preface* why the Impact Engine is a good choice
    for game developers, it's time to get to work. In order to develop a game, you
    will first need to set up your work environment. Just like a painter who needs
    his brushes, canvas, and paint, you will need to set up your code editor, server,
    and browser. By the end of this chapter, you will have equipped yourself with
    all the tools you need to start your adventure and even run a game on your computer.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经在*前言*中看到为什么Impact Engine是游戏开发者的一个不错选择，是时候开始工作了。为了开发游戏，您首先需要设置您的工作环境。就像画家需要他的画笔、画布和颜料一样，您需要设置您的代码编辑器、服务器和浏览器。在本章结束时，您将装备好所有开始冒险甚至在计算机上运行游戏所需的工具。
- en: 'In this chapter, we will cover the following topics:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖以下主题：
- en: Setting up your own local server by using XAMPP
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用XAMPP设置您自己的本地服务器
- en: Running a premade game on this server
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在此服务器上运行预制游戏
- en: A short list of script editors you can choose from
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 您可以选择以下脚本编辑器的简短列表
- en: Debugging your game using browsers and the ImpactJS debugger scripts
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用浏览器和ImpactJS调试器脚本调试您的游戏
- en: Some interesting tools you should consider for helping you create your game
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一些有趣的工具，您应该考虑帮助您创建游戏
- en: Installing a XAMPP server
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装XAMPP服务器
- en: When developing anything at all, be it an application, a website, or a game,
    the creator always has a staging area. A staging area is like a laboratory; it
    is meant for building and testing everything before showing it to the world. Even
    after releasing a game, you will first make changes in the laboratory to see if
    things don't blow up in your face. Blowing up in *your own* face is fine, but
    you don't want this to happen to your gamers. Our staging area will be a local
    server, and during the course of this book we will use **XAMPP**. The X in XAMPP
    is an indication that this server is available for different operating systems
    (cross environmental, hence X).
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 无论开发任何东西，无论是应用程序、网站还是游戏，创作者总是有一个临时区域。临时区域就像一个实验室；它用于在向世界展示之前构建和测试所有内容。即使发布游戏后，您也会首先在实验室中进行更改，以查看事情是否会出现问题。在*您自己的*面前出现问题是可以接受的，但您不希望这种情况发生在您的玩家身上。我们的临时区域将是一个本地服务器，在本书的过程中我们将使用**XAMPP**。XAMPP中的X表示该服务器适用于不同的操作系统（跨环境，因此X）。
- en: The other characters (**AMPP** ) stand for **Apache** , **MySQL** , **PHP**
    , and **Perl** . You can install XAMPP on Windows, Linux, or Mac depending on
    which version you download and install. There are alternatives for XAMPP such
    as **WAMP** (for Windows) and **LAMP** (for Linux). These alternatives are fine
    too, of course.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 其他字符（**AMPP**）代表**Apache**，**MySQL**，**PHP**和**Perl**。您可以根据下载和安装的版本在Windows、Linux或Mac上安装XAMPP。还有一些XAMPP的替代品，如**WAMP**（适用于Windows）和**LAMP**（适用于Linux）。当然，这些替代品也很好。
- en: Apache is the open source web server software that enables you to run your code.
    MySQL is an open source database system that enables you to store and query data
    with the SQL language. PHP is a language that is capable of connecting the SQL
    commands (which can manipulate a database) to the website or game code (JavaScript).
    Perl is often called "the Swiss army knife of programming languages" because of
    its versatility in uses. Installing a XAMPP server is rather straightforward.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: Apache是开源的Web服务器软件，使您能够运行您的代码。MySQL是一个开源的数据库系统，使您能够使用SQL语言存储和查询数据。PHP是一种能够将SQL命令（可以操作数据库）连接到网站或游戏代码（JavaScript）的语言。Perl通常被称为“编程语言的瑞士军刀”，因为它在用途上非常多样化。安装XAMPP服务器相当简单。
- en: 'You can go to the following website and download the appropriate installer
    for your system:'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以转到以下网站，并为您的系统下载适当的安装程序：
- en: '[http://www.apachefriends.org/en/xampp.html](http://www.apachefriends.org/en/xampp.html)'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: '[http://www.apachefriends.org/en/xampp.html](http://www.apachefriends.org/en/xampp.html)'
- en: After installing the XAMPP server, which is basically going through a standard
    installation wizard, it is time to check out the **XAMPP Control Panel** page.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 安装XAMPP服务器后，基本上是通过标准安装向导进行操作，是时候查看**XAMPP控制面板**页面了。
- en: '![Installing a XAMPP server](img/4568_1_2.jpg)'
  id: totrans-15
  prefs: []
  type: TYPE_IMG
  zh: '![安装XAMPP服务器](img/4568_1_2.jpg)'
- en: In this panel you can see the different components of the server, which can
    be switched on and off. You will want to make sure that at least the Apache component
    is up and running. The others can be on too, but Apache is absolutely necessary
    for running your game.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 在此面板中，您可以看到服务器的不同组件，可以打开和关闭。您需要确保至少Apache组件正在运行。其他组件也可以打开，但Apache对于运行游戏是绝对必要的。
- en: Now go to your browser. During the course of this book we will be using the
    Chrome and Firefox browsers. However, it is recommended to also install the latest
    Internet Explorer and Safari browsers for testing. In the address bar simply type
    `localhost`. Localhost is the default location for a locally installed server.
    Do you see the following *XAMPP splash screen*?
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 现在转到您的浏览器。在本书的过程中，我们将使用Chrome和Firefox浏览器。但是，建议还安装最新的Internet Explorer和Safari浏览器进行测试。在地址栏中简单地输入`localhost`。Localhost是本地安装服务器的默认位置。您是否看到以下*XAMPP启动屏幕*？
- en: '![Installing a XAMPP server](img/4568_1_3.jpg)'
  id: totrans-18
  prefs: []
  type: TYPE_IMG
  zh: '![安装XAMPP服务器](img/4568_1_3.jpg)'
- en: Well congratulations, you have successfully set up your own local server!
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 恭喜，您已成功设置了自己的本地服务器！
- en: A known issue is the occupation of your necessary ports by **IIS** (**Internet
    Information Services**). You might have to disable or even remove them in order
    to free your ports for XAMPP.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 已知问题是**IIS**（**Internet Information Services**）占用了您必需的端口。您可能需要禁用或甚至删除它们，以便为XAMPP释放端口。
- en: 'For **MAMP** (**M** stands for **Mac**), it is possible that you will need
    to specify the port 8888 in order for it to work. So type `localhost: 8888` instead
    of just `localhost`.'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: '对于**MAMP**（**M**代表**Mac**），可能需要指定端口8888才能正常工作。因此，输入`localhost: 8888`而不是只输入`localhost`。'
- en: 'Summing up the preceding content, the steps will be as follows:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 总结前面的内容，步骤如下：
- en: Download and install XAMMP.
  id: totrans-23
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下载并安装XAMMP。
- en: Open the control panel and start Apache.
  id: totrans-24
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开控制面板并启动Apache。
- en: Open your browser and type `localhost` in the address bar.
  id: totrans-25
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在地址栏中输入`localhost`，打开你的浏览器。
- en: 'Installing the game engine: ImpactJS'
  id: totrans-26
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装游戏引擎：ImpactJS
- en: The next thing you will need is the actual ImpactJS game engine, which you can
    buy from the ImpactJS website at [http://impactjs.com/](http://impactjs.com/)
    or which comes as a package with **AppMobi** on the AppMobi website at [http://www.appmobi.com](http://www.appmobi.com).
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来你需要的是实际的ImpactJS游戏引擎，你可以从ImpactJS网站[http://impactjs.com/](http://impactjs.com/)购买，或者在AppMobi网站[http://www.appmobi.com](http://www.appmobi.com)上购买**AppMobi**的套餐，其中包含ImpactJS游戏引擎。
- en: Regardless of where you buy the engine, you will be looking for a (zipped) folder
    filled with JavaScript files. This is essentially what ImpactJS is, a JavaScript
    library that makes it easier to build 2D games in an HTML environment.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 无论你在哪里购买引擎，你都会寻找一个（压缩的）文件夹，里面装满了JavaScript文件。这本质上就是ImpactJS，一个在HTML环境中更容易构建2D游戏的JavaScript库。
- en: Now that you already have your server up and running and you have acquired this
    ImpactJS engine, all you need to do is put it in the correct place and test whether
    it works.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你已经让服务器运行起来了，并且已经获得了ImpactJS引擎，你所需要做的就是把它放在正确的位置并测试它是否起作用。
- en: In the ImpactJS version (v1.21), at the time of writing this book you get one
    folder called `impact` and one `license.txt` file.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 在ImpactJS版本（v1.21）中，在写这本书的时候，你会得到一个名为`impact`和一个`license.txt`文件的文件夹。
- en: The license file tells you what you can and cannot do with your purchased Impact
    license, so you would be advised to at least read it.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 许可证文件会告诉你购买的Impact许可证可以做什么，不能做什么，所以建议你至少阅读一下。
- en: The `impact` folder itself consists of more than just the Impact game engine;
    it also includes the level editor. The folder structure should be able to hold
    all your future game files.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: '`impact`文件夹本身不仅包括Impact游戏引擎，还包括关卡编辑器。文件夹结构应该能够容纳所有未来的游戏文件。'
- en: For now, it is enough to know that you can copy the entire `impact` folder to
    the root location of your server.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 目前，知道你可以将整个`impact`文件夹复制到服务器的根目录就足够了。
- en: 'For XAMPP this should be: `"your installation location"\xampp\htdocs`.'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 对于XAMPP来说，应该是：`"你的安装位置"\xampp\htdocs`。
- en: 'For WAMP this is: `"your installation location"\wamp\www`.'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 对于WAMP来说，应该是：`"你的安装位置"\wamp\www`。
- en: Let's also make a copy of this folder and rename it to `myfirstawesomegame`
    to make it a little more personal. Now you have the original folder that we will
    use later in [Chapter 3](ch03.html "Chapter 3. Let's Build a Role Playing Game"),
    *Let's build a Role Playing Game* and [Chapter 4](ch04.html "Chapter 4. Let's
    Build a Side Scroller Game"), *Let's build a Side Scroller Game* next to the new
    folder called `myfirstawesomegame`.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们也复制这个文件夹并将其重命名为`myfirstawesomegame`，让它更加个性化。现在你有了原始文件夹，我们将在[第3章](ch03.html
    "第3章。让我们建立一个角色扮演游戏")和[第4章](ch04.html "第4章。让我们建立一个横向卷轴游戏")中使用，*让我们建立一个角色扮演游戏*和*让我们建立一个横向卷轴游戏*。
- en: You should also have the following folder structure in both your XAMPP installation
    location as `\xampp\htdocs\myfirstawesomegame` and your WAMP installation location
    as `\wamp\www\myfirstawesomegame`.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 你还应该在XAMPP安装位置`\xampp\htdocs\myfirstawesomegame`和WAMP安装位置`\wamp\www\myfirstawesomegame`中都有以下文件夹结构。
- en: In the `myfirstawesomegame` folder there should be the `lib`, `media`, and `tools`
    subfolders and the `index.html` and `Weltmeister.html` files.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 在`myfirstawesomegame`文件夹中应该有`lib`、`media`和`tools`子文件夹，以及`index.html`和`Weltmeister.html`文件。
- en: Time for a little test! Just go to your browser and in the address bar type
    `localhost/myfirstawesomegame`.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 时间进行一次小测试！只需在浏览器中输入`localhost/myfirstawesomegame`。
- en: The **it works!** message should now fill your heart with joy! If it doesn't
    appear on the screen, something went horribly wrong. If you don't get the message,
    make sure all your files are present and are in the correct location.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: “它起作用了！”的消息现在应该让你心中充满了喜悦！如果它没有出现在屏幕上，那么肯定出了大问题。如果你没有收到这条消息，请确保所有文件都存在并且位于正确的位置。
- en: ImpactJS comes with a *physics engine* called `Box2D`. Check if you have this
    folder somewhere in your folder structure. If not, you can download a demo game
    that has the engine included via the personal download link that you got for downloading
    the Impact engine. This demo is a game called *Biolab Disaster* and here you should
    be able to find the `box2d` folder. If not, Dominic (the creator of ImpactJS)
    also made a separate folder called `physics` available. Since Box2D is a plugin
    for the standard engine, it is best to search the `plugins` folder in your `lib`
    folder as shown in the following screenshot and drop the `box2d` folder in here.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: ImpactJS带有一个名为`Box2D`的*物理引擎*。检查一下你的文件夹结构中是否有这个文件夹。如果没有，你可以通过你下载Impact引擎时得到的个人下载链接下载一个包含引擎的演示游戏。这个演示游戏叫做*Biolab
    Disaster*，你应该能在这里找到`box2d`文件夹。如果没有，Dominic（ImpactJS的创造者）还提供了一个名为`physics`的单独文件夹。由于Box2D是标准引擎的一个插件，最好在你的`lib`文件夹中搜索`plugins`文件夹，并将`box2d`文件夹放在这里。
- en: '![Installing the game engine: ImpactJS](img/4568_1_4.jpg)'
  id: totrans-42
  prefs: []
  type: TYPE_IMG
  zh: '![安装游戏引擎：ImpactJS](img/4568_1_4.jpg)'
- en: 'Summing up the preceding content, the steps are as follows:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 总结前面的内容，步骤如下：
- en: Buy the ImpactJS license and download its core scripts
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 购买ImpactJS许可证并下载其核心脚本
- en: Put all the necessary files in a newly created folder called `myfirstawesomegame`
    in your server directory
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将所有必要的文件放在服务器目录中新创建的名为`myfirstawesomegame`的文件夹中。
- en: Open your browser and type `localhost/myfirstawesomegame` in the address bar
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在地址栏中输入`localhost/myfirstawesomegame`，打开你的浏览器。
- en: Download the Box2D plugin and add it to the `plugins` folder on your own server
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 下载Box2D插件并将其添加到你自己服务器上的`plugins`文件夹中
- en: Choosing a script editor
  id: totrans-48
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 选择一个脚本编辑器
- en: We now have a server up and running with the ImpactJS game engine installed
    but we don't have a tool yet with which we can actually write the game code. This
    is where the *script editor* comes in.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在已经让服务器运行起来，并安装了ImpactJS游戏引擎，但我们还没有工具来实际编写游戏代码。这就是*脚本编辑器*的用武之地。
- en: For choosing the right code editor to suit your needs, it is best to make the
    distinction between a pure editor and an IDE. The **IDE** or **Integrated Development
    Environment** is both a script editor and a compiler. So this means that in one
    program you can both change and run your game. A script editor on the other hand
    is just for changing the script. It won't show you the output but will, in most
    cases, tell you in advance when you are about to make a syntax error. While the
    editor will show you syntax errors in your JavaScript code, actually executing
    the code will reveal logical mistakes and give you something (pretty) to look
    at.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 为了选择适合你需求的正确代码编辑器，最好区分纯编辑器和IDE。**IDE**或**集成开发环境**既是脚本编辑器又是编译器。这意味着在一个程序中你可以改变和运行你的游戏。另一方面，脚本编辑器只是用来改变脚本。它不会显示输出，但在大多数情况下，会在你即将发生语法错误时提醒你。虽然编辑器会显示你JavaScript代码中的语法错误，但实际执行代码会显示逻辑错误，并给你一些（漂亮的）东西看。
- en: For ImpactJS there is an IDE called AppMobi, which is free but charges for extra
    services. The alternative to using AppMobi is the XAMPP server you just installed.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 对于ImpactJS，有一个名为AppMobi的IDE，它是免费的，但收费额外服务。使用AppMobi的替代方案是你刚刚安装的XAMPP服务器。
- en: Script editors, even very good ones, often come for free. Some nice ones you
    should check out before choosing the one you like are **Eclipse** , **notepad++**,
    **komodo edit** , and **sublime edit 2** . For Mac specifically there is **Textmate**
    , which is an often used editor but it doesn't come for free. And of course **Xcode**
    , the official apple developer editor.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 脚本编辑器，即使是非常好的脚本编辑器，通常也是免费的。在选择你喜欢的之前，你应该检查一些好的脚本编辑器，比如**Eclipse**，**notepad++**，**komodo
    edit**和**sublime edit 2**。特别是对于Mac，有一个名为**Textmate**的编辑器，它经常被使用，但不是免费的。当然还有**Xcode**，官方的苹果开发者编辑器。
- en: All of these script editors will check for mistakes you make in the JavaScript
    code, however, they don't check for ImpactJS specific code. For this you could
    make your own script color coding bundle or download one from those who took the
    time to build one.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 所有这些脚本编辑器都会检查你在JavaScript代码中所犯的错误，但它们不会检查ImpactJS特定的代码。为此，你可以制作自己的脚本颜色编码包，或者从那些花时间构建的人那里下载一个。
- en: Download and install a few of the previously mentioned script editors and pick
    the one you like best. All of them will do the trick just fine, it's just a matter
    of preference.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 下载并安装之前提到的一些脚本编辑器，并选择你最喜欢的。所有这些都可以很好地完成任务，只是个人偏好的问题。
- en: Running the premade game
  id: totrans-55
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 运行预制游戏
- en: 'It''s time to get a game up and running on your PC. In order to do this you
    will need the files that come with the book. These can be downloaded from the
    following site:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 是时候在你的电脑上开始运行游戏了。为了做到这一点，你需要书中附带的文件。这些文件可以从以下网站下载：
- en: '[http://www.PacktPub.com/support](http://www.PacktPub.com/support)'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: '[http://www.PacktPub.com/support](http://www.PacktPub.com/support)'
- en: Now you should have everything. Copy the downloadable material for [Chapter
    1](ch01.html "Chapter 1. Firing Up Your First Impact Game"), *Firing Up Your First
    Impact Game*. Replace the `index.html` and `main.js` scripts that come with the
    ImpactJS library with the `index.html` and `main.js` scripts, which you can download
    from the Packt Publishing's download page. Also overwrite the `media`, `entities`,
    and `levels` folders on your PC with the ones provided.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你应该已经准备好了。复制[第1章](ch01.html "第1章.启动你的第一个Impact游戏")的可下载材料，*启动你的第一个Impact游戏*。用Packt
    Publishing下载页面上的`index.html`和`main.js`脚本替换ImpactJS库附带的`index.html`和`main.js`脚本。还要用提供的`media`、`entities`和`levels`文件夹覆盖你电脑上的文件夹。
- en: Return to your browser and reload the `localhost/myfirstawesomegame` link. Lo
    and behold! A *fully functioning ImpactJS game*! In case you still see the **it
    works!** message as shown in the following screenshot, you might have to clear
    your browser cache or refresh the page a couple of times before the game shows
    up. In case something else is wrong, we will find out when we learn about debugging.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 返回浏览器，重新加载`localhost/myfirstawesomegame`链接。瞧！一个*完全功能的ImpactJS游戏*！如果你仍然看到下面截图中显示的**it
    works!**消息，可能需要清除浏览器缓存或刷新页面几次才能显示游戏。如果还有其他问题，我们将在学习调试时找出。
- en: '![Running the premade game](img/4568_1_5.jpg)'
  id: totrans-60
  prefs: []
  type: TYPE_IMG
  zh: '![运行预制游戏](img/4568_1_5.jpg)'
- en: 'Summing up the preceding content, the steps are as follows:'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 总结前面的内容，步骤如下：
- en: Download the necessary files from the packtpub download server and put them
    in the correct location on your own server
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从packtpub下载服务器下载必要的文件，并将它们放在你自己服务器上的正确位置
- en: Open your browser and type `localhost/myfirstawesomegame` in the address bar
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 打开浏览器，在地址栏中输入`localhost/myfirstawesomegame`
- en: Debugging your game with the browser and ImpactJS
  id: totrans-64
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用浏览器和ImpactJS调试你的游戏
- en: 'Before you can debug the game, the least you should know is the *general structure
    of ImpactJS code*. As you might have noticed, ImpactJS has a main script that
    is used for actually steering the entire game. The `main.js` script includes all
    other necessary scripts and the `ImpactJS` library. Every script it includes represents
    a module. Like this, you have a module for every level and entity in the game.
    They are like Lego blocks, brought together in one big (`main.js`) castle. Indeed,
    the main script, as shown in the following code snippet, is a module in itself,
    requiring all other modules:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 在你调试游戏之前，你至少应该了解*ImpactJS代码的一般结构*。你可能已经注意到，ImpactJS有一个主脚本，用于实际控制整个游戏。`main.js`脚本包括所有其他必要的脚本和`ImpactJS`库。它包含的每个脚本都代表一个模块。就像这样，你在游戏中为每个级别和实体都有一个模块。它们就像乐高积木，聚集在一个大的（`main.js`）城堡中。事实上，主脚本如下面的代码片段所示，本身就是一个模块，需要所有其他模块：
- en: '[PRE0]'
  id: totrans-66
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Tip
  id: totrans-67
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: '**Downloading the example code**'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: '**下载示例代码**'
- en: You can download the example code files for all Packt books you have purchased
    from your account at [http://www.packtpub.com](http://www.packtpub.com). If you
    purchased this book elsewhere, you can visit [http://www.packtpub.com/support](http://www.packtpub.com/support)
    and register to have the files e-mailed directly to you.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以从[http://www.packtpub.com](http://www.packtpub.com)的帐户中下载您购买的所有Packt图书的示例代码文件。如果您在其他地方购买了本书，您可以访问[http://www.packtpub.com/support](http://www.packtpub.com/support)并注册，以便直接通过电子邮件接收文件。
- en: 'If you take a look inside a level script you will find it to be written in
    **JSON** (**JavaScript Object Notation**), which is a subset of **object literal
    notation** . JSON and normal literal differ from each other in the following ways:'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您查看一下级别脚本，您会发现它是用**JSON**（JavaScript对象表示法）编写的，这是**对象文字表示法**的一个子集。 JSON和普通文字在以下方面有所不同：
- en: The JSON keys are strings encapsulated in double quotes.
  id: totrans-71
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: JSON键是用双引号括起来的字符串。
- en: JSON is used for data transfer.
  id: totrans-72
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: JSON用于数据传输。
- en: You cannot assign a function as a value to a JSON object.
  id: totrans-73
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您不能将函数分配为JSON对象的值。
- en: 'More in-depth information about JSON can be found on [http://json.org/](http://json.org/).
    Literal is used throughout ImpactJS and looks like the following code snippet:'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 有关JSON的更深入信息可以在[http://json.org/](http://json.org/)上找到。文字在ImpactJS中使用，并且看起来像以下代码片段：
- en: '[PRE1]'
  id: totrans-75
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Properties are defined with the colon (`:`) and separated by a comma (`,`).
    In normal JavaScript, this is done differently as follows:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 属性使用冒号（`:`）定义，并用逗号（`,`）分隔。在普通JavaScript中，这样做的方式不同，如下所示：
- en: '[PRE2]'
  id: totrans-77
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: The equal sign (`=`) is used to assign a value to a property and the semicolon
    (`;`) is used to separate different properties and other variables.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 等号（`=`）用于为属性分配值，分号（`;`）用于分隔不同的属性和其他变量。
- en: 'Summing up the preceding content, the conclusions are as follows:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 总结前面的内容，得出以下结论：
- en: 'Three types of JavaScript notations are used by ImpactJS: JSON, literal, and
    normal notation'
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ImpactJS使用三种JavaScript表示法：JSON，文字和普通表示法
- en: ImpactJS level scripts are in JSON code
  id: totrans-81
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ImpactJS级别脚本使用JSON代码
- en: ImpactJS makes use of both literal and normal JavaScript notations
  id: totrans-82
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ImpactJS同时使用文字和普通JavaScript表示法
- en: Debugging with the browser
  id: totrans-83
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用浏览器调试
- en: While writing code with your freshly installed script editor, you will notice
    that JavaScript syntax mistakes can be avoided immediately since the editor will
    tell you what is wrong. However, some mistakes can only be found when actually
    running the code in the browser. Maybe you didn't want that princess to go up
    in flames when the hero saves her, but unintended results do happen. This means
    you should at all times have your browser open so that you can reload your game
    over and over until everything is to your liking.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 在使用新安装的脚本编辑器编写代码时，您会注意到可以立即避免JavaScript语法错误，因为编辑器会告诉您出了什么问题。但是，有些错误只有在实际在浏览器中运行代码时才能找到。也许您并不希望公主在英雄救了她后起火，但意外的结果确实会发生。这意味着您应该随时保持浏览器打开，以便可以一遍又一遍地重新加载游戏，直到一切都符合您的喜好。
- en: However, when your game crashes or doesn't even load completely, it can be a
    real pain to find the cause. Even when changing small chunks of code at a time,
    errors can pop up at unexpected places.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，当您的游戏崩溃或甚至无法完全加载时，找到原因可能会非常痛苦。即使一次更改一小部分代码，错误也可能在意想不到的地方出现。
- en: For this purpose both Firefox and Chrome have good tools at their disposal.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 为此，Firefox和Chrome都配备了很好的工具。
- en: Firebug – the Firefox debugger
  id: totrans-87
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Firebug - Firefox调试器
- en: For Firefox you can install the **Firebug** plugin, a decent JavaScript debugger
    that will tell you on which lines of code your mistakes are, and has an easy explorer
    for the **DOM** (**Document Object Model**) of your game. The DOM is basically
    the structure of your HTML document containing all the entities and functions;
    having a good insight into the DOM is a must.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 对于Firefox，您可以安装**Firebug**插件，这是一个不错的JavaScript调试器，可以告诉您代码中的错误在哪一行，并且具有一个易于使用的**DOM**（文档对象模型）资源管理器。DOM基本上是包含所有实体和函数的HTML文档的结构；深入了解DOM是必不可少的。
- en: This DOM explorer is extremely useful for checking values of certain variables
    such as the health of your hero or the number of enemies on the screen. Mistakes
    that cause your game to crash will be easy to find with a debugger (both Firefox
    and Chrome). But in order to discover that you've added two extra zeros at the
    end of your enemy's health (so those creatures just won't die!), you will need
    to explore the DOM.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 这个DOM资源管理器非常有用，可以用来检查某些变量的值，比如您的英雄的生命值或屏幕上敌人的数量。导致游戏崩溃的错误将很容易通过调试器（Firefox和Chrome都有）找到。但是，要发现您在敌人的生命值末尾添加了两个额外的零（所以这些生物就是不会死！），您需要探索DOM。
- en: '![Firebug – the Firefox debugger](img/4568_1_6.jpg)'
  id: totrans-90
  prefs: []
  type: TYPE_IMG
  zh: '![Firebug - Firefox调试器](img/4568_1_6.jpg)'
- en: Chrome debugger
  id: totrans-91
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Chrome调试器
- en: For Chrome you don't even have to download a plugin because it comes bundled
    with its JavaScript console. This console can be found under **Options** | **Extra**
    | **JavaScript console** and is a dream to work with. You can also bring up the
    console by right-clicking on your webpage and selecting **Inspect element**.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 对于Chrome，您甚至不需要下载插件，因为它已经捆绑了JavaScript控制台。此控制台可以在**选项** | **额外** | **JavaScript控制台**下找到，并且非常方便使用。您还可以通过右键单击网页并选择**检查元素**来打开控制台。
- en: '![Chrome debugger](img/4568_1_7.jpg)'
  id: totrans-93
  prefs: []
  type: TYPE_IMG
  zh: '![Chrome调试器](img/4568_1_7.jpg)'
- en: The Chrome debugger (also called Chrome developer tools) has eight tabs of which
    four are particularly useful for debugging Impact games.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: Chrome调试器（也称为Chrome开发者工具）有八个选项卡，其中有四个对调试Impact游戏特别有用。
- en: The **Elements** tab allows you to inspect the HTML code of your page and even
    edit it on the spot. This way you can, for instance, change the canvas size for
    your game. You have to be aware though that changes are made only to the loaded
    web page; they are not saved to your HTML or JavaScript files.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: '**元素**选项卡允许您检查页面的HTML代码，甚至可以立即对其进行编辑。这样，您可以更改游戏的画布大小。但是，请注意，更改仅适用于加载的网页；它们不会保存到您的HTML或JavaScript文件中。'
- en: In the **Resources** tab you can look up information about your *local storage*.
    Local storage is not necessary for building a game but it is a cool feature used
    for saving high scores and the like.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 在**Resources**标签中，您可以查找有关您的*本地存储*的信息。本地存储对于构建游戏并不是必需的，但它是一个用于保存高分和类似内容的很酷的功能。
- en: The **Sources** tab is extremely useful because it allows you to inspect and
    change (again temporarily) your JavaScript code. You can find your DOM in this
    tab like you would in Firefox. Code can be paused manually or by the use of conditional
    breakpoints. If, for instance, your character can gain experience, you can pause
    the game when leveling up to see if all variables take the value you expect them
    to.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: '**Sources**标签非常有用，因为它允许您检查和更改（再次是临时的）您的JavaScript代码。您可以在这个标签中找到您的DOM，就像在Firefox中一样。代码可以手动暂停，也可以通过使用条件断点来暂停。例如，如果您的角色可以获得经验，您可以在升级时暂停游戏，看看所有变量是否都取得了您期望的值。'
- en: The most important part of the debugger is the **Console** tab. The console
    shows where your errors are and even indicates the JavaScript file and line on
    which they occur. The console is pretty versatile such that it can be called while
    any other tab is open. This way you can check your code in the **Sources** tab
    and if you have errors, call the console by clicking on the **X** icon in the
    bottom-right corner. With both the **Sources** and **Console** tab opened, debugging
    becomes a walk in the park.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 调试器最重要的部分是**Console**标签。控制台显示了您的错误所在，甚至指示了发生错误的JavaScript文件和行。控制台非常灵活，可以在任何其他标签打开时调用。这样，您可以在**Sources**标签中检查代码，如果有错误，可以通过单击右下角的**X**图标来调用控制台。打开**Sources**和**Console**标签后，调试变得轻而易举。
- en: The other four tabs are the **Network** , **Timeline** , **Profiles** , and
    **Audits** tabs. They are useful but you will be spending most of your time with
    both the **Sources** and **Console** components opened.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 其他四个标签是**Network**，**Timeline**，**Profiles**和**Audits**标签。它们很有用，但您将花费大部分时间与**Sources**和**Console**组件一起打开。
- en: During the course of this book, Firebug and Chrome debugger can be used interchangeably.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 在本书的过程中，Firebug和Chrome调试器可以互换使用。
- en: 'Changing your game and reloading your web browser is often not enough if your
    caching is enabled. As long as your game is cached, you are not 100 percent sure
    whether you are evaluating the latest version of your game or a previous one that
    the browser had locked in the memory. When developing games, it is wise to turn
    caching off. In Firefox it can be done by downloading and using a plugin that
    does just this. In Chrome it is simply an option of the Chrome developer tools
    itself. When the debugger is open, click on the cog-wheel symbol in the bottom-right
    corner to open the settings. Under the **General** tab you can disable the cache
    as shown in the following screenshot:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 如果启用了缓存，更改游戏并重新加载您的Web浏览器通常是不够的。只要您的游戏被缓存，您就无法百分之百确定您是否在评估游戏的最新版本还是浏览器在内存中锁定的先前版本。在开发游戏时，关闭缓存是明智的选择。在Firefox中，可以通过下载和使用一个执行此操作的插件来完成。在Chrome中，这只是Chrome开发者工具本身的一个选项。当调试器打开时，单击右下角的齿轮符号以打开设置。在**General**标签下，您可以禁用缓存，如下面的屏幕截图所示：
- en: '![Chrome debugger](img/4568_1_8.jpg)'
  id: totrans-102
  prefs: []
  type: TYPE_IMG
  zh: '![Chrome debugger](img/4568_1_8.jpg)'
- en: Debugging can be done in a single browser but it is wise to test whether your
    game runs smoothly at least on four browsers such as Chrome, Safari, Internet
    Explorer, and Firefox. With these four you cover at least 95 percent of browser
    usage.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 调试可以在单个浏览器中完成，但明智的做法是至少在四个浏览器上测试您的游戏是否运行顺畅，例如Chrome，Safari，Internet Explorer和Firefox。使用这四个浏览器，您至少可以覆盖95％的浏览器使用率。
- en: Testing for certain devices will also be necessary if you want to launch a game
    for them. This can be done by owning one of the devices on which you want your
    game to work (for example, an iPad, iPhone, HTC, Galaxy, and so on) and placing
    your game online with the help of a web hosting company such as `one.com`. Alternatively,
    you can use AppMobi, which features a device viewer for this purpose.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您想为某些设备进行测试，那么测试也是必要的。这可以通过拥有您希望您的游戏在其上运行的设备之一（例如iPad，iPhone，HTC，Galaxy等）并在`one.com`等网络托管公司的帮助下将您的游戏在线上发布来完成。或者，您可以使用AppMobi，该工具具有设备查看器，用于此目的。
- en: Another great way to test your game is by using emulators. Emulators are programs
    that will simulate being an actual smart phone. This is all well and good but
    let's look at a practical example.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 测试游戏的另一个好方法是使用模拟器。模拟器是一种模拟实际智能手机的程序。这一切都很好，但让我们看一个实际的例子。
- en: Exercises in debugging with Chrome and Firebug
  id: totrans-106
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 使用Chrome和Firebug进行调试的练习
- en: In the previous sections we got the game up and running. Now let's see what
    happens if something is actually wrong (provided everything worked fine until
    now).
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的章节中，我们已经让游戏开始运行了。现在让我们看看如果真的出了问题会发生什么（假设到目前为止一切都很顺利）。
- en: We need some *flawed code files* first. So copy the `main.js`, `player.js`,
    `projectile.js`, and `enemy.js` scripts from the `debugging tutorial` folder and
    replace the old ones with these scripts. `main.js` should be located in your `game`
    folder, and `enemy.js` can be found in the `entities` folder.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我们需要一些*有缺陷的代码文件*。因此，从`debugging tutorial`文件夹中复制`main.js`，`player.js`，`projectile.js`和`enemy.js`脚本，并用这些脚本替换旧的脚本。`main.js`应该位于您的`game`文件夹中，而`enemy.js`可以在`entities`文件夹中找到。
- en: 'Now that your special (read: faulty) scripts are in place, it''s time to restart
    the game. Reload your browser and make sure the cache is empty, otherwise no mistake
    will be shown.'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，您的特殊（即有错误的）脚本已经就位，是时候重新启动游戏了。重新加载您的浏览器，并确保缓存是空的，否则不会显示错误。
- en: 'The game does not load completely as you can see from the following loading
    bar:'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 游戏无法完全加载，如下面的加载栏所示：
- en: '![Exercises in debugging with Chrome and Firebug](img/4568_1_10.jpg)'
  id: totrans-111
  prefs: []
  type: TYPE_IMG
  zh: 在使用Chrome和Firebug进行调试的练习中
- en: This might happen to you regularly while working on a new game. This will, for
    instance, always occur if the dependencies of the different JavaScript files are
    wrong. To see what happened now, open the Chrome debugger.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 这可能经常发生在你开发新游戏时。例如，如果不同JavaScript文件的依赖关系错误，就会经常发生这种情况。要查看现在发生了什么，请打开Chrome调试器。
- en: '![Exercises in debugging with Chrome and Firebug](img/4568_1_11.jpg)'
  id: totrans-113
  prefs: []
  type: TYPE_IMG
  zh: '![使用Chrome和Firebug进行调试的练习](img/4568_1_11.jpg)'
- en: 'Go to the **Console** tab and check out the error message: **i is not defined**
    **main.js:51**. Open the `main.js` script in your editor at the indicated line
    number. And sure enough, there is something wrong as shown in the following code:'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 转到**控制台**选项卡，查看错误消息：**i未定义** **main.js:51**。在编辑器中打开`main.js`脚本，并转到指定的行号。果然，如下代码所示，有一些问题：
- en: '[PRE3]'
  id: totrans-115
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: There is no object called `i`, this is supposed to be `ig` like the others.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 没有叫做`i`的对象，这应该像其他的一样是`ig`。
- en: Now that we fixed this issue, reload the game again. It loads! Great! This does
    not, by definition, mean everything is without errors. Open the debugger and see
    if anything else is bugging your game. Not at the moment, so let's get to exploring.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们解决了这个问题，再次加载游戏。加载成功！太棒了！但这并不意味着一切都没有错误。打开调试器，看看是否还有其他问题困扰着你的游戏。目前没有，所以让我们继续探索。
- en: If all goes "well", your game should hang the moment you wanted to walk to the
    left.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 如果一切“顺利”，你的游戏应该在你想向左走的时候卡住。
- en: '![Exercises in debugging with Chrome and Firebug](img/4568_1_12.jpg)'
  id: totrans-119
  prefs: []
  type: TYPE_IMG
  zh: '![使用Chrome和Firebug进行调试的练习](img/4568_1_12.jpg)'
- en: You get the message, **Cannot read property 'pos' of undefined**. The problem
    is it's so hard to locate where the error actually occurs because an error seems
    to show up in almost every script. However, what we do know is that `pos` is a
    parameter of an entity and that we have pressed the `left` button before the error
    occurred. We should at least check all places where this `left` button is defined
    or used.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 你会收到消息，**无法读取未定义的属性'pos'**。问题是很难确定错误实际发生的位置，因为几乎每个脚本中都会出现错误。但是，我们知道`pos`是实体的一个参数，并且在错误发生之前我们按下了`左`按钮。我们至少应该检查所有定义或使用这个`左`按钮的地方。
- en: 'If you open the `player.js` script, you will find that the commands for moving
    left are rather peculiar as shown in the following code:'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你打开`player.js`脚本，你会发现左移的命令相当奇怪，如下代码所示：
- en: '[PRE4]'
  id: totrans-122
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: So the entity moves to the left, has its animation set to left, and then kills
    itself. Throwing around the random `kill()` functions is not a good thing. In
    this case, the unexpected spot for the `kill()` function caused the player to
    disappear and thus the player has no more position, which created errors further
    down the `update` loop of the game. Remove this `kill()` function and no more
    game crashes should occur.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，实体向左移动，动画设置为左侧，然后自毁。随意使用`kill()`函数是不好的。在这种情况下，`kill()`函数的意外位置导致玩家消失，因此玩家没有了位置，这在游戏的`update`循环中进一步产生了错误。移除这个`kill()`函数，游戏就不会再崩溃了。
- en: So sometimes the console shows an error, but it's still your wits that will
    lead you to the root cause. The console is only a tool, you are the real mastermind.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 有时控制台会显示错误，但是你的智慧仍然会带领你找到根本原因。控制台只是一个工具，你才是真正的主宰。
- en: We have removed all major bugs because Chrome does not indicate bugs at the
    current moment. Make sure to check all levels since different levels often have
    other entities that might be buggy. However, for now, let's get to killing some
    enemies!
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经移除了所有主要的错误，因为Chrome目前没有指示错误。确保检查所有关卡，因为不同的关卡通常会有其他可能出现错误的实体。但是，现在让我们开始杀死一些敌人！
- en: 'You might have noticed that it''s considerably hard to destroy one of those
    nasty creatures. We don''t have any real errors anymore, but maybe something else
    is not going according to the plan. We can''t seem to kill it, so either we don''t
    cause enough damage or it has an enormous amount of health. Let''s dive into the
    two entities that might be involved: `projectile` and `enemy`. We should check
    the `projectile` entity and not the `player` entity because even though the player
    shoots the projectile, it''s the projectile that does the damage. Guns don''t
    kill people, bullets do. Open the `projectile.js` and `enemy.js` scripts, which
    are both in the `entities` folder. Alternatively, you can open the Chrome debugger
    and select the files under the **Scripts** tab.'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 你可能已经注意到，摧毁这些讨厌的生物相当困难。我们不再有真正的错误，但也许其他事情并没有按计划进行。我们似乎无法杀死它，所以要么我们造成的伤害不够，要么它的生命值非常高。让我们深入了解可能涉及的两个实体：`projectile`和`enemy`。我们应该检查`projectile`实体而不是`player`实体，因为尽管玩家射击了抛射物，但是造成伤害的是抛射物。枪不杀人，子弹杀人。打开`projectile.js`和`enemy.js`脚本，它们都在`entities`文件夹中。或者，你可以打开Chrome调试器，在**脚本**选项卡下选择文件。
- en: 'In the `projectile.js` script, look for the following code:'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 在`projectile.js`脚本中，查找以下代码：
- en: '[PRE5]'
  id: totrans-128
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: We will dive into the specifics of this code soon. For now it is enough to know
    that a bullet does `100` damages upon impact with an enemy.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 我们很快就会深入了解这段代码的具体内容。现在知道子弹在撞击敌人时造成`100`点伤害就足够了。
- en: 'Now check out the health of the enemy in the `enemy.js` script. The following
    code shows the health:'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 现在查看`enemy.js`脚本中敌人的生命值。以下代码显示了生命值：
- en: '[PRE6]'
  id: totrans-131
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Yes. That's a problem. The enemy is a thousand times stronger than intended.
    Change the health to `200` and you will be able to kill your enemy with two shots.
    Alternatively, you can set the damage of the `projectile` entity to `100,000`.
    Changing the `damage` property to a large number can be useful in order to appeal
    to players who prefer to see big numbers over modest ones. (those who ever played
    World of Warcraft know what I'm talking about).
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 是的。这是一个问题。敌人比预期的强大一千倍。将生命值改为`200`，你就可以用两发子弹杀死敌人。或者，你可以将`projectile`实体的伤害设置为`100,000`。将`damage`属性改为一个大数值可能对喜欢看到大数值而不是适度数值的玩家有用（那些玩过魔兽世界的人知道我在说什么）。
- en: If you save the code and reload the level, you should have no more problems
    killing your enemies.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你保存代码并重新加载关卡，你应该不会再遇到杀死敌人的问题了。
- en: An alternate way of finding out what might be wrong is by taking a look at the
    individual entity by exploring the DOM. Let's use Firebug for this. If you don't
    have it installed on your Firefox just yet, Google it and install it.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 通过浏览DOM来找出可能出错的另一种方法是查看单个实体。让我们使用Firebug来做这个。如果您的Firefox上还没有安装它，可以搜索并安装它。
- en: 'We shot the enemy twice and found out he has no intention of dying. Instead
    of checking the code, we can have a look at the spawned entity itself by navigating
    through the DOM. To find the enemy''s health you must open your Firebug by pressing
    the bug symbol in your browser and then select the **DOM** tab. Now open the `ig`,
    `game`, and `entities` folders in that order. You will see a numbered list, the
    number being the position of a particular entity in the `entities` array. You
    can now open some of the numbers until you find the enemy with **19800** as the
    **health** value, as shown in the following screenshot:'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 我们射击了敌人两次，发现他并不打算死。我们可以通过浏览DOM来查看生成的实体本身，而不是检查代码。要找到敌人的生命值，您必须通过按下浏览器中的bug符号来打开您的Firebug，然后选择**DOM**选项卡。现在按顺序打开`ig`，`game`和`entities`文件夹。您将看到一个编号列表，数字是`entities`数组中特定实体的位置。现在您可以打开一些数字，直到找到生命值为**19800**的敌人，如下面的截图所示：
- en: '![Exercises in debugging with Chrome and Firebug](img/4568_1_13.jpg)'
  id: totrans-136
  prefs: []
  type: TYPE_IMG
  zh: '![使用Chrome和Firebug进行调试的练习](img/4568_1_13.jpg)'
- en: The enemy is buried in a list of other entities, but by his properties we can
    see what is going on here. We shot it twice and now it has a **health** value
    of **19800**. That makes sense because the damage of the projectile is **100**.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 敌人被埋在其他实体的列表中，但通过他的属性我们可以看出这里发生了什么。我们射击了两次，现在它的**health**值为**19800**。这是有道理的，因为抛射物的伤害是**100**。
- en: Mastering the DOM takes a bit of effort but it is very useful to find out if
    your code works as intended. In addition, you get a better insight on how the
    core elements of ImpactJS are related to each other. It's recommended to spend
    some time here to get a feel of the overall structure before proceeding.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 掌握DOM需要一些努力，但对于找出代码是否按预期工作非常有用。此外，您可以更好地了解ImpactJS的核心元素如何相互关联。建议在继续之前花一些时间在这里，以了解整体结构。
- en: So we have seen three different types of errors, which rank from easily solvable
    to rather difficult to find and fix. In the first scenario, the console tells
    you that there is an error at one spot and you go and set it right. The second
    scenario shows the game producing errors on several spots at once with a single
    root cause. It is up to you and your logical brain to deduct what crashed the
    game. Finally, we have the unexpected results, which are not really errors. The
    console doesn't show an error for these because it can't read your mind (maybe
    in a next version, who knows). These are hardest to find and will take some testing
    from your side.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 所以我们已经看到了三种不同类型的错误，从容易解决到相当难以找到和修复。在第一种情况下，控制台告诉你有一个地方出现了错误，你去设置它就对了。第二种情况显示游戏在多个地方同时产生错误，但只有一个根本原因。由你和你的逻辑大脑来推断是什么导致了游戏崩溃。最后，我们有意想不到的结果，这些并不是真正的错误。控制台不会显示这些错误，因为它无法读取你的思想（也许在下一个版本中，谁知道）。这些是最难找到的，需要你进行一些测试。
- en: 'Summing up the preceding content, the conclusions are as follows:'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 总结前面的内容，结论如下：
- en: Both Firefox and Chrome features are very capable debuggers.
  id: totrans-141
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Firefox和Chrome都具有非常强大的调试器功能。
- en: Firebug is especially recommended for exploring the DOM of a game.
  id: totrans-142
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Firebug特别推荐用于探索游戏的DOM。
- en: Chrome has eight interesting components of which the most useful one is the
    console, which detects errors.
  id: totrans-143
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Chrome有八个有趣的组件，其中最有用的是控制台，可以检测错误。
- en: 'Errors can come in different types: syntax errors, code logic errors, and game
    logic errors.'
  id: totrans-144
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 错误可以有不同类型：语法错误，代码逻辑错误和游戏逻辑错误。
- en: Most syntax errors can be detected preemptively by a good script editor.
  id: totrans-145
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 大多数语法错误可以通过一个好的脚本编辑器预先检测到。
- en: A simple syntax error will show up in the debugger console as a single line
    error. This makes it easy to locate and repair.
  id: totrans-146
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个简单的语法错误会在调试器控制台中显示为单行错误。这样很容易定位和修复。
- en: Code logic errors can be hard to detect since the syntax is often correct at
    its root but will show errors on other locations.
  id: totrans-147
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 代码逻辑错误很难检测，因为语法通常在根本上是正确的，但会在其他位置显示错误。
- en: Game logic errors are very subjective errors since they will not make the game
    crash but result in poor gameplay.
  id: totrans-148
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 游戏逻辑错误是非常主观的错误，因为它们不会导致游戏崩溃，但会导致游戏玩法不佳。
- en: Debugging with ImpactJS
  id: totrans-149
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用ImpactJS进行调试
- en: 'ImpactJS itself comes with a debugger built into the engine. However, it is
    turned off by default and can be turned on by making a small modification to the
    `main.js` script. The `main.js` script is (as the name suggests) the main script
    of your game and calls all your other JavaScript files. It is this script that
    is loaded into the HTML canvas in your browser and is looped through over and
    over again in order to make your game run. The `main.js` script can be found in
    the `game` folder and should have come together with your Impact license, as shown
    in the following code snippet:'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: ImpactJS本身带有一个内置的调试器。但是，默认情况下它是关闭的，可以通过对`main.js`脚本进行小修改来打开。`main.js`脚本（顾名思义）是您的游戏的主要脚本，并调用所有其他JavaScript文件。这个脚本加载到您的浏览器的HTML画布中，并一遍又一遍地循环，以使您的游戏运行。`main.js`脚本可以在`game`文件夹中找到，并且应该随Impact许可证一起提供，如下面的代码片段所示：
- en: '[PRE7]'
  id: totrans-151
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'Everything starts with the `ig` (Impact Game) object. This object is what you
    will be looking for in your DOM when you are debugging your game and checking
    variables and functions. In the `main.js` script, there is a call to the `.module`
    function, which defines `game.main` to be a module of your game. The module name
    needs to be the same as its location and filename! So the JavaScript file `lib/game/entities/bigmonster.js`
    will be finally defined as `game.entities.bigmonster`. Adding the `debug` panel
    to the game can be done by following these steps:'
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 一切都始于`ig`（Impact Game）对象。这个对象是您在调试游戏并检查变量和函数时要查找的东西。在`main.js`脚本中，有一个对`.module`函数的调用，它将`game.main`定义为游戏的一个模块。模块名称需要与其位置和文件名相同！因此，JavaScript文件`lib/game/entities/bigmonster.js`最终将被定义为`game.entities.bigmonster`。通过以下步骤可以向游戏添加`debug`面板：
- en: The `.requires()` function calls all the scripts it needs to be able to execute
    the code successfully. Not every module will need this but the `main.js` script
    will always at least require the `impact` library.
  id: totrans-153
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`.requires()`函数调用所有需要执行代码的脚本。并非每个模块都需要这样做，但`main.js`脚本将始终至少需要`impact`库。'
- en: It is in this function call that you will want to add the `impact.debug.debug`
    script, which (as you guessed) calls the script `debug.js` in the folder `lib/impact/debug`.
  id: totrans-154
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在这个函数调用中，您将希望添加`impact.debug.debug`脚本，它（正如您猜到的）调用`lib/impact/debug`文件夹中的`debug.js`脚本。
- en: Save the `main.js` script and rerun `localhost/myfirstawesomegame` in Chrome.
  id: totrans-155
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保存`main.js`脚本，并在Chrome中重新运行`localhost/myfirstawesomegame`。
- en: If everything goes according to the plan, you should now see a new toolbar at
    the bottom of your browser called **impact.debug**.
  id: totrans-156
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果一切按计划进行，您现在应该在浏览器底部看到一个名为**impact.debug**的新工具栏。
- en: 'The debugger has three tabs: **Background Maps**, **Entities**, and **Performance**
    and four key indicators in the top-right corner.'
  id: totrans-157
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 调试器有三个选项卡：**背景地图**，**实体**和**性能**，以及右上角的四个关键指标。
- en: 'These indicators from left to right are as follows:'
  id: totrans-158
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从左到右，这些指标如下：
- en: The number of milliseconds needed to run one frame of the game.
  id: totrans-159
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 运行游戏一帧所需的毫秒数。
- en: The **fps** indicator or frames per second of the game.
  id: totrans-160
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 游戏的每秒帧数指示器。
- en: The number of **draws** that have taken place. This includes characters if you
    have a conversation going on.
  id: totrans-161
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 已经发生的**绘制**次数。如果您正在进行对话，这将包括角色。
- en: On the right-hand side you find the number of entities currently in the game.
  id: totrans-162
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在右侧，您会找到当前游戏中的实体数量。
- en: 'While these indicators quickly show you the most important things to take into
    account, the three tabs as shown in the following screenshot go somewhat more
    in depth:'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然这些指标快速向您展示了需要考虑的最重要的事情，但如下图所示的三个选项卡更深入地展示了：
- en: '![Debugging with ImpactJS](img/4568_1_14.jpg)'
  id: totrans-164
  prefs: []
  type: TYPE_IMG
  zh: '![使用ImpactJS进行调试](img/4568_1_14.jpg)'
- en: If you select **Background Maps**, you will see all the graphical layers the
    game has. Let's say you want to run in front of a tree with your epic character;
    you will expect part of the tree to disappear behind the character and not vice
    versa. When the character moves behind the tree you will want it to be hidden
    by it. So you see, you need at least two layers in order to draw a tree like this.
    One layer comes in front of the player (most likely the treetop), the other behind
    it (the trunk).
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 如果选择**背景地图**，您将看到游戏拥有的所有图形图层。假设您想让您的史诗角色在树前奔跑；您会期望树的一部分消失在角色的后面，而不是相反。当角色移动到树后面时，您希望它被树隐藏。因此，您至少需要两个图层才能绘制出这样的树。一个图层在玩家前面（很可能是树梢），另一个在玩家后面（树干）。
- en: 'In the part of the debugger, as shown in the following screenshot, you can
    turn layers on and off. If a layer is set to be prerendered, you will be able
    to see the chunks of the layer. In the following screenshot, **Checks & Collisions**
    is turned on while the other options are turned off:'
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 在调试器的部分中，您可以打开和关闭图层。如果图层设置为预渲染，您将能够看到图层的块。在以下截图中，**检查和碰撞**被打开，而其他选项被关闭：
- en: '![Debugging with ImpactJS](img/4568_1_15.jpg)'
  id: totrans-167
  prefs: []
  type: TYPE_IMG
  zh: '![使用ImpactJS进行调试](img/4568_1_15.jpg)'
- en: With the **Entities** tab you can turn several interesting indicators on and
    off. If you turn on **Show Collision Boxes**, you will be able to see a red box
    around your character and several (invisible) entities that constantly check for
    collision. These red boxes indicate the borders at which the point collision is
    triggered. This is important because if the collision box around your hero character
    is much bigger than the image, he might not fit through doors anymore or get mysteriously
    hit by enemies who are still far away. You can set the size of these collision
    boxes yourself when writing your code, allowing for some interesting effects,
    such as only being able to kill a boss by shooting him in the eyeball.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 使用**实体**选项卡，您可以打开和关闭几个有趣的指标。如果您打开**显示碰撞框**，您将能够看到您的角色周围的红色框以及几个（不可见的）实体，它们不断检查碰撞。这些红色框指示触发点碰撞的边界。这很重要，因为如果围绕您的英雄角色的碰撞框比图像大得多，他可能无法再通过门，或者会神秘地被远处的敌人击中。在编写代码时，您可以自己设置这些碰撞框的大小，从而产生一些有趣的效果，比如只能通过射中眼球来杀死boss。
- en: When you turn on **Show velocities**, you should walk around with your character.
    You will now see a line sticking out in front of him, which is an indication of
    how fast he is currently going.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 当您打开**显示速度**时，您应该让角色四处走动。现在您将看到一条伸出在他前面的线，这是他当前移动速度的指示。
- en: By showing names and targets you can see all named entities and their targets.
    It's a fun feature but you are better off with the ImpactJS level editor (**Weltmeister**)
    for your purpose.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 通过显示名称和目标，您可以看到所有命名实体及其目标。这是一个有趣的功能，但对于您的目的，最好使用ImpactJS级别编辑器（**Weltmeister**）。
- en: 'Finally the **Performance** tab shows you how much effort goes in the different
    tasks that the browser needs to perform for running your game, as shown in the
    following screenshot:'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，**性能**选项卡向您展示了浏览器为运行游戏需要执行的不同任务所付出的努力，如下图所示：
- en: '![Debugging with ImpactJS](img/4568_1_16.jpg)'
  id: totrans-172
  prefs: []
  type: TYPE_IMG
  zh: '![使用ImpactJS进行调试](img/4568_1_16.jpg)'
- en: 'Two horizontal lines are visible on the previous chart: the **33ms** and **16ms**
    lines. These lines correspond to an approximate frame rate of 60 fps and 30 fps.
    Having a game run below 30 fps is inadvisable since it will look as if the game
    is lagging, and there is no fun in playing such games. If you see that your game
    lags, check which part is taking all the juice and try to fix that.'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一个图表上可以看到两条水平线：**33ms**和**16ms**。这些线对应大约60fps和30fps的帧率。游戏运行在30fps以下是不可取的，因为看起来就像游戏在延迟，这样玩起来就没有乐趣。如果你发现游戏延迟，检查哪个部分占用了所有的资源，然后尝试修复它。
- en: In most cases, drawing the game (graphics) takes up most of the resources. This
    is indicated by **Draw** in the **Performance** tab. If this happens, try to work
    with fewer layers or bigger tiles. Also prerendering can increase performance
    in this case.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 在大多数情况下，绘制游戏（图形）占用了大部分资源。这在**性能**选项卡中用**Draw**表示。如果发生这种情况，尝试减少图层或增大瓷砖的大小。此外，预渲染在这种情况下可以提高性能。
- en: Another part of the resources is taken up by your entities and how they interact.
    If you have thousands of different entities swarming over your screen because
    you decided that a flock of seagulls should be represented by a separate entity
    for each bird, you might get into trouble quickly.
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 资源的另一部分由你的实体及其交互占用。如果你的屏幕上有成千上万个不同的实体，因为你决定一群海鸥应该由每只鸟的单独实体表示，你可能会很快遇到麻烦。
- en: There is a separate indicator for system lag, which is a parameter you have
    no power over since this shows how well the browser performs. Quite regularly
    the system lag creates spikes that drop the frame rate. However, in most cases
    it cannot really be felt because the really huge spikes come and go so quickly.
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 系统延迟有一个单独的指示器，这是一个你无法控制的参数，因为它显示了浏览器的性能。相当频繁地，系统延迟会导致帧率下降。然而，在大多数情况下，它实际上并不会被感觉到，因为真正巨大的波动来得快去得也快。
- en: 'Summing up the preceding content, the conclusions are as follows:'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 总结前面的内容，得出以下结论：
- en: ImpactJS comes with its own debugger but is turned off by default
  id: totrans-178
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ImpactJS自带调试器，默认情况下是关闭的
- en: The debugger has several components that allow insight into entity behavior,
    collision, and game performance
  id: totrans-179
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 调试器有几个组件，可以洞察实体行为、碰撞和游戏性能
- en: ImpactJS debugger is extremely useful for tracking performance issues and should
    always remain turned on during development
  id: totrans-180
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ImpactJS调试器在跟踪性能问题方面非常有用，在开发过程中应始终保持开启状态
- en: Which helpful tools are out there
  id: totrans-181
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 有哪些有用的工具
- en: If you have a decent script editor, the ImpactJS library, a (local) server,
    and a browser with debug capabilities, you are set to build an ImpactJS game.
    However, there are several interesting tools out there that can facilitate your
    journey quite a bit. There is **Ejecta** that comes with ImpactJS and is a more
    efficient way of releasing games for iPhone and iPad. **AppMobi** is a great tool
    for preparing your game for the webstores. **PhoneGap** is an open source framework
    for creating apps. With **lawnchair** you can more easily make use of local data
    storage. There is **Scoreoid** , a free game cloud service. And finally **Playtomic**
    —a game analytics tool. In this chapter, we will take a short peak at each one
    of these.
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你有一个不错的脚本编辑器、ImpactJS库、（本地）服务器和一个具有调试功能的浏览器，你就可以构建一个ImpactJS游戏。然而，还有一些有趣的工具可以大大简化你的开发过程。有**Ejecta**，它与ImpactJS一起提供，是为iPhone和iPad发布游戏的更有效的方式。**AppMobi**是一个为网络商店准备游戏的好工具。**PhoneGap**是一个创建应用程序的开源框架。使用**lawnchair**可以更轻松地使用本地数据存储。还有**Scoreoid**，一个免费的游戏云服务。最后是**Playtomic**——一个游戏分析工具。在本章中，我们将简要介绍其中的每一个。
- en: Ejecta
  id: totrans-183
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Ejecta
- en: 'Ejecta is a fine piece of ingenuity, which is free to download at the following
    link:'
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: Ejecta是一款精巧的工具，可以免费下载，链接如下：
- en: '[http://impactjs.com/ejecta](http://impactjs.com/ejecta)'
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: '[http://impactjs.com/ejecta](http://impactjs.com/ejecta)'
- en: It totally replaces **iOSImpact** , which was a way of preparing the game as
    a native app for the Apple store. Dominic calls Ejecta a "browser without the
    browser". It has no overhead, only the canvas in which your game features and
    the audio elements.
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 它完全取代了**iOSImpact**，这是一种为苹果商店准备游戏的本地应用程序的方式。Dominic称Ejecta为“没有浏览器的浏览器”。它没有额外开销，只有你的游戏特性和音频元素的画布。
- en: Ejecta works well for ImpactJS but it can be used for other apps as well. Like
    the former iOSImpact, it makes use of **OpenGL** for the animation and **OpenAL**
    for the audio, which drastically increases game performance. If you plan on releasing
    your game to the iPhone, Ejecta is certainly worth taking a look at.
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: Ejecta对ImpactJS效果很好，但也可以用于其他应用程序。就像以前的iOSImpact一样，它利用**OpenGL**进行动画和**OpenAL**进行音频，这大大提高了游戏性能。如果你计划将游戏发布到iPhone上，Ejecta绝对值得一看。
- en: AppMobi
  id: totrans-188
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: AppMobi
- en: AppMobi offers an **XDK** (**Cross platform Development Kit**), which goes very
    well with ImpactJS. So well that they actually have a separate development kit
    for ImpactJS (Impact XDK) apart from their normal one (AppMobi XDK).
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: AppMobi提供了一个**XDK**（**跨平台开发工具包**），它与ImpactJS非常匹配。它们实际上为ImpactJS（Impact XDK）和普通XDK分别提供了一个单独的开发工具包。
- en: Use of the development kit is free but extra services such as their cloud service,
    live update features, and secure payment are available for an extra fee. You can
    find everything on [http://www.appmobi.com/](http://www.appmobi.com/).
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 开发工具包是免费的，但额外的服务，如他们的云服务、实时更新功能和安全支付，需要额外付费。你可以在[http://www.appmobi.com/](http://www.appmobi.com/)找到所有信息。
- en: The Impact XDK will only allow you to work on an Impact Game if you have registered
    your Impact key in your account and included their JavaScript library. When set
    up properly, the XDK allows you to simulate several devices such as iPad, iPhone,
    Galaxy, and so on. The XDK only runs in Google Chrome, though that isn't really
    much of a weak spot. You can open a script editor, but it is in no way as good
    as the ones we looked at before. You have the option of calling a debugger but
    it is just the Google Chrome debugger, not one they built themselves.
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 只有在注册了Impact密钥并包含了他们的JavaScript库的情况下，Impact XDK才允许您在Impact游戏上工作。设置正确后，XDK允许您模拟iPad、iPhone、Galaxy等多个设备。XDK只在Google
    Chrome中运行，尽管这并不是一个真正的弱点。您可以打开脚本编辑器，但它并不像我们之前看过的那些编辑器那样好。您可以选择调用调试器，但它只是Google
    Chrome调试器，而不是他们自己构建的调试器。
- en: The **Apphub** (which is your control center) allows you to build and test apps
    before sending them to the shops. In order to release a game you will, of course,
    still need the developer accounts for the platform you want to service.
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: '**Apphub**（您的控制中心）允许您在将应用程序发送到商店之前构建和测试应用程序。当然，要发布游戏，您仍然需要为您想要服务的平台拥有开发者帐户。'
- en: AppMobi also has what they call **direct canvas acceleration** , which increases
    the game's performance by bypassing the canvas element of your games. It is very
    similar to what Ejecta does but then it is delivered by AppMobi.
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: AppMobi还拥有他们所谓的**直接画布加速**，它通过绕过游戏的画布元素来提高游戏的性能。这与Ejecta所做的非常相似，但是它是由AppMobi提供的。
- en: The following screenshot is an overview of the different terrains that AppMobi
    can provide, which will give relief to some developers. While AppMobi is only
    of limited use while scripting your game, it can provide excellent support during
    testing and deployment.
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图是AppMobi可以提供的不同地形的概述，这将给一些开发人员带来一些帮助。虽然在编写游戏脚本时AppMobi的用途有限，但在测试和部署过程中可以提供出色的支持。
- en: '![AppMobi](img/4568_1_19.jpg)'
  id: totrans-195
  prefs: []
  type: TYPE_IMG
  zh: '![AppMobi](img/4568_1_19.jpg)'
- en: There is no possibility of directly connecting to a mobile device. However,
    you can send a link to anyone who owns one. This way your friends can test your
    latest creation if they have the **AppMobi applab** installed.
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 无法直接连接到移动设备。但是，您可以向任何拥有移动设备的人发送链接。这样，您的朋友可以在安装了**AppMobi applab**的情况下测试您的最新创作。
- en: All in all, AppMobi is easy to get started with and certainly worth considering
    if you want some help with the entire process of releasing a game, though for
    development you are almost entirely on your own.
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 总的来说，AppMobi易于入门，并且在整个发布游戏的过程中值得考虑，尽管在开发过程中您几乎完全是靠自己。
- en: PhoneGap
  id: totrans-198
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: PhoneGap
- en: PhoneGap (formerly known as **Cordova** ) is another XDK for developing mobile-native
    applications.
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: PhoneGap（以前称为**Cordova**）是另一个用于开发移动本机应用程序的XDK。
- en: PhoneGap can be compared to AppMobi with respect to functionalities but AppMobi
    is very visual and more newbie-friendly. PhoneGap enables you to build apps that
    are native to the **OS** (**operating system**), integrate **PayPal** , and use
    push notifications.
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: PhoneGap可以与AppMobi相比较，就功能而言，但AppMobi非常直观，更适合新手。PhoneGap使您能够构建本地**操作系统**的应用程序，集成**PayPal**，并使用推送通知。
- en: 'As shown in the following screenshot, PhoneGap provides a way to build your
    app in order to distribute to the different channels:'
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 如下截图所示，PhoneGap提供了一种构建您的应用程序以分发到不同渠道的方法：
- en: '![PhoneGap](img/4568_1_21.jpg)'
  id: totrans-202
  prefs: []
  type: TYPE_IMG
  zh: '![PhoneGap](img/4568_1_21.jpg)'
- en: Getting started with PhoneGap is a bit more complicated than AppMobi. You will
    need to install **eclipse** (which is free), the android development tools, and
    SDK. Installing **Git** might be necessary for targeting specific platforms. If
    you want to release for iPhone or iPad, you will also need **xcode** .
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 开始使用PhoneGap比AppMobi要复杂一些。您需要安装**eclipse**（免费）、android开发工具和SDK。安装**Git**可能是针对特定平台的必要条件。如果要发布到iPhone或iPad，您还需要**xcode**。
- en: In all, it's definitely worth taking a look at. Luckily they have very good
    documentation because it tends to get a bit complicated. More information can
    be found on [http://phonegap.com/](http://phonegap.com/).
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 总的来说，这绝对值得一看。幸运的是，它们有非常好的文档，因为它往往会变得有点复杂。更多信息可以在[http://phonegap.com/](http://phonegap.com/)上找到。
- en: lawnchair
  id: totrans-205
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: lawnchair
- en: lawnchair offers a free and easy way of using **local storage** . Local storage
    is used for storing your data (saving files and high scores) on devices that run
    your game.
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: lawnchair提供了一种免费且简单的使用**本地存储**的方法。本地存储用于在运行您的游戏的设备上存储您的数据（保存文件和高分）。
- en: There are many advantages in saving everything on the client side over saving
    on the server side. For one, you don't need to know SQL. Websites save everything
    in their databases by the use of SQL, PHP, and JavaScript. If you use local storage,
    you only need JavaScript. The amount of storage space is not restricted by your
    server but by your user. So if you have many gamers who each use a small amount
    of space, you will never get into trouble with local storage while you might get
    into trouble when solely using server storage. Since it doesn't need to be transmitted
    to a server at all times, you can play your games offline and still keep your
    saves.
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 在客户端保存所有内容相比在服务器端保存有许多优势。首先，您不需要了解SQL。网站通过使用SQL、PHP和JavaScript将所有内容保存在它们的数据库中。如果您使用本地存储，只需要JavaScript。存储空间的数量不受服务器限制，而是由用户限制。因此，如果您有许多玩家，每个玩家使用少量空间，您在本地存储时永远不会遇到麻烦，而在仅使用服务器存储时可能会遇到麻烦。由于不需要始终传输到服务器，您可以离线玩游戏并保留您的存档。
- en: Those are all pretty good advantages but how does lawnchair work? lawnchair
    is a JavaScript library just like ImpactJS (but a free one this time). You only
    need to include it with your other JavaScript files and you can start using the
    specific commands to save data.
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 这些都是相当不错的优势，但是lawnchair是如何工作的呢？lawnchair就像ImpactJS一样是一个JavaScript库（但这次是免费的）。您只需要将它与其他JavaScript文件一起包含，就可以开始使用特定的命令来保存数据。
- en: 'Including the lawnchair functionalities can be done by downloading the library
    from [http://brian.io/lawnchair/](http://brian.io/lawnchair/) and including the
    `lawnchair.js` script in your `index.html` file as shown in the following code
    example:'
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 包括lawnchair功能可以通过从[http://brian.io/lawnchair/](http://brian.io/lawnchair/)下载库并在您的`index.html`文件中包含`lawnchair.js`脚本来完成，如下面的代码示例所示：
- en: '[PRE8]'
  id: totrans-210
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: lawnchair uses JSON to save data in the DOM of your game. If you want an example
    of what this looks like, you can open any ImpactJS `level` script in the code
    editor of your choice since these scripts are also coded with JSON.
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: lawnchair使用JSON在游戏的DOM中保存数据。如果您想要查看这是什么样子的示例，您可以在代码编辑器中打开任何ImpactJS“level”脚本，因为这些脚本也是用JSON编码的。
- en: You will want to take a look at lawnchair if your game is going to require **save
    games**, **high scores**, **game progression**, or any other option that needs
    to be kept track of so the player wouldn't need to start all over. More information
    can be found on [http://brian.io/lawnchair/](http://brian.io/lawnchair/).
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您的游戏需要**保存游戏**、**高分**、**游戏进度**或任何其他需要跟踪的选项，以便玩家不需要重新开始，您将需要查看lawnchair。更多信息可以在[http://brian.io/lawnchair/](http://brian.io/lawnchair/)上找到。
- en: Scoreoid
  id: totrans-213
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Scoreoid
- en: Scoreoid is a **gaming cloud service** aimed at taking care of some advanced
    features such as **leaderboards** , **player login** , and **ingame notifications**
    .
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: Scoreoid是一个旨在处理一些高级功能的**游戏云服务**，如**排行榜**、**玩家登录**和**游戏内通知**。
- en: 'In order to use Scoreoid and its functions, you need to register on their website
    and implement their code within yours where necessary. There are different codes
    for different functions. The following code snippet is an example template for
    storing information about people loading your game:'
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 要使用Scoreoid及其功能，您需要在他们的网站上注册，并在必要时在您的代码中实现他们的代码。不同的功能有不同的代码。以下代码片段是存储有关加载游戏的人的信息的示例模板：
- en: '[PRE9]'
  id: totrans-216
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: You fill out the **API URL**, your own **API key** , **game ID** , and the type
    of **data coding** for transferring (XML or JSON) and you're good to go.
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 您需要填写**API URL**、您自己的**API密钥**、**游戏ID**和用于传输的**数据编码**类型（XML或JSON），然后就可以开始了。
- en: An account is free but they have the option of a premium account, which is also
    free. But that is just because they are currently still working on defining the
    extra features for a premium account. You can subscribe on their website [http://www.scoreoid.net/](http://www.scoreoid.net/).
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 账户是免费的，但他们也有高级账户的选项，这也是免费的。但这只是因为他们目前仍在努力定义高级账户的额外功能。您可以在他们的网站[http://www.scoreoid.net/](http://www.scoreoid.net/)上订阅。
- en: Playtomic
  id: totrans-219
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Playtomic
- en: Playtomic is the Google analytics of game monitoring.
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: Playtomic是游戏监控的Google分析。
- en: The basic account is for free but the premium one is currently priced at *$15/month*
    or *$120/year*. You can subscribe on their website [http://www.playtomic.com](http://www.playtomic.com).
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 基本账户是免费的，但高级账户目前的价格为每月*15美元*或每年*120美元*。您可以在他们的网站[http://www.playtomic.com](http://www.playtomic.com)上订阅。
- en: 'Getting the flow of analytics up and running isn''t too difficult. In your
    `index.html` file you include a reference to their JavaScript library as shown
    in the following script:'
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 让分析流程运行起来并不太困难。在您的`index.html`文件中，您需要包含对他们JavaScript库的引用，如下面的脚本所示：
- en: '[PRE10]'
  id: totrans-223
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'In your `main.js` script, you can then add a command to send the data to their
    servers as follows:'
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，在您的`main.js`脚本中，您可以添加一个命令将数据发送到他们的服务器，如下所示：
- en: '[PRE11]'
  id: totrans-225
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'These two pieces of code are suggested by Playtomic. However, an error might
    occur if you send the data to their server in plain text. Therefore it is best
    to replace the script type `text` by `application` as shown in the following code
    snippet:'
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 这两段代码是Playtomic建议的。但是，如果您以纯文本形式将数据发送到他们的服务器，可能会出现错误。因此，最好将脚本类型`text`替换为`application`，如下面的代码片段所示：
- en: '[PRE12]'
  id: totrans-227
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: one.com webhost
  id: totrans-228
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: one.com webhost
- en: A **webhost** is what you will need if you want to place your own game on your
    own website.
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您想将自己的游戏放在自己的网站上，您将需要**webhost**。
- en: You don't always need your own website since cloud hosts such as Scoreoid also
    allow you to put your game online. However, sometimes it's nice to have your own
    little place on the World Wide Web.
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: 您并不总是需要自己的网站，因为像Scoreoid这样的云主机也允许您将游戏放在网上。然而，有时在全球网络上拥有自己的小地方也是不错的。
- en: '[one.com](http://www.one.com) sells web space and a domain name in one package.
    The price for this service is pretty ok, especially in comparison with what you
    need to do to get the same result. You would need to have a PC with XAMPP installed,
    and it should be up and running at all times. In addition, you would still have
    to buy a domain name if you are serious, or get a free domain from somewhere and
    reroute your IP to it. If your IP would remain the same at all times, this would
    be feasible. However, more often than not, this is a premium service of Internet
    providers. You can get an account at [http://www.one.com](http://www.one.com).'
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: '[one.com](http://www.one.com)以一种包的形式出售网络空间和域名。这项服务的价格相当合理，特别是与您需要做的事情相比。您需要有安装了XAMPP的PC，并且它应该一直运行。此外，如果您是认真的，您仍然需要购买一个域名，或者从其他地方获得一个免费的域名并将您的IP重定向到它。如果您的IP始终保持不变，这是可行的。然而，更多时候，这是互联网提供商的高级服务。您可以在[http://www.one.com](http://www.one.com)上注册一个账户。'
- en: 'If you want to use web hosting, more providers are out there, but downloading
    and installing **FileZilla** is recommended in all cases. FileZilla is an efficient
    file transfer program, which is just what you need to get all your files from
    your PC to a server somewhere in the desert. FileZilla can be downloaded at the
    following link:'
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您想使用web主机，还有更多的提供商，但在所有情况下都建议下载和安装**FileZilla**。FileZilla是一个高效的文件传输程序，这正是您需要的，可以将您的所有文件从PC传输到沙漠中的某个服务器。FileZilla可以在以下链接下载：
- en: '[http://filezilla-project.org/](http://filezilla-project.org/)'
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: '[http://filezilla-project.org/](http://filezilla-project.org/)'
- en: 'Summing up the preceding content, the conclusions are as follows:'
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: 总结前面的内容，结论如下：
- en: There are a lot of tools out there that will make your life as a game developer
    much more agreeable
  id: totrans-235
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 有很多工具可以让您作为游戏开发者的生活更加愉快
- en: Ejecta is an efficient solution for releasing games to iPad and iPhone
  id: totrans-236
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Ejecta是将游戏发布到iPad和iPhone的高效解决方案
- en: AppMobi is a free cloud tool, which can help with releasing and developing almost
    every distribution channel
  id: totrans-237
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: AppMobi是一个免费的云工具，可以帮助发布和开发几乎每个分发渠道。
- en: PhoneGap has a lot in common with AppMobi albeit slightly more complicated to
    work with
  id: totrans-238
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: PhoneGap与AppMobi有很多共同之处，尽管稍微复杂一些
- en: lawnchair provides a way of addressing local data storage
  id: totrans-239
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: lawnchair提供了一种处理本地数据存储的方式
- en: Scoreoid is a free game cloud service, which will host your game and supply
    features such as leaderboard integration
  id: totrans-240
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Scoreoid是一个免费的游戏云服务，它将托管您的游戏并提供诸如排行榜集成之类的功能
- en: Playtomic is a game analytics tool allowing you to tag certain elements of your
    game and store the data on their servers
  id: totrans-241
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Playtomic是一款游戏分析工具，允许您标记游戏的某些元素并将数据存储在他们的服务器上
- en: Summary
  id: totrans-242
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this first chapter we have made our preparations as a game developer. We
    have set up a local server, which we can use as a development and initial test
    environment. In order to write our code we need a script editor, so we briefly
    went over some of the editors out there. Debugging is one of the main skills of
    a programmer; for this we can not only use the Chrome and Firefox debuggers but
    also the ImpactJS debug module. We finished by taking a look at several very helpful
    tools for ImpactJS game development.
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们作为游戏开发者做好了准备工作。我们已经建立了一个本地服务器，可以用作开发和初始测试环境。为了编写我们的代码，我们需要一个脚本编辑器，因此我们简要地介绍了一些编辑器。调试是程序员的主要技能之一；为此，我们不仅可以使用Chrome和Firefox调试器，还可以使用ImpactJS调试模块。最后，我们看了一些对ImpactJS游戏开发非常有帮助的工具。
- en: Now we have everything ready to go. We will dive into ImpactJS by messing around
    with a small premade example game in the next chapter.
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经准备就绪。在下一章中，我们将通过玩弄一个小的预制示例游戏来深入了解ImpactJS。
