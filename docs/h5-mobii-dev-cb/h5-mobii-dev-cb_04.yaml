- en: Chapter 4. Building Fast and Responsive Websites
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第4章。构建快速响应的网站
- en: 'In this chapter, we will cover:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖：
- en: Building pages using basic HTML5 markup
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用基本的HTML5标记构建页面
- en: Using CSS3 features for progressive enhancement
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用CSS3功能进行渐进增强
- en: Applying responsive design with media query
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 应用响应式设计与媒体查询
- en: Using dynamic loading
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用动态加载
- en: Applying user agent detection
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 应用用户代理检测
- en: Adding mobile bookmark bubble to the home page
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在主页上添加移动书签气泡
- en: Building Contact page with textarea and autogrow forms
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用文本区域和自动增长表单构建联系页面
- en: Making buttons with instant response
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 制作具有即时响应的按钮
- en: Hiding WebKit chrome
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 隐藏WebKit chrome
- en: Building a mobile sitemap
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 构建移动站点地图
- en: Introduction
  id: totrans-12
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 介绍
- en: On mobile devices, bandwidth is not always as good as on a desktop computer.
    If you are on a slow 3G network, things can get loaded much slower than on a Wi-Fi
    hotspot. Even for Wi-Fi connections, many mobile browsers process slower than
    desktop computers. So when we create mobile sites, they have to be fast and responsive.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 在移动设备上，带宽并不总是像在台式电脑上那样好。如果您在一个慢速的3G网络上，加载速度可能比在Wi-Fi热点上慢得多。即使对于Wi-Fi连接，许多移动浏览器的处理速度也比台式电脑慢。因此，当我们创建移动站点时，它们必须快速且响应迅速。
- en: 'From this chapter onwards, we will also start to introduce HTML5 features.
    HTML5 is a set of technologies consisting of semantics, new CSS rules and properties,
    and new JavaScript APIs which could be used to build better structured web pages
    and powerful web applications. The following are the eight main HTML5 features:'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 从本章开始，我们还将开始介绍HTML5功能。HTML5是一组技术，包括语义、新的CSS规则和属性，以及新的JavaScript API，可用于构建结构更好的网页和功能强大的Web应用程序。以下是八个主要的HTML5功能：
- en: Semantics
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 语义
- en: Offline and storage
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 离线和存储
- en: Device access
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 设备访问
- en: Connectivity
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 连接
- en: Multimedia
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 多媒体
- en: 3D, graphics, and effects
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 3D、图形和效果
- en: Performance and integration
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 性能和集成
- en: CSS3
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: CSS3
- en: Not all of these features are mobile exclusive; some are related more to mobile
    web, while some are more general for both mobile and desktop web. We will talk
    about each of these features and see how best they could help with our mobile
    development.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 并非所有这些功能都是专门针对移动设备的；有些与移动Web更相关，而有些则更适用于移动和桌面Web。我们将讨论每个功能，并看看它们如何最好地帮助我们的移动开发。
- en: Based on the examples created using the new semantic tags and CSS3, we will
    discuss many ways to fully leverage what the mobile browser is offering and how
    to build a website using these unique features.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 基于使用新的语义标记和CSS3创建的示例，我们将讨论充分利用移动浏览器提供的内容以及如何使用这些独特功能构建网站的许多方法。
- en: Building pages using HTML5 semantics
  id: totrans-25
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用HTML5语义构建页面
- en: 'Target device: cross-browser'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 目标设备：跨浏览器
- en: HTML5 introduced a richer set of tags; these tags give meaning to structure.
    Semantics is a fundamental aspect of HTML5.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: HTML5引入了更丰富的标签集；这些标签赋予结构以含义。语义是HTML5的一个基本方面。
- en: We won't be going through all the tags here, but will cover some of the most
    commonly used ones.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 我们不会在这里介绍所有标签，但会涵盖一些最常用的标签。
- en: Getting ready
  id: totrans-29
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: First, let's create a new HTML file, and name it `ch04r01.html`. Let's create
    a fictional site about music.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，让我们创建一个新的HTML文件，并将其命名为`ch04r01.html`。让我们创建一个关于音乐的虚构网站。
- en: How to do it...
  id: totrans-31
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做...
- en: 'In our HTML document, type in the following code:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的HTML文档中，输入以下代码：
- en: '[PRE0]'
  id: totrans-33
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: How it works...
  id: totrans-34
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: The `header` element is often used for `h1` to `h6` elements; it could appear
    as the head of the entire page or the head of any block-level element. It often
    contains a title, subtitle, or tagline.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: '`header`元素通常用于`h1`到`h6`元素；它可以出现在整个页面的头部或任何块级元素的头部。它通常包含标题、副标题或标语。'
- en: '`<header>` element:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: '`<header>`元素：'
- en: '[PRE1]'
  id: totrans-37
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: The `nav` element represents navigation for a document. The `nav` element is
    a section containing links to other documents or to parts within the current document.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: '`nav`元素表示文档的导航。`nav`元素是一个包含指向其他文档或当前文档内部部分的链接的部分。'
- en: Not all groups of links on a page need to be in a `nav` element. It's only groups
    of primary or secondary navigation links. In particular, it is common for footers
    to have a list of links to various key parts of a site, but the footer element
    is more appropriate in such cases.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 页面上并非所有链接组都需要在`nav`元素中。只有主要或次要导航链接的组。特别是，页脚通常会有指向站点各个关键部分的链接列表，但在这种情况下，页脚元素更合适。
- en: '`<nav>` element:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: '`<nav>`元素：'
- en: '[PRE2]'
  id: totrans-41
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: The `footer` element represents the "footer" of a document or section of a document.
    The footer element typically contains metadata about its enclosing section, such
    as who wrote it, links to related documents, copyright data, and so on. Contact
    information for the section given in a footer should be marked up using the address
    element.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: '`footer`元素表示文档或文档部分的“页脚”。页脚元素通常包含有关其封闭部分的元数据，例如谁写的、相关文档的链接、版权数据等。页脚中给出的部分的联系信息应使用地址元素进行标记。'
- en: '`<footer>` element:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: '`<footer>`元素：'
- en: '[PRE3]'
  id: totrans-44
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: The `small` element can be used for small print. It is not intended to present
    the main focus of the page. The small element should not be used for lengthy paragraphs
    or sections of text. It is only intended for short text such as copyright information.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: '`small`元素可用于小字体。它不打算呈现页面的主要焦点。`small`元素不应用于长段落或文本部分。它只用于版权信息等短文本。'
- en: '`<small>` element:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: '`<small>`元素：'
- en: '[PRE4]'
  id: totrans-47
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: There's more...
  id: totrans-48
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: 'Semantics is more than just a richer set of tags. What we need is more than
    just more meaningful tags. To extend beyond tags, we could also add extra semantics
    that are machine-readable; data that browsers, scripts, or robots can understand,
    enabling a more useful, data-driven web for both programs and your users. These
    semantics are: **RDFa (Resource Description Framework in attributes), Microdata**,
    and **Microformats**.'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 语义不仅仅是更丰富的标签集。我们需要的不仅仅是更有意义的标签。为了扩展标签之外，我们还可以添加机器可读的额外语义；浏览器、脚本或机器人可以理解的数据，为程序和用户提供更有用的、数据驱动的Web。这些语义是：**RDFa（属性中的资源描述框架）、Microdata**和**Microformats**。
- en: RDFa
  id: totrans-50
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: RDFa
- en: 'RDFa provides a set of machine-readable HTML attributes. By using RDFa, authors
    could turn existing human-readable information into machine-readable data without
    repeating content. The latest spec can be found at:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: RDFa提供了一组可机器读取的HTML属性。通过使用RDFa，作者可以将现有的可读信息转换为可机器读取的数据，而无需重复内容。最新的规范可以在此处找到：
- en: '[http://www.w3.org/TR/rdfa-in-html/](http://www.w3.org/TR/rdfa-in-html/).'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: '[http://www.w3.org/TR/rdfa-in-html/](http://www.w3.org/TR/rdfa-in-html/)。'
- en: Microdata
  id: totrans-53
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 微数据
- en: 'Microdata uses attributes to define groups of name-value pairs of data. You
    could learn more about it at: [http://html5doctor.com/microdata/](http://html5doctor.com/microdata/).'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 微数据使用属性来定义数据的名称-值对组。您可以在此处了解更多信息：[http://html5doctor.com/microdata/](http://html5doctor.com/microdata/)。
- en: 'You can dig deeper into microdata by reading the W3C Working Draft at: [http://www.w3.org/TR/microdata/](http://www.w3.org/TR/microdata/).'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以通过阅读W3C工作草案来深入了解微数据：[http://www.w3.org/TR/microdata/](http://www.w3.org/TR/microdata/)。
- en: 'You can also read the W3C Editor''s Draft at: [http://dev.w3.org/html5/md/](http://dev.w3.org/html5/md/).'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 您还可以阅读W3C编辑草案：[http://dev.w3.org/html5/md/](http://dev.w3.org/html5/md/)。
- en: Microformats
  id: totrans-57
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 微格式
- en: 'Microformats are designed for human''s first and machine''s second. There are
    currently 34 microformats specs, some are published, and some are drafts. You
    can learn more about them at: [http://html5doctor.com/microformats/](http://html5doctor.com/microformats/).'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 微格式首先设计为人类，其次为机器。目前有34个微格式规范，其中一些已发布，一些是草案。您可以在此处了解更多信息：[http://html5doctor.com/microformats/](http://html5doctor.com/microformats/)。
- en: See also
  id: totrans-59
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 另请参阅
- en: '*Using HTML5 on mobile web* in [Chapter 1](ch01.html "Chapter 1. HTML5 and
    the Mobile Web"),*HTML5 and the Mobile Web*'
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*在移动Web上使用HTML5*在[第1章](ch01.html "第1章.HTML5和移动Web")中，*HTML5和移动Web*'
- en: '*Making HTML5 render cross-browser* in [Chapter 1](ch01.html "Chapter 1. HTML5
    and the Mobile Web"),*HTML5 and the Mobile Web*'
  id: totrans-61
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*在[第1章](ch01.html "第1章.HTML5和移动Web")中使HTML5跨浏览器呈现*，*HTML5和移动Web*'
- en: Using CSS3 features for progressive enhancement
  id: totrans-62
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用CSS3功能进行渐进增强
- en: 'Target device: cross-browser'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 目标设备：跨浏览器
- en: CSS3 enhances web applications and websites using a wide range of styles and
    effects. With CSS3, one can create a set of rich UI that is imageless. On mobile,
    fewer images means faster loading, which is one way to boost performance. With
    the wide support of CSS3 on most modern smartphone browsers and polyfills for
    fallback (polyfills are used as fallback to make HTML5 features work on browsers
    that don't support HTML5 natively), it's not just safe but necessary to start
    using CSS3!
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: CSS3通过各种样式和效果增强Web应用程序和网站。使用CSS3，可以创建一组无图像的丰富UI。在移动设备上，更少的图像意味着更快的加载，这是提高性能的一种方式。由于大多数现代智能手机浏览器都广泛支持CSS3，并且有用于回退的polyfills（polyfills用作回退，使HTML5功能在不支持HTML5的浏览器上工作），因此开始使用CSS3不仅安全而且必要！
- en: '![Using CSS3 features for progressive enhancement](img/1963_04_10.jpg)'
  id: totrans-65
  prefs: []
  type: TYPE_IMG
  zh: '![使用CSS3功能进行渐进增强](img/1963_04_10.jpg)'
- en: Getting ready
  id: totrans-66
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备就绪
- en: Let's style the page created in the previous example. First copy `ch04r01.html`
    and rename it as `ch04r02.html`.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们设计前面示例中创建的页面。首先复制`ch04r01.html`，并将其重命名为`ch04r02.html`。
- en: How to do it...
  id: totrans-68
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做...
- en: 'Add in the following style rules:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 添加以下样式规则：
- en: '[PRE5]'
  id: totrans-70
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'By running this code in the browser, here is what we can see:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 通过在浏览器中运行此代码，我们可以看到：
- en: '![How to do it...](img/1963_04_07.jpg)'
  id: totrans-72
  prefs: []
  type: TYPE_IMG
  zh: '![如何做...](img/1963_04_07.jpg)'
- en: How it works...
  id: totrans-73
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: In this example, we used CSS3 gradients to style the header element. Traditionally,
    to create a gradient like the previous example, one would have to use Photoshop
    or Illustrator, but now you can create it using purely CSS!
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 在此示例中，我们使用CSS3渐变来设计标题元素。传统上，要创建像前面的示例一样的渐变，人们必须使用Photoshop或Illustrator，但现在您可以纯粹使用CSS来创建它！
- en: '[PRE6]'
  id: totrans-75
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'By looking at each aforementioned rule, we can see that different browsers
    use different CSS rules for gradients. There are six different variations just
    to make sure it''s cross-browser compatible. You must be thinking: "Oh, man, it''s
    pretty time consuming to take care of each browser." Don''t worry, this rule isn''t
    typed out manually. The **Ultimate CSS Gradient Generator** comes to the rescue!
    A powerful Photoshop-like CSS gradient editor from ColorZilla can help you make
    it painless to create CSS3 gradients:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 通过查看上述每条规则，我们可以看到不同的浏览器使用不同的CSS规则来处理渐变。为了确保跨浏览器兼容性，有六种不同的变体。您可能会想：“哦，天哪，照顾每个浏览器真的很耗时。”别担心，这条规则不是手动输入的。**终极CSS渐变生成器**来拯救！ColorZilla的强大类似于Photoshop的CSS渐变编辑器可以帮助您轻松创建CSS3渐变：
- en: '[http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: '[http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)'
- en: '![How it works...](img/1963_04_08.jpg)'
  id: totrans-78
  prefs: []
  type: TYPE_IMG
  zh: '![它是如何工作的...](img/1963_04_08.jpg)'
- en: There's more...
  id: totrans-79
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: If you take IE9 and below into consideration, CSS3 PIE ([http://css3pie.com/](http://css3pie.com/))
    can be used for support.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 如果考虑IE9及以下版本，可以使用CSS3 PIE（[http://css3pie.com/](http://css3pie.com/)）来提供支持。
- en: 'After downloading `PIE.htc`, include it in your CSS using:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 下载`PIE.htc`后，将其包含在CSS中：
- en: '[PRE7]'
  id: totrans-82
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'Supported features include:'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 支持的功能包括：
- en: border-radius
  id: totrans-84
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 边框半径
- en: box-shadow
  id: totrans-85
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 盒阴影
- en: border-image
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 边框图像
- en: CSS3 backgrounds (`-pie-background`)
  id: totrans-87
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: CSS3背景（`-pie-background`）
- en: Gradients
  id: totrans-88
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 渐变
- en: RGBA color values
  id: totrans-89
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: RGBA颜色值
- en: PIE custom properties
  id: totrans-90
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: PIE自定义属性
- en: Understanding CSS3 gradients
  id: totrans-91
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 了解CSS3渐变
- en: '*Jeffrey Way*, editor at nettuts, has an excellent article about CSS3 gradients.
    You can view it at: [http://net.tutsplus.com/tutorials/html-css-techniques/quick-tip-understanding-css3-gradients/.](http://net.tutsplus.com/tutorials/html-css-techniques/quick-tip-understanding-css3-gradients/.)'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: '*Jeffrey Way*，nettuts的编辑，有一篇关于CSS3渐变的优秀文章。您可以在此处查看：[http://net.tutsplus.com/tutorials/html-css-techniques/quick-tip-understanding-css3-gradients/.](http://net.tutsplus.com/tutorials/html-css-techniques/quick-tip-understanding-css3-gradients/.)'
- en: CSS3, please!
  id: totrans-93
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: CSS3，请！
- en: '*CSS3 Please!*, by *Paul Irish*, has the latest syntax on gradients and many
    other CSS3 features at: [http://css3please.com/](http://css3please.com/).'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: '*CSS3 Please!*，由*Paul Irish*编写，提供了有关渐变和许多其他CSS3功能的最新语法：[http://css3please.com/](http://css3please.com/)。'
- en: See also
  id: totrans-95
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 另请参阅
- en: '*Using HTML5 on mobile web* in [Chapter 1](ch01.html "Chapter 1. HTML5 and
    the Mobile Web")'
  id: totrans-96
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*在移动Web上使用HTML5*在[第1章](ch01.html "第1章.HTML5和移动Web")中'
- en: Applying responsive design
  id: totrans-97
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 应用响应式设计
- en: 'Target device: cross-browser'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 目标设备：跨浏览器
- en: Responsive design is one of the most important concepts in recent mobile development.
    It emphasizes the concept that the browser should respond to the screen/browser
    resize to render differently. A mobile first responsive design could make pages
    degrade gracefully on desktop browsers.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 响应式设计是近期移动开发中最重要的概念之一。它强调浏览器应该对屏幕/浏览器调整大小做出不同的渲染。移动优先的响应式设计可以使页面在桌面浏览器上优雅地降级。
- en: '*So why do we need responsive web design?*'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: '*那么为什么我们需要响应式网页设计呢？*'
- en: When we apply fixed layout on a desktop web page, there are often whitespaces
    on the left or right of the screen depending on the browser screen size. Mobile
    browsers also come with different sizes, and with limited viewport space, every
    pixel is vital, so it's important to utilize every pixel available on the screen.
    To eliminate unnecessary whitespaces on the left or right of the page, responsive
    design is used.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们在桌面网页上应用固定布局时，根据浏览器屏幕尺寸，屏幕左侧或右侧通常会出现空白。移动浏览器也有不同的尺寸，并且视口空间有限，每个像素都很重要，因此利用屏幕上的每个像素非常重要，因此需要使用响应式设计来消除页面左侧或右侧的不必要的空白。
- en: '*How could media queries help with responsive design?*'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: '*媒体查询如何帮助响应式设计？*'
- en: Media queries are used to style content based on the screen size update, so
    for the same HTML element, there could be two separate rules applied. Which one
    is rendered depends on the size of the browser viewport.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 媒体查询用于根据屏幕尺寸更新样式内容，因此对于相同的HTML元素，可以应用两个单独的规则。渲染哪一个取决于浏览器视口的大小。
- en: Getting ready
  id: totrans-104
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: In this example, we will use an HTML5 polyfill named `respond.js`. It is created
    by *Scott Jehl* (from the jQuery Mobile team). It's located at `ch04_code/js`
    in the source code.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 在本示例中，我们将使用名为`respond.js`的HTML5填充。它是由*Scott Jehl*（来自jQuery Mobile团队）创建的。它位于源代码的`ch04_code/js`中。
- en: How to do it...
  id: totrans-106
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 操作步骤...
- en: First, let's create an HTML document named `ch04r03.html`.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，让我们创建一个名为`ch04r03.html`的HTML文档。
- en: 'Enter the following code in HTML:'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 在HTML中输入以下代码：
- en: '[PRE8]'
  id: totrans-109
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'If you render the page on a mobile device, this page will look exactly the
    same as the previous recipe. But if you render it in a desktop browser, it will
    look similar to the following:'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您在移动设备上渲染页面，这个页面看起来会和前面的示例一模一样。但是如果您在桌面浏览器上渲染它，它会看起来和下面的类似：
- en: '![How to do it...](img/1963_04_11.jpg)'
  id: totrans-111
  prefs: []
  type: TYPE_IMG
  zh: '![操作步骤...](img/1963_04_11.jpg)'
- en: How it works...
  id: totrans-112
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 工作原理...
- en: At the top of the file, we used **Modernizr** to first detect if Media Queries
    are supported by the current browser. If not, we will load `respond.min.js:`
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 在文件顶部，我们使用**Modernizr**首先检测当前浏览器是否支持媒体查询。如果不支持，我们将加载`respond.min.js`：
- en: '[PRE9]'
  id: totrans-114
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: At the time of writing, you need to have the `/*/mediaquery*/` comment at the
    end of the rule for it to work. This might be improved in future versions of `respond.js:`
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 在撰写本文时，您需要在规则的末尾添加`/*/mediaquery*/`注释才能使其工作。这在`respond.js`的未来版本中可能会得到改进：
- en: '[PRE10]'
  id: totrans-116
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: There's more...
  id: totrans-117
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: 'On the Mobile Boilerplate site, I have explained further about Media Queries,
    and you can find the slides at: [http://html5boilerplate.com/mobile/](http://html5boilerplate.com/mobile/).'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 在Mobile Boilerplate网站上，我进一步解释了媒体查询，并且您可以在以下网址找到幻灯片：[http://html5boilerplate.com/mobile/](http://html5boilerplate.com/mobile/)。
- en: '*Andy Clarke* created *320 and up* which is also based on the idea of responsive
    design. You can download it at: [http://stuffandnonsense.co.uk/projects/320andup/](http://stuffandnonsense.co.uk/projects/320andup/).'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: '*Andy Clarke*创建了基于响应式设计理念的*320 and up*。您可以在以下网址下载：[http://stuffandnonsense.co.uk/projects/320andup/](http://stuffandnonsense.co.uk/projects/320andup/)。'
- en: Optimizing polyfills script loading
  id: totrans-120
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 优化填充脚本加载
- en: 'Target device: cross-browser'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 目标设备：跨浏览器
- en: Script loading is important to any browser, but more so for mobile devices because
    of the low bandwidth. Modernizr comes with a dynamic loading solution.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 脚本加载对于任何浏览器都很重要，但对于移动设备来说更重要，因为带宽较低。Modernizr带有一个动态加载解决方案。
- en: Getting ready
  id: totrans-123
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: First, let's create an HTML document and name it `ch03r04.html`.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，让我们创建一个HTML文档，命名为`ch03r04.html`。
- en: How to do it...
  id: totrans-125
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 操作步骤...
- en: Enter the following code in your code editor, and run it.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 在代码编辑器中输入以下代码，并运行它。
- en: '[PRE11]'
  id: totrans-127
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: How it works...
  id: totrans-128
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 工作原理...
- en: At the time of writing, Modernizr 2.0 Preview was in Beta 1\. In this beta release,
    there are two great new features. One is that you can choose to customize the
    features that you want to detect. The other great feature is that you can have
    `yepnope.js` (also known as `Modernizr.load` by *Alex Sexton* and *Ralph Holzmann)*.
    `Yepnope.js` provides a dynamic JavaScript loader, and you can learn more about
    it in the *There's more* section of this chapter.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 在撰写本文时，Modernizr 2.0预览版处于Beta 1阶段。在这个测试版中，有两个很棒的新功能。一个是您可以选择自定义要检测的功能。另一个很棒的功能是您可以使用`yepnope.js`（也被称为*Alex
    Sexton*和*Ralph Holzmann*的`Modernizr.load`）。`Yepnope.js`提供了一个动态JavaScript加载器，您可以在本章的*还有更多*部分了解更多信息。
- en: '![How it works...](img/1963_04_01.jpg)'
  id: totrans-130
  prefs: []
  type: TYPE_IMG
  zh: '![工作原理...](img/1963_04_01.jpg)'
- en: 'With Modernizr, we could first detect if a feature already exists or not in
    the current user agent:'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 使用Modernizr，我们可以首先检测当前用户代理中是否已存在某个功能：
- en: '[PRE12]'
  id: totrans-132
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'If it doesn''t exist, we will load the `shim geolocation.js` using `yepnope`.
    And on completion, we could append the latitude and longitude:'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 如果不存在，我们将使用`yepnope`加载`shim geolocation.js`。加载完成后，我们可以附加纬度和经度：
- en: '[PRE13]'
  id: totrans-134
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: There's more...
  id: totrans-135
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: 'There are a couple of optional resources that will be helpful to developers.
    Modernizr test suite is one of them. It is useful in helping developers know at
    a glance what features are supported on a certain device. You can find out more
    at:'
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 有一些可选资源对开发人员很有帮助。Modernizr测试套件就是其中之一。它有助于开发人员一目了然地了解某个设备支持哪些功能。您可以在以下网址了解更多信息：
- en: '[http://modernizr.github.com/Modernizr/test/index.html](http://modernizr.github.com/Modernizr/test/index.html).'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: '[http://modernizr.github.com/Modernizr/test/index.html](http://modernizr.github.com/Modernizr/test/index.html)。'
- en: yepnope
  id: totrans-138
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: yepnope
- en: 'yepnope is an asynchronous conditional resource loader that''s super-fast and
    allows you to load only the scripts that your users need. To find out more about
    it, go to: [http://yepnopejs.com/](http://yepnopejs.com/).'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: yepnope是一个异步条件资源加载器，速度超快，允许您仅加载用户需要的脚本。要了解更多信息，请访问：[http://yepnopejs.com/](http://yepnopejs.com/)。
- en: See also
  id: totrans-140
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 另请参阅
- en: '*Using CSS3 features for progressive enhancement*'
  id: totrans-141
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*使用CSS3功能进行渐进增强*'
- en: Applying user agent detection
  id: totrans-142
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 应用用户代理检测
- en: 'Target device: cross-browser'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 目标设备：跨浏览器
- en: When developing a mobile site, it's good to have user agent detection. This
    could help you with redirection script or help you to determine if you want to
    load/not to load something based on user agent.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 在开发移动站点时，具有用户代理检测是很有用的。这可以帮助您编写重定向脚本，或者帮助您确定是否要基于用户代理加载/不加载某些内容。
- en: Getting ready
  id: totrans-145
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'First, let''s see how you could tell if a user could redirect from one site
    to another based on user agent detection. There are a couple of ways to do this:
    You could do this in the server config, in your server-side programming language,
    or use it from the frontend JavaScript.'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，让我们看看如何根据用户代理检测告诉用户是否可以从一个站点重定向到另一个站点。有几种方法可以做到这一点：您可以在服务器配置中执行此操作，也可以在服务器端编程语言中执行此操作，或者可以从前端JavaScript中执行此操作。
- en: How to do it...
  id: totrans-147
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做...
- en: 'You can download the redirection script from: [http://detectmobilebrowser.com/](http://detectmobilebrowser.com/).
    It comes with many different versions. In this example, let''s use the Apache
    config `.htaccess`.'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以从以下位置下载重定向脚本：[http://detectmobilebrowser.com/](http://detectmobilebrowser.com/)。它带有许多不同版本。在本示例中，让我们使用Apache配置`.htaccess`。
- en: How it works...
  id: totrans-149
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: 'Once you download the file and open it, you will see script as follows:'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 下载文件并打开后，您会看到以下脚本：
- en: '[PRE14]'
  id: totrans-151
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: To redirect a desktop site to a mobile site, one could change the `http://example.com/mobile`
    to your site address.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 要将桌面站点重定向到移动站点，可以将`http://example.com/mobile`更改为您的站点地址。
- en: There's more...
  id: totrans-153
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: User agent detection is not only useful for redirecting sites, it's also useful
    when you are trying to determine if something should be loaded in the first place,
    based on the user agent.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 用户代理检测不仅在重定向站点时有用，还在尝试确定是否应基于用户代理加载某些内容时有用。
- en: 'When building the Mobile Boilerplate site, I used the JavaScript version of
    the detection script to determine if the site should render the embedded content
    based on the user agent (mobile or desktop):'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 在构建Mobile Boilerplate站点时，我使用了检测脚本的JavaScript版本来确定站点是否应根据用户代理（移动或桌面）呈现嵌入内容：
- en: '[PRE15]'
  id: totrans-156
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'With this script for desktop browsers, the slides are loaded and displayed
    as follows:'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 使用此桌面浏览器脚本，幻灯片将被加载并显示如下：
- en: '![There''s more...](img/1963_04_02.jpg)'
  id: totrans-158
  prefs: []
  type: TYPE_IMG
  zh: '![还有更多...](img/1963_04_02.jpg)'
- en: 'On the mobile version, it is not displayed:'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 在移动版本中，它不会显示：
- en: '![There''s more...](img/1963_04_03.jpg)'
  id: totrans-160
  prefs: []
  type: TYPE_IMG
  zh: '![还有更多...](img/1963_04_03.jpg)'
- en: Methods of mobile browser detection
  id: totrans-161
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 移动浏览器检测方法
- en: 'An article on mobile tuts explains different methods of mobile browser detection:
    [http://mobile.tutsplus.com/tutorials/mobile-web-apps/mobile- browser-detection/](http://mobile.tutsplus.com/tutorials/mobile-web-apps/mobile).'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 移动tuts上的一篇文章解释了移动浏览器检测的不同方法：[http://mobile.tutsplus.com/tutorials/mobile-web-apps/mobile-browser-detection/](http://mobile.tutsplus.com/tutorials/mobile-web-apps/mobile)。
- en: Adding mobile bookmark bubble to the home page
  id: totrans-163
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 将移动书签气泡添加到主页
- en: 'Target device: iOS'
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 目标设备：iOS
- en: 'In the previous chapters, we have talked about the ability to bookmark your
    site on certain mobile devices. Although this is a pretty cool feature to bring
    web apps a step closer to native apps, there is one issue with it: there isn''t
    an API you can use to call the bookmark action, so many users simply are not aware
    of such a feature on their phone. To tackle this issue, a couple of frameworks
    provide a bookmark bubble using CSS and JavaScript. The script adds a promo bubble
    to the bottom of your web app page, asking users to bookmark the web app to their
    device''s home screen.'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 在前几章中，我们已经谈到了在某些移动设备上为您的站点添加书签的能力。尽管这是一个非常酷的功能，使Web应用程序更接近本机应用程序，但它也存在一个问题：没有API可以用来调用书签操作，因此许多用户根本不知道手机上有这样一个功能。为了解决这个问题，一些框架使用CSS和JavaScript提供了书签气泡。该脚本将在Web应用程序页面底部添加一个促销气泡，要求用户将Web应用程序添加到其设备的主屏幕上。
- en: Getting ready
  id: totrans-166
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'As mentioned, many frameworks provide this feature, but for simplicity''s sake,
    let''s use one that is standalone. Google released an open source library named
    *The Mobile Bookmark Bubble* for this task. First, let''s download it at: [http://code.google.com/p/mobile-bookmark-bubble/](http://code.google.com/p/mobile-bookmark-bubble/).'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，许多框架提供了此功能，但为了简单起见，让我们使用一个独立的框架。Google发布了一个名为*The Mobile Bookmark Bubble*的开源库来完成这项任务。首先，让我们在以下位置下载它：[http://code.google.com/p/mobile-bookmark-bubble/](http://code.google.com/p/mobile-bookmark-bubble/)。
- en: How to do it...
  id: totrans-168
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做...
- en: 'The library comes with a `sample.js`. Just include both `bookmark_bubble.js`
    and the `sample.js` in any webpage created; you would then see something as follows:'
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 该库附带一个`sample.js`。只需在创建的任何网页中包含`bookmark_bubble.js`和`sample.js`，然后您会看到以下内容：
- en: '![How to do it...](img/1963_04_04.jpg)'
  id: totrans-170
  prefs: []
  type: TYPE_IMG
  zh: '![如何做...](img/1963_04_04.jpg)'
- en: How it works...
  id: totrans-171
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: The library uses HTML5 local storage to track whether the promo has already
    been displayed, to avoid constantly nagging users. The current implementation
    of this library specifically targets Mobile Safari, the web browser used on iPhone
    and iPad devices.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 该库使用HTML5本地存储来跟踪促销是否已经显示，以避免不断地纠缠用户。该库的当前实现专门针对Mobile Safari，这是iPhone和iPad设备上使用的Web浏览器。
- en: See also
  id: totrans-173
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 另请参阅
- en: '*Enabling iPhone start screen in full screen mode* in [Chapter 2](ch02.html
    "Chapter 2. Mobile Setup and Optimization")'
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: '*在[第2章](ch02.html "第2章 移动设置和优化")中启用iPhone全屏模式*。'
- en: Building Contact page with textarea and autogrow forms
  id: totrans-175
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 构建带有文本区域和自动增长表单的联系人页面
- en: 'Target device: cross-browser'
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 目标设备：跨浏览器
- en: On native apps like SMS, the textarea grows automatically. On mobile web, if
    you create a textarea, you will realize it is a fixed size. When the lines of
    text you type exceed the textarea height, it becomes very hard to see the text.
    In this example, we will see how we could create a textarea that autogrows when
    you are typing in more lines.
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 在像短信这样的原生应用中，文本区域会自动增长。在移动Web上，如果创建一个文本区域，您会意识到它是固定大小的。当您输入的文本行数超过文本区域的高度时，很难看到文本。在这个例子中，我们将看到如何创建一个在您输入更多行时自动增长的文本区域。
- en: Getting ready
  id: totrans-178
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'First, let''s create an HTML document and name it `ch04r05.html`. In this example,
    we will use `helper.js` in Mobile Boilerplate: [https://github.com/h5bp/ mobile-boilerplate](http://github.com/h5bp/)'
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，让我们创建一个名为`ch04r05.html`的HTML文档。在这个例子中，我们将在Mobile Boilerplate中使用`helper.js`：[https://github.com/h5bp/mobile-boilerplate](http://github.com/h5bp/)
- en: How to do it...
  id: totrans-180
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做...
- en: 'Enter this code in the file:'
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 在文件中输入以下代码：
- en: '[PRE16]'
  id: totrans-182
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'The following is a screenshot of how it renders in Palm webOS:'
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是Palm webOS中呈现方式的屏幕截图：
- en: '![How to do it...](img/1963_04_12.jpg)'
  id: totrans-184
  prefs: []
  type: TYPE_IMG
  zh: '![如何做...](img/1963_04_12.jpg)'
- en: How it works...
  id: totrans-185
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: In the script, we have key-up event listener. This will detect if the textarea
    height has changed. We measure the height of the content and if it's changed,
    we will change the CSS style of the textarea to increase the height.
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 在脚本中，我们有一个键盘事件监听器。这将检测文本区域的高度是否已更改。我们测量内容的高度，如果已更改，我们将更改文本区域的CSS样式以增加高度。
- en: There's more...
  id: totrans-187
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: 'The original concept is from Google''s Code blog. You can read more about it
    at: [http://googlecode.blogspot.com/2009/07/gmail-for-mobile-html5 -series.html](http://googlecode.blogspot.com/2009/07/gmail-for-mobile-html5).'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 这个原始概念来自Google的Code博客。您可以在这里阅读更多关于它的信息：[http://googlecode.blogspot.com/2009/07/gmail-for-mobile-html5-series.html](http://googlecode.blogspot.com/2009/07/gmail-for-mobile-html5)。
- en: See also
  id: totrans-189
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 参见
- en: '*Making buttons with instant response*'
  id: totrans-190
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*使用即时响应制作按钮*'
- en: Making buttons with instant response
  id: totrans-191
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用即时响应制作按钮
- en: 'Target device: iOS, Android'
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 目标设备：iOS，Android
- en: On a mobile device browser, button response can be slightly slower than on a
    native application. On mobile browsers, there is a `touchstart` event. By detecting
    this event instead of the click event, it will make the clicking faster.
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 在移动设备浏览器上，按钮响应可能会比原生应用稍慢。在移动浏览器上，有一个`touchstart`事件。通过检测这个事件而不是点击事件，可以使点击更快。
- en: Getting ready
  id: totrans-194
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: In this example, we will use a function in Mobile Boilerplate. Create a file
    called `ch04r06.html`.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个例子中，我们将使用Mobile Boilerplate中的一个函数。创建一个名为`ch04r06.html`的文件。
- en: How to do it...
  id: totrans-196
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做...
- en: 'The following code will create a form with a submit button:'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 以下代码将创建一个带有提交按钮的表单：
- en: '[PRE17]'
  id: totrans-198
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: How it works...
  id: totrans-199
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: The following is the excerpt of the fast button function, and here we will see
    how the function works.
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是快速按钮函数的摘录，我们将在这里看到函数是如何工作的。
- en: 'At the top, we have the main function defined. This is only used if `addEventListener`
    is supported, where it listens to `touchstart` and `click` events:'
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 在顶部，我们定义了主要函数。只有在支持`addEventListener`的情况下才会使用它，它监听`touchstart`和`click`事件：
- en: '[PRE18]'
  id: totrans-202
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'The `onTouchStart` method is used to listen to `touchmove` and `touchend` events.
    `stopPropagation` is used to stop the propagation of the event in the listeners,
    so that it stops bubbling up:'
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: '`onTouchStart`方法用于监听`touchmove`和`touchend`事件。`stopPropagation`用于停止事件在监听器中的传播，以便它停止冒泡：'
- en: '[PRE19]'
  id: totrans-204
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: '`touchmove` is used to test if the user is dragging. If users drag past 10
    px, we will reset it:'
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: '`touchmove`用于测试用户是否在拖动。如果用户拖动超过10像素，我们将重置它：'
- en: '[PRE20]'
  id: totrans-206
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'The following code prevents ghost clicks and invokes the actual click handler:'
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 以下代码防止幽灵点击并调用实际的点击处理程序：
- en: '[PRE21]'
  id: totrans-208
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: There's more...
  id: totrans-209
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: 'You can read more about fast button at Google''s blog. It explains in detail
    the background and theory behind the idea at: [http://code.google.com/mobile/articles/
    fast_buttons.html](http://code.google.com/mobile/articles/).'
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以在Google的博客上阅读有关快速按钮的更多信息。它详细解释了这个想法背后的背景和理论：[http://code.google.com/mobile/articles/fast_buttons.html](http://code.google.com/mobile/articles/)。
- en: See also
  id: totrans-211
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 参见
- en: '*Building Contact page with textarea and autogrow forms*'
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: '*使用文本区域和自动增长表单构建联系页面*'
- en: Hiding WebKit chrome
  id: totrans-213
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 隐藏WebKit chrome
- en: 'Target device: iOS, Android'
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 目标设备：iOS，Android
- en: The URL bar at the top of mobile Safari on iOS and Android uses a large space.
    Many developers will hide it on page load as mobile real estate is limited. Every
    pixel is important and, by hiding the URL bar, it helps you to leverage every
    pixel on the screen to maximize the display area.
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: iOS和Android上移动Safari的URL栏使用了大量空间。许多开发人员会在页面加载时隐藏它，因为移动房地产有限。每个像素都很重要，通过隐藏URL栏，可以帮助您利用屏幕上的每个像素，最大化显示区域。
- en: Getting ready
  id: totrans-216
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: First, let's create an HTML document and name it `ch04r07.html`.
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，让我们创建一个名为`ch04r07.html`的HTML文档。
- en: How to do it...
  id: totrans-218
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做...
- en: 'Enter this code:'
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 输入以下代码：
- en: '[PRE22]'
  id: totrans-220
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'Now if you render it in the browser, it will look like this:'
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，如果您在浏览器中呈现它，它将看起来像这样：
- en: '![How to do it...](img/1963_04_05.jpg)'
  id: totrans-222
  prefs: []
  type: TYPE_IMG
  zh: '![如何做...](img/1963_04_05.jpg)'
- en: 'Now uncomment the following line:'
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 现在取消以下行的注释：
- en: '[PRE23]'
  id: totrans-224
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: 'Render the content again and you can see the chrome is now hidden, allowing
    the footer to display:'
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: 再次呈现内容，您会看到chrome现在被隐藏，允许页脚显示：
- en: '![How to do it...](img/1963_04_06.jpg)'
  id: totrans-226
  prefs: []
  type: TYPE_IMG
  zh: '![如何做...](img/1963_04_06.jpg)'
- en: How it works...
  id: totrans-227
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: 'The following is the script inside Boilerplate:'
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是Boilerplate中的脚本：
- en: '[PRE24]'
  id: totrans-229
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'It detects if there is any hash in the URL. If there is, we will stop running
    the script because it means there is an inline anchor. If there isn''t any hash,
    we will wait for a second and if there isn''t scrolling, Android uses 1 px y pos
    for hiding, while it''s 0 in iOS. The script normalizes the two. It''s made by
    *Scott Jehl* at: [https://gist.github.com/1183357](http://gist.github.com/1183357).'
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: 它检测URL中是否有任何哈希。如果有，我们将停止运行脚本，因为这意味着有一个内联锚点。如果没有任何哈希，我们将等待一秒，如果没有滚动，Android使用1像素的y位置进行隐藏，而在iOS中为0。脚本对两者进行了规范化。它是由*Scott
    Jehl*制作的：[https://gist.github.com/1183357](http://gist.github.com/1183357)。
- en: 'It''s also included in Mobile Boilerplate at: [https://github.com/h5bp/mobile-boilerplate/blob/master/js/mylibs/helper.js](http://github.com/h5bp/mobile-boilerplate/blob/master/js/mylibs/helper.js).'
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: 它也包含在Mobile Boilerplate中：[https://github.com/h5bp/mobile-boilerplate/blob/master/js/mylibs/helper.js](http://github.com/h5bp/mobile-boilerplate/blob/master/js/mylibs/helper.js)。
- en: See also
  id: totrans-232
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 另请参阅
- en: '*Building Contact page with textarea and autogrow forms*'
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: '*使用文本区域和自动增长表单构建联系页面*'
- en: Building a mobile sitemap
  id: totrans-234
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 构建移动站点地图
- en: 'Target device: cross-browser'
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 目标设备：跨浏览器
- en: Many developers are familiar with Google Sitemap. As the biggest search engine,
    making sure it gets our content is very important. For mobile SEO purposes, Google
    came up with **Mobile Sitemap**. Google recommends that people update their mobile
    sitemaps to the format described next.
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: 许多开发人员熟悉Google站点地图。作为最大的搜索引擎，确保它获取我们的内容非常重要。为了移动SEO目的，Google提出了**移动站点地图**。Google建议人们将其移动站点地图更新为下面描述的格式。
- en: Getting ready
  id: totrans-237
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: First, let's create an XML document and name it `sitemap.xml`.
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，让我们创建一个XML文档并将其命名为`sitemap.xml`。
- en: How to do it...
  id: totrans-239
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做...
- en: 'We can add the following code to the XML document. For the particular site
    you have, the URL should be the URL of your pages:'
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以将以下代码添加到XML文档中。对于您拥有的特定网站，URL应该是您页面的URL：
- en: '[PRE25]'
  id: totrans-241
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: All the URLs are enclosed inside`<loc></loc>`.
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: 所有URL都包含在`<loc></loc>`中。
- en: Make sure you have included`<mobile:mobile/>`. Otherwise, sites will not be
    properly crawled.
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: 确保您已包含`<mobile:mobile/>`。否则，站点将无法被正确爬取。
- en: How it works...
  id: totrans-244
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: Sitemaps follow a particular schema; the aforementioned XML schema is used to
    tell Google search engine the location of the mobile web page. Normally, if a
    site is built using a CMS system, there should be a way to auto-generate the URLs,
    and they should all be listed within`<loc></loc>`.
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: 站点地图遵循特定的模式；上述XML模式用于告诉Google搜索引擎移动网页的位置。通常，如果网站使用CMS系统构建，应该有一种自动生成URL的方法，并且它们都应该在`<loc></loc>`中列出。
- en: There's more...
  id: totrans-246
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: Mobile sitemap cannot contain desktop-only URLs. However, it can contain content
    for both desktop and mobile.
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 移动站点地图不能包含仅限桌面的URL。但是，它可以包含桌面和移动内容。
- en: For websites with dedicated mobile content and a dedicated URL, you may direct
    users from `example.com` to `m.example.com`. In this case, use a 301 redirect
    for both users and Googlebot-Mobile.
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: 对于具有专用移动内容和专用URL的网站，您可以将用户从`example.com`重定向到`m.example.com`。在这种情况下，对用户和Googlebot-Mobile都使用301重定向。
- en: If you serve all types of content from `example.com`, this is not considered
    cloaking by Google.
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您从`example.com`提供所有类型的内容，则Google不认为这是欺骗。
- en: Google and mobile-friendly site building
  id: totrans-250
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Google和移动友好的站点构建
- en: 'On the Google Webmaster site, there is a blog post about how to make websites
    mobile friendly: [http://googlewebmastercentral.blogspot.com/2011/02/making-websites-mobile-friendly.html](http://googlewebmastercentral.blogspot.com/2011/02/making-websites-mobile-friendly.html).'
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: 在Google网站管理员网站上，有一篇关于如何使网站移动友好的博客文章：[http://googlewebmastercentral.blogspot.com/2011/02/making-websites-mobile-friendly.html](http://googlewebmastercentral.blogspot.com/2011/02/making-websites-mobile-friendly.html)。
- en: Google and mobile site indexing
  id: totrans-252
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Google和移动站点索引
- en: 'There is another blog on Google Webmaster site, which talks about how to help
    Google index your mobile site: [http://googlewebmastercentral.blogspot.com/2009/](http://googlewebmastercentral.blogspot.com/2009/)'
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: Google网站管理员网站上还有另一篇博客，讨论如何帮助Google索引您的移动站点：[http://googlewebmastercentral.blogspot.com/2009/](http://googlewebmastercentral.blogspot.com/2009/)
