# 前言

现在是开始使用 HTML5 的时候了。HTML5 为编写在 Web 浏览器中运行的功能齐全的应用程序提供了完整的应用程序开发框架。尽管 HTML5 规范尚未完全完成，但几乎每个现代浏览器都已广泛支持最受欢迎的功能，从台式机到平板电脑再到智能手机上运行。这意味着你可以编写一次应用程序，然后在几乎任何设备上运行。

如果你想开始编写 HTML5 Web 应用程序，但不知道从哪里开始，那么这本书适合你。我们将从构建 Web 应用程序的基础知识开始，然后通过构建真正的工作应用程序来学习 HTML5、CSS3 和 JavaScript。这不是一本参考书。我们将尽量减少理论知识，最大限度地进行实际编码。

就在几年前，在浏览器中编写功能齐全的应用程序需要其他技术，比如作为浏览器插件运行的 Flash 或 Java 小程序。和大多数人一样，我只用 JavaScript 编写简单的客户端验证脚本。我甚至都没想过可以用 JavaScript 编写真正的应用程序。一切开始改变是因为发生了几件事情。

首先，我发现了 jQuery。这是一个库，通过抽象浏览器的特殊性，使得编写 JavaScript 变得更加容易，并且非常容易操作网页的元素。此外，它还可以帮助我们执行一些很酷的操作，比如动画元素。然后大约三年前，我在寻找一种在网页上直接绘制图形原语的方法时了解到了 HTML5。从那时起，我看到 HTML5 发展成为一个完整的框架，能够用来编写无需插件的真正应用程序。

这本书是过去三年几乎每天写 JavaScript 的结晶，学到了什么有效，什么无效。可以说是技术上的大脑倾泻。目标是写一本我在刚开始时希望能读到的书。

HTML5 Web 应用程序开发的未来看起来很光明。在 Web 浏览器开发领域，所有大公司都全力支持 HTML5 和 JavaScript。HTML5 是 Web 应用程序开发的未来！

# 本书涵盖的内容

第一章，“手边的任务”，将通过构建一个模板来教你 JavaScript 应用程序的基本组件，该模板可用于开始编写新的应用程序。然后我们将创建一个任务列表应用程序，学习如何操作 DOM 以及如何使用 HTML5 Web 存储来保存应用程序的状态。

第二章，“时尚起来”，将展示如何使用新的 CSS3 功能为你的 Web 应用程序添加专业外观的样式，包括圆角、阴影和渐变。我们还将学习如何使用 CSS 精灵使图像加载更加高效。

第三章，“细节决定成败”，将通过向任务列表应用程序添加详细信息部分来教你关于新的 HTML5 表单输入类型。我们还将学习自定义数据属性，并学习如何使用它们将视图中的数据绑定到模型。

第四章，“一块空白画布”，将展示如何使用新的 Canvas 元素和 API 直接在网页上绘制，创建一个绘图应用程序。我们还将学习如何处理来自触摸屏设备的触摸事件。

第五章，“不再是空白画布”，将继续教授有关画布的知识，向你展示如何使用新的文件 API 从画布中导出图像，并将图像加载到画布中。然后我们将深入到像素级别，学习如何直接操作画布图像数据。

第六章，*Piano Man*，将教你如何使用音频元素和 API 在网页中播放声音。我们将创建一个虚拟钢琴，在点击键时播放声音。

第七章，*Piano Hero*，将把前一章的虚拟钢琴变成一个游戏，玩家必须在正确的时间弹奏正确的音符以获得积分。在这个过程中，我们将学习如何使用 JavaScript 定时器和动画元素。

第八章，*A Change in the Weather*，将向你展示如何从服务器获取数据并使用 Ajax 与 Web 服务通信。我们将构建一个天气小部件，使用地理位置 API 获取用户的位置，并显示来自 Web 服务的本地天气报告。

第九章，*Web Workers Unite*，将教你如何使用 HTML5 web workers 在单独的线程中执行长时间运行的进程，以使你的应用程序更具响应性。我们将创建一个应用程序，使用 web worker 在画布上绘制 Mandelbrot 分形。

第十章，*Releasing an App into the Wild*，将教你如何在发布应用程序到世界之前使用 JavaScript 压缩器来合并和压缩应用程序的 JavaScript 文件。我们还将学习如何使用 HTML5 应用程序缓存创建可以离线使用的应用程序。

# 本书所需的内容

HTML5 的好处在于使用它是没有成本的。你不需要任何特殊的工具或许可证来开发 Web 应用程序。然而，使用一个好的代码编辑器会对你有所帮助，特别是在刚开始的时候。没有什么比自动建议更能帮助你记住 JavaScript 函数、元素名称和样式选项。而语法高亮对于使代码更易于阅读是至关重要的。

也就是说，如果你还没有一个源代码编辑器，我可以建议几个。Notepad++是一个免费的编辑器，具有 JavaScript、HTML 和 CSS 语法高亮显示和一些基本的自动建议，没有太多的开销。我用它来写这本书中的所有代码。在高端，Microsoft Visual Studio 提供非常好的自动建议功能，但比基本文本编辑器的开销更大。另一个很好的选择是 NetBeans，一个用 Java 编写的开源 IDE，具有良好的 Web 开发支持。

你还需要一个支持 HTML5 的 Web 浏览器和开发者工具。大多数浏览器的最新版本都支持本书中使用的 HTML5 功能。你使用的浏览器应该取决于你最喜欢的开发者工具。我使用 Chrome，因为它内置了很棒的开发者工具。安装了 Firebug 插件的 Firefox 也非常好。在这本书中，我使用 Chrome 作为首选的浏览器。Internet Explorer 9 并不完全支持我们将要学习的所有 HTML5 功能，而且开发者工具也不如其他浏览器好，所以我建议不要用它进行开发。

你可能还需要一个像 IIS 或 Apache 这样的 Web 服务器。在开发时，大多数情况下你可以直接从文件系统中打开你的 Web 应用程序。然而，一些 HTML5 功能只能通过 Web 服务器工作。我已经在本书中指出了这种情况。

# 这本书适合谁

这本书是为那些在其他语言有经验并想要开始编写 HTML5 Web 应用程序的程序员而写的。您应该对 HTML、CSS 和 JavaScript 有一些基本的了解。例如，您应该知道如何编写简单的 HTML 文档。您还应该了解如何使用 CSS 选择器的基础知识，因为它们对于使用 jQuery 很重要。您不需要知道如何使用 jQuery，因为本书将简要介绍基础知识，但这可能会有所帮助。只要您能理解并编写简单的 JavaScript 代码，那就足以让您开始了。我们将从基础知识开始，通过大量示例逐步深入。

# 约定

在本书中，您会经常看到几个标题。

为了清晰地说明如何完成一个过程或任务，我们使用：

# 行动时间 - 标题

1.  行动 1

1.  行动 2

1.  行动 3

说明通常需要一些额外的解释，以便理解，因此它们后面跟着：

## *刚刚发生了什么？*

这个标题解释了您刚刚完成的任务或说明的工作原理。

您还会在书中找到其他一些学习辅助工具，包括：

## 小测验 - 标题

这些是旨在帮助您测试自己理解的简短的多项选择题。

## 试试看 - 标题

这些实际挑战为您提供了尝试所学内容的想法。

您还会发现一些文本样式，用于区分不同类型的信息。以下是一些这些样式的示例，以及它们的含义解释。

文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 句柄显示如下："接下来，我们将向`Canvas2D`对象添加一个`drawText()`方法。"

代码块设置如下：

```html
this.drawText = function(text, point, fill)
{
    if (fill)
    {
        context.fillText(text, point.x, point.y);
    }
    else
    {
        context.strokeText(text, point.x, point.y);
    }
};
```

当我们希望引起您对代码块的特定部分的注意时，相关行或项目会以粗体显示：

```html
switch (action.tool)
{
    // code not shown...
    case "text":
 canvas2d.drawText(action.text, action.points[0],
 action.fill);
 break;
}
```

**新** **术语**和**重要** **单词**以粗体显示。您在屏幕上看到的单词，比如菜单或对话框中的单词，会以这样的方式出现在文本中："当单击**保存**按钮时，它将获取数据 URL，然后打开它。"

### 注意

警告或重要说明会以这样的方式出现在一个框中。

### 提示

技巧和窍门会以这种方式出现。
