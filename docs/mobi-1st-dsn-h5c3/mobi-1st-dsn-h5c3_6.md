# 附录 A. HTML5 Boilerplate 的解剖

这个附录是为了帮助那些对 HTML5 Boilerplate 没有经验的人。如果你对它很了解，就没有必要再读下去了（这就是为什么这是一个附录的原因）。但如果你对 HTML5 Boilerplate 还很陌生，这个附录将帮助你更深入地了解 320 和 Up 的情况。在这个附录中，我们将看一下 HTML5 Boilerplate 的结构和选择，并了解它的选择对你可能开发的进一步网页的影响。

# HTML5 Boilerplate 是什么？

首先，你可以在[`html5boilerplate.com/`](http://html5boilerplate.com/)找到该项目的主页。该网站提供了 HTML5 的快速概述，但并没有提供 HTML5 Boilerplate 有何用处以及为什么要创建它的背景。

我不会详细介绍 HTML5 Boilerplate 的历史。本书主要关注如何做事情，而不是事情发生的原因，所以我会尽量解释足够的背景知识，让你知道它是如何工作的，希望你未来在使用 HTML5 Boilerplate 和 320 以及其他框架时，能够有足够的理解来帮助你解决未来的问题。

实质上，HTML5 Boilerplate 是一个旨在创建一个具有所有组件的 HTML 页面的项目，这些组件是制作有效的跨浏览器网页所需的；它还利用了支持现代 HTML5 规范的现代浏览器中可用的所有优点。

如果你想了解我所说的 HTML5 规范是什么，或者现代浏览器和旧浏览器之间的区别是什么，那么我鼓励你进行一些搜索和阅读。我留给你的任何链接都有可能很快就过时了。但简而言之，HTML5 是一个规定浏览器应该做什么的规范。它是一种努力，使所有浏览器支持相同或类似的功能，以便让网页开发者能够制作一个网页，并使其在所有浏览器中表现相同。这还不是现实，我认为它永远不会成为现实；公平地说，现在的情况比以前好多了。

因此，作为一个网页开发者，在大多数情况下，你很可能至少需要支持**IE** 8 及以上版本，Firefox 4 及以上版本，以及当前版本的 Chrome（Chrome 的版本不那么重要，因为它一直鼓励用户更新）。请注意这里的挑战。所有浏览器的当前版本，除了 Chrome，都高于你必须支持的版本。此外，如果你在写作时正在制作一个网站，很可能你实际上需要支持这些浏览器的旧版本以及一些其他浏览器，具体取决于你的用户群。而且这些只是桌面版本；还有所有移动版本的浏览器以及 Android 版本的 WebKit，那里有无数个版本。

了解这一点，你就能明白为什么我和其他许多前端工程师都在倡导前端设计的简单性。简单的设计很有可能给最终用户带来良好的体验，以及接近一致性的东西。

但是，如果没有一些努力，你就不会得到那种经验和一致性。HTML5 样板对于代表你的努力有很大帮助。让我们在接下来的几页中详细了解它是如何工作的。当你阅读时，我建议你从第一章的`before`目录中打开`index.html`文件。这是我们还没有添加任何内容的样板版本。让我们从顶部开始！

## 条件注释

条件注释的代码如下：

```html
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
```

这段代码嵌套在注释中，但有一些条件逻辑。只有 Internet Explorer 才有超能力使用这个逻辑。前面的例子只有在执行它的浏览器版本小于 IE7 时才会渲染注释内的 HTML 代码，因此语法`[if lt IE 7]`。你可以推断出不同的 HTML 标记是根据 IE 的版本渲染的。你可以使用这个 HTML 标记中的类来创建特殊的样式，这些样式通常是处理这些旧浏览器的缺点所必需的。

如果你再往前跳一点，你会看到以下条件注释：

```html
<!--[if (lt IE 9) & (!IEMobile)]>
  <script src="img/selectivizr-min.js"></script>
<![endif]-->
```

这包括在 320 和 Up 框架中包含的 JavaScript 库，允许 CSS3 选择器在 IE9 之前的浏览器中工作。

## 大量的移动元标记

接下来，在头部标签内，你会看到一些供供应商执行魔术的元标记。首先要注意的是：

```html
<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
```

如果你想进一步了解元标记，可以访问注释中提供的链接。我鼓励你这样做。

总之，这些元标记帮助移动浏览器知道他们可以渲染不仅仅是为桌面而设计的页面。习惯这一点，因为还有更多这样的东西即将到来。

在此之后，有一堆注释，让你为苹果设备创建图标。如果用户想为你的网站创建快捷方式，这些图标很酷。它会为你的网站创建一个图标，就像一个应用程序一样。如果你想利用这一点，你需要所有尺寸的图标，并且需要将它们放在已经指定的路径中，或者编辑路径以便加载你的图标文件。

还有更多苹果特定的元标记。正如你所看到的，对于许多元标记，你只需要填写空白字段（例如，`apple-mobile-web-app-title`）。

```html
<meta name="viewport" content="initial-scale=1.0">
```

前一行代码确保页面不会被放大，只要你在下一行代码的`content`字段设置为`yes`：

```html
<meta name="apple-mobile-web-app-capable" content="yes">
```

在接下来的部分中，标记为`启动图像`的部分为您的网页提供了更多类似应用的功能。当用户从主屏幕启动您的网站时，这些图像将填满他们的屏幕，直到页面加载。同样，您需要提供所有列出的尺寸的图像，并将它们放在正确的路径中。然而，你应该知道这个特定的标记块可能会被移除，并用更清晰的代码应用。当我们一起查看`helper.js`文件时，你会在一会儿了解到这一点。

令人欣慰的是，Windows 8 的下一个标签集几乎没有新增的工作！这个标签可以并且应该与你为苹果创建的图标共享，并将出现在那些漂亮的 Windows 8 磁贴中。你可以在以下标签中设置你的磁贴颜色：

```html
<meta name="msapplication-TileColor" content="#000">
```

拜托，拜托，我请求你。把它设置成热粉色。

呼！我们已经完成了头部！

现在，你可以跳到文件的底部。

## 包括你需要的脚本

其余的并不是太令人惊讶。我们在页脚下面包括以下脚本，并按顺序：

+   jQuery（首先从 CDN 加载，然后作为备用本地加载）

+   一个插件文件

+   一个脚本文件

+   一个辅助文件

+   Google Analytics

以这种方式制作您的网站没有问题，但我经常将插件、脚本和辅助程序合并到一个文件中。

`helper.js`文件应该放在脚本文件之前；否则你无法调用其中的函数。如果它们是正确的，只需重新排列它们，你就可以继续了。

最后一件事是我想给你一个辅助文件的概述，因为这是 HTML5 样板的一部分。

## helper.js 文件

这个文件中的代码真的很有帮助。其中的注释大部分解释了每个函数的作用。尽管如此，我想强调一些事情，并确保你知道如何实现它们。

基本上，要调用这里的任何函数，只需在你需要的文件中找到一个函数（或者只是想尝试）并在其后加上`();`。这是 JavaScript 执行函数的方式。例如，这个文件中定义的第一个可用函数（你可以看出它们是函数，因为它们中有单词`function`）如下：

```html
MBP.scaleFix = function() {…
```

如果你想使用这个函数，只需将以下内容添加到你的脚本文件中：

```html
MBP.scaleFix();
```

看，你刚刚调用了这个函数。现在让我们快速浏览一下这里最有用的函数都做些什么。请记住，脚本中的许多项目是函数本身使用的；所以，如果你尝试使用它们，它们可能不会做任何事情，特别是那些没有单词“function”的项目。

+   `MBP.scaleFix`：这个函数可以解决 iOS 中的一个恼人的 bug。当用户将手机从竖屏旋转到横屏时，这个 bug 就会出现。在横屏模式下，你可爱的网页将会跑到屏幕边缘之外。但是，别担心；这个脚本可以修复它。所以你应该使用它。

+   `MBP.hideUrlBar`和`MBP.hideUrlBarOnLoad`：这两个函数是可调用的，但你更有可能使用`MBP.hideUrlBarOnLoad`来做几乎和它名字一样的事情。这个函数在移动设备上非常有用，因为一旦页面加载完成，它会将 URL 栏向上滚动，从而节省宝贵的屏幕空间。这对使用 iPhone 上的 Safari 的用户非常有用。我想你可以调用`MBP.hideUrlBar`，但我很难想象一个情景，在那种情况下你想直接调用它而不让用户感到恐慌。`MBP.hideUrlBarOnLoad`调用`MBP.hideUrlBar`。

+   `MBP.fastButton`：这是一个用于解决 WebKit 浏览器的一个特性的函数，当用户触摸链接或按钮时会引入轻微的延迟。请谨慎使用。

+   `MBP.splash`：这个脚本可以替换我们之前讨论过的`启动图像`的注释代码块。它是在我们之前检查的样板中提供的。如果你已经忘记了，回去再读一遍。我真的很喜欢使用这个 JavaScript 来替换页面中所有那些标记，特别是考虑到只有少数用户会看到这个启动画面。实际上，如果你去获取最新版本的 HTML5 移动样板，而不是当前（截至本文撰写时）320 和 Up 版本中提供的索引页面，它将不会有那个带有所有启动图像的标记块。

+   `MBP.autogrow`：如果你的响应式网站上有表单，这个功能非常棒。它会在用户填写时使`<textarea>`自动增长。

+   `MBP.enableActive`：这是另一个很棒的增强功能，可以在移动 Safari 中启用 active 伪类，对于那些按钮的用户反馈很好，因为它们往往会有点延迟（除非你足够勇敢使用`FastButton`）。

+   `MBP.preventZoom`：这个函数做了它说的。Mobile Safari 的默认行为是在发生焦点事件时放大。这对用户来说真的很不方便，因为他们必须在输入文本到输入字段后手动缩小。

现在你已经了解足够多的内容，可以在自己的应用程序中进行实验了。在大多数情况下，你会希望在页面加载和准备就绪时触发这些函数，所以只使用你需要的函数，以防止在小设备上加载大量 JavaScript。
