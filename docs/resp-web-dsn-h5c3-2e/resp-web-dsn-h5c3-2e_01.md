# 第一章：响应式网页设计的基本要素

仅仅几年前，网站可以以固定宽度构建，预期所有最终用户都会获得相当一致的体验。这个固定宽度（通常为 960 像素宽或周围）对于笔记本电脑屏幕来说并不太宽，而具有大分辨率显示器的用户只是在两侧有大量的边距。

但是在 2007 年，苹果的 iPhone 引领了第一个真正可用的手机浏览体验，人们访问和互动网络的方式永远改变了。

在这本书的第一版中，曾经指出过：

> “在 2010 年 7 月至 2011 年 7 月的 12 个月内，全球移动浏览器使用率从 2.86％上升到 7.02％。”

在 2015 年中期，同一统计系统（[gs.statcounter.com](http://gs.statcounter.com)）报告称，这一数字已上升至 33.47％。作为对比，北美的移动设备占比为 25.86％。

无论从任何角度来看，移动设备的使用量都在不断增加，而与此同时，27 英寸和 30 英寸的显示器现在也很常见。现在，浏览网络的最小屏幕和最大屏幕之间的差异比以往任何时候都要大。

值得庆幸的是，对于不断扩大的浏览器和设备环境，有一个解决方案。使用 HTML5 和 CSS3 构建的响应式网页设计可以使网站在多个设备和屏幕上“只需工作”。它使网站的布局和功能能够响应其环境（屏幕大小，输入类型，设备/浏览器功能）。

此外，使用 HTML5 和 CSS3 构建的响应式网页设计可以在无需基于服务器的后端解决方案的情况下实现。

# 开始我们的探索

无论您是响应式网页设计，HTML5 还是 CSS3 的新手，还是已经很熟练，我希望这一章能够达到两个目的中的一个。

如果您已经在响应式网页设计中使用 HTML5 和 CSS3，这一章应该作为一个快速和基本的复习。或者，如果您是新手，可以将其视为一种基本的“训练营”，涵盖基本要素，以便我们都在同一页面上。

在本章结束时，我们将涵盖您需要编写完全响应式网页的所有内容。

您可能想知道其他九章为什么在这里。在本章结束时，这一点也应该显而易见。

以下是本章的内容：

+   定义响应式网页设计

+   如何设置浏览器支持级别

+   关于工具和文本编辑器的简要讨论

+   我们的第一个响应式示例：一个简单的 HTML5 页面

+   视口`meta`标签的重要性

+   如何使图像按比例缩放到其容器

+   编写 CSS3 媒体查询以创建设计断点

+   我们基本示例的不足之处

+   为什么我们的旅程才刚刚开始

# 定义响应式网页设计

术语“响应式网页设计”是由 Ethan Marcotte 于 2010 年创造的。在他的开创性的*A List Apart*文章中（[`www.alistapart.com/articles/responsive-web-design/`](http://www.alistapart.com/articles/responsive-web-design/)），他将三种现有技术（灵活的网格布局，灵活的图像/媒体和媒体查询）整合成一种统一的方法，并将其命名为响应式网页设计。

## 简而言之，响应式网页设计

响应式网页设计是以最相关的格式呈现网页内容，以适应视口和访问设备。

在其初期，典型的响应式设计是从“桌面”固定宽度设计开始构建的。然后，内容被重新排列或删除，以使设计在较小的屏幕上工作。然而，流程发展并且变得明显，从设计到内容和开发，一切都在相反的方向工作得更好；从较小的屏幕开始，逐渐扩展。

在我们开始之前，我想在继续之前讨论一些主题；浏览器支持和文本编辑器/工具。

# 设置浏览器支持级别

响应式网页设计的普及和普遍性使其比以往更容易向客户和利益相关者推销。大多数人对响应式网页设计有一些了解。一个单一的代码库可以在所有设备上完美运行的概念是一个令人信服的提议。

在开始响应式设计项目时，几乎总会出现一个问题，那就是浏览器支持的问题。由于浏览器和设备的变种如此之多，支持每一个浏览器的变种并不总是切实可行。也许时间是一个限制因素，也许是金钱。也许两者都是。

通常情况下，浏览器越老，为了与现代浏览器获得功能或美学上的平等，需要的工作和代码就越多。因此，通过分层体验并仅为更有能力的浏览器提供增强的视觉和功能，可能更有意义，也更快。

在本书的上一版中，花了一些时间来介绍如何为非常老的仅限桌面浏览器提供支持。在这一版中，我们将不再介绍。

当我在 2015 年中写这篇文章时，Internet Explorer 6、7 和 8 几乎已经消失。即使 IE 9 在全球浏览器市场上的份额只有 2.45%（IE 10 只有 1.94%，而 IE 11 正在稳步上升）。如果你别无选择，只能为 Internet Explorer 8 及以下版本开发，我对你表示同情，但我必须坦率地告诉你，这本书中你可以使用的内容将不会太多。

对于其他人来说，你应该向你的客户/资助者解释为什么为不景气的浏览器开发可能是一个错误，并且在各个方面，主要为现代浏览器和平台投入开发时间和资源是明智的财务决策。

然而，真正重要的统计数据只有你自己的。除了极端情况外，我们构建的网站应该至少在每个常见的浏览器中都是功能性的。除了基本功能外，对于任何网络项目来说，提前决定你想要完全增强体验的平台，以及你愿意让视觉/功能异常的平台。

你还会发现，从最简单的“基本水平”体验开始，并增强（一种被称为**渐进增强**的方法）比从相反的方向解决问题更容易——首先构建最终体验，然后尝试为能力较弱的平台提供后备（一种被称为**优雅降级**的方法）。

为了说明为什么提前知道这一点很重要，考虑一下，如果你不幸有 25%的网站访问者使用 Internet Explorer 9（例如），你需要考虑该浏览器支持哪些功能，并相应地调整你的解决方案。如果大量用户使用旧的移动电话平台，比如 Android 2，同样需要谨慎。你可以考虑一个“基本”体验，这将取决于项目。

如果没有合适的数据，我会应用一个简单而粗糙的逻辑来确定是否应该花时间开发特定的平台/浏览器版本：如果开发和支持浏览器 X 的成本超过了浏览器 X 上的用户创造的收入/收益；不要为浏览器 X 开发特定的解决方案。

这很少是一个你是否能够“修复”旧平台/版本的问题。问题是你是否应该。

在考虑哪些平台和浏览器版本支持哪些功能时，如果你还没有，要熟悉[`caniuse.com`](http://caniuse.com)网站。它提供了一个简单的界面，用于确定我们将在整个过程中查看的功能的浏览器支持情况。

![设置浏览器支持级别](img/B03777_01_01.jpg)

## 关于工具和文本编辑器的简短说明。

使用什么文本编辑器或 IDE 系统来构建响应式网页设计并不重要。如果最简单的文本编辑器可以让你高效地编写 HTML、CSS 和 JavaScript，那就完全没问题。同样，并没有必需的工具是必不可少的，以便让响应式网页设计顺利进行。你实际上只需要一些能让你编写 HTML、CSS 和 JavaScript 的东西。无论你偏好 Sublime Text、Vim、Coda、Visual Studio 还是记事本 - 都无关紧要。只需使用最适合你的工具。

然而，现在有更多的工具（通常是免费的）可以消除建站过程中许多手动和耗时的任务。例如，CSS 处理器（Sass、LESS、Stylus、PostCSS）可以帮助组织代码、变量、颜色处理和算术。像 PostCSS 这样的工具还可以自动完成可怕且无趣的工作，比如 CSS 供应商前缀。此外，“Linting”和验证工具可以在你工作时检查你的 HTML、JavaScript 和 CSS 代码是否符合标准，消除许多浪费时间的拼写错误或语法错误。

新的工具不断涌现，并且它们不断改进。因此，虽然我们会在进行中提到一些相关和有益的工具，但要知道可能会有更好的东西即将出现。因此，在我们的示例中，我们不会依赖于除基于标准的 HTML 和 CSS 之外的任何东西。然而，你应该尽可能使用任何工具来快速可靠地生成你的前端代码。

# 我们的第一个响应式示例

在第一段中，我承诺到本章结束时，你将知道构建完全响应式网页所需的一切。到目前为止，我只是在围绕手头的问题进行讨论。是时候付诸行动了。

### 注意

**代码示例**

你可以通过访问[rwd.education/download.zip](http://rwd.education/download.zip)或通过 GitHub [`github.com/benfrain/rwd`](https://github.com/benfrain/rwd)来下载本书中的所有代码示例。值得知道的是，在整个章节中构建的个别示例中，代码下载只提供了示例的最终版本。例如，如果你下载了第二章, *媒体查询-支持不同的视口*的代码示例，这些示例将是在第二章, *媒体查询-支持不同的视口*结束时的状态。除了文本中提供的中间状态外，不提供其他中间状态。

## 我们的基本 HTML 文件

我们将从一个简单的 HTML5 结构开始。现在不用担心每一行都做了什么（特别是`<head>`的内容，我们将在第四章中详细介绍，*响应式网页设计的 HTML5*）。

暂时，只需专注于`<body>`标签内的元素。我相当确定那里没有什么看起来太不寻常的东西；一些 div，一个用于标志的图形，一张图片（看起来很美味的烤饼），一两段文字和一列项目的列表。

以下是代码的摘要版本。为了简洁起见，我已经在下面的代码中删除了段落文字，因为我们只需要关注结构。但是，你应该知道这是一个食谱，描述了如何制作司康饼；典型的英式蛋糕。

如果你想看完整的 HTML 文件，可以从[rwd.education](http://rwd.education)网站下载。

```html
<!doctype html>
<html class="no-js" lang="en">
    <head>
        <meta charset="utf-8">
        <title>Our first responsive web page with HTML5 and CSS3</title>
        <meta name="description" content="A basic responsive web page – an example from Chapter 1">
        <link rel="stylesheet" href="css/styles.css">
    </head>
    <body>
        <div class="Header">
            <a href="/" class="LogoWrapper"><img src="img/SOC-Logo.png" alt="Scone O'Clock logo" /></a>
            <p class="Strap">Scones: the most resplendent of snacks</p>
        </div>
        <div class="IntroWrapper">
            <p class="IntroText">Occasionally maligned and misunderstood; the scone is a quintessentially British classic.</p>
            <div class="MoneyShot">
                <img class="MoneyShotImg" src="img/scones.jpg" alt="Incredible scones" />
                <p class="ImageCaption">Incredible scones, picture from Wikipedia</p>
            </div>
        </div>
        <p>Recipe and serving suggestions follow.</p>
        <div class="Ingredients">
            <h3 class="SubHeader">Ingredients</h3>
            <ul>

            </ul>
        </div>
        <div class="HowToMake">
            <h3 class="SubHeader">Method</h3>
            <ol class="MethodWrapper">

            </ol>
        </div>
    </body>
</html>
```

默认情况下，网页是灵活的。如果你打开示例页面，即使在这一点上（没有媒体查询的情况下），调整浏览器窗口大小，你会看到文本会根据需要重新排列。

在不同的设备上呢？没有任何 CSS 的情况下，在 iPhone 上的呈现如下：

![我们的基本 HTML 文件](img/B03777_01_02.jpg)

正如你所看到的，它在 iPhone 上呈现得像一个“正常”的网页。原因是 iOS 默认将网页呈现为 980px 宽，并将其缩小到视口中。

浏览器的可视区域在技术上被称为**viewport**。视口很少等同于设备的屏幕尺寸，特别是在用户可以调整浏览器窗口大小的情况下。

因此，从现在开始，当我们提到网页的可用空间时，我们通常会使用这个更准确的术语。

我们可以通过在`<head>`中添加以下片段来轻松解决之前的问题：

```html
<meta name="viewport" content="width=device-width">
```

这个 viewport `meta`标签是一种非标准（但事实上的标准）的告诉浏览器如何呈现页面的方式。在这种情况下，我们的 viewport `meta`标签实际上是在说“使内容以设备的宽度呈现”。实际上，最好的办法可能是直接向您展示这一行对适用设备的影响：

![我们的基本 HTML 文件](img/B03777_01_03.jpg)

太好了！现在文本以更“原生”的大小呈现和流动了。让我们继续。

我们将在第二章中介绍`meta`标签及其各种设置和变体（以及相同功能的基于标准的版本），*媒体查询-支持不同的视口*。

## 驯服图片

他们说一张图片胜过千言万语。在我们的示例页面中写了这么多关于烤饼干的内容，却没有展示这些美味的图片。我要在页面顶部添加一张烤饼干的图片；一种“英雄”图片，吸引用户阅读页面。

![驯服图片](img/B03777_01_04.jpg)

哦！那张漂亮的大图片（宽度为 2000px）强制我们的页面呈现得有点乱。我们需要解决这个问题。我们可以通过 CSS 为图片添加固定宽度，但问题在于我们希望图片能够根据不同的屏幕尺寸进行缩放。

例如，我们的 iPhone 示例宽度为 320px，所以我们可以将该图片的宽度设置为 320px，但是如果用户旋转屏幕会发生什么呢？320px 宽的视口现在变成了 480px 宽。幸运的是，通过一行 CSS 代码很容易实现图片的流动，使其可以根据容器的可用宽度进行缩放。

我现在要创建`css/styles.css` CSS 文件，并将其链接到 HTML 页面的头部。

这是我要添加的第一件事。通常我会设置一些其他默认值，我们将在后面的章节中讨论这些默认值，但是为了我们的目的，我很乐意只用这个来开始：

```html
img {
    max-width: 100%;
}
```

现在当页面刷新后，我们看到的更接近我们预期的东西。

![驯服图片](img/B03777_01_05.jpg)

这个基于`max-width`的规则的作用只是规定所有的图片的宽度最大为 100%（即它们应该扩展到 100%的大小，不再更大）。如果包含元素（如`body`或者它所在的`div`）的宽度小于图片的固有宽度，图片将简单地缩放到最大可用空间。

### 提示

**为什么不简单地使用 width: 100%？**

要使图片流动，您也可以使用更常用的 width 属性。例如，`width: 100%`，但这会产生不同的效果。当使用`width`属性时，图片将以该宽度显示，而不考虑其固有大小。在我们的示例中，结果将是 logo（也是一张图片）拉伸以填满其容器的 100%。对于比图片（如我们的 logo）宽得多的容器，这会导致图片过大。

太好了。现在一切都按预期布局。无论视口大小如何，都没有内容横向溢出页面。

然而，如果我们在更大的视口中查看页面，基本样式开始变得字面上和比喻上都被拉伸了。看一下大约在 1400px 大小的示例页面：

![驯服图片](img/B03777_01_06.jpg)

哦，天哪！事实上，即使在大约 600px 宽的时候，它开始受到影响。在这一点上，如果我们能重新安排一些东西就会很方便。也许调整一下图片的大小并将其放在一边。也许改变一些字体大小和元素的背景颜色。

幸运的是，我们可以通过使用 CSS 媒体查询来轻松实现所有这些功能，以使事情按照我们的意愿进行弯曲。

## 进入媒体查询

正如我们已经确定的那样，在 600px 宽的某个点之后，我们当前的布局开始显得拉伸。让我们使用 CSS3 媒体查询根据屏幕宽度调整布局。媒体查询允许我们根据一些条件（例如屏幕宽度和高度）应用特定的 CSS 规则。

### 提示

**不要将断点设置为流行的设备宽度**

“断点”是用来定义响应式设计应该显著改变的点。

当人们开始使用媒体查询时，常见的做法是在设计中设置特定于当时流行设备的断点。当时通常是 iPhone（320px x 480px）和 iPad（768px x 1024px）定义了这些“断点”。

那种做法当时是一个糟糕的选择，现在甚至更糟。问题在于，通过这样做，我们是在为特定的屏幕尺寸定制设计。我们需要一个响应式设计——不管查看它的屏幕尺寸是多大，它都能够适应；而不是只在特定尺寸下才能看起来最好。

因此，让内容和设计本身决定断点的相关性。也许你的初始布局在 500px 宽及以上开始看起来不对，也许是 800px。你自己的项目设计应该决定何时需要断点。

我们将在第二章中涵盖整个 CSS 媒体查询范围，*媒体查询-支持不同的视口*，巧妙地命名为**媒体查询**。

然而，为了将我们的基本示例整理成形，我们将集中讨论一种媒体查询类型；最小宽度媒体查询。在这种类型的媒体查询中，只有在视口达到最小定义宽度时，才会应用其中的 CSS 规则。可以使用一系列不同的长度单位来指定确切的最小宽度，包括百分比、em、rem 和 px。在 CSS 中，最小宽度媒体查询的写法如下：

```html
@media screen and (min-width: 50em) {
    /* styles */
}
```

`@media`指令告诉浏览器我们正在开始一个媒体查询，`screen`部分（在这种情况下，声明“屏幕”在技术上并不需要，但我们将在下一章中详细处理这个问题）告诉浏览器这些规则应该适用于所有屏幕类型，`and (min-width: 50em)`告诉浏览器这些规则应该限制在所有大于 50em 大小的视口上。

### 提示

我相信是 Bryan Rieger ([`www.slideshare.net/bryanrieger/rethinking-the-mobile-web-by-yiibu`](http://www.slideshare.net/bryanrieger/rethinking-the-mobile-web-by-yiibu))首先写道：

> *"对媒体查询的支持的缺失实际上是第一个媒体查询。"*

他的意思是，我们写的第一条规则，除了媒体查询之外，应该是我们的“基本”规则，然后我们可以为更有能力的设备增强这些规则。

目前，只需意识到这种方法首先强调我们最小的屏幕，并允许我们根据设计的需要逐步添加细节。

### 修改示例以适应更大的屏幕

我们已经确定我们的设计在大约 600px/37.5rem 宽度时开始受到影响。

因此，让我们通过一个简单的示例来混合一下，展示在不同的视口尺寸下如何布局不同的内容。

### 提示

几乎所有的浏览器都有一个默认的文本大小为 16px，所以你可以通过将 px 值除以 16 来轻松地将宽度转换为 rems。我们将在第二章中讨论为什么你可能想要这样做，*媒体查询-支持不同的视口*。

首先，我们将阻止主要的“英雄”图像变得过大，并将其保持在右侧。然后介绍文本可以位于左侧。

然后我们将有主要的文本部分，描述如何制作烤饼的“方法”，位于左侧，下面有一个小的方框部分，详细介绍右侧的配料。

所有这些变化都可以通过在媒体查询中封装这些特定样式来相对简单地实现。以下是添加相关样式后的情况：

![修改示例以适应更大的屏幕](img/B03777_01_07.jpg)

在较小的屏幕上，它看起来基本上与以前一样，但一旦视口达到 50rem 或更宽，它就会调整到新的布局。

以下是添加的布局样式：

```html
@media screen and (min-width: 50rem) {
    .IntroWrapper {
        display: table;
        table-layout: fixed;
        width: 100%;
    }

    .MoneyShot,
    .IntroText {
        display: table-cell;
        width: 50%;
        vertical-align: middle;
        text-align: center;
    }

    .IntroText {
        padding: .5rem;
        font-size: 2.5rem;
        text-align: left;
    }

    .Ingredients {
        font-size: .9rem;
        float: right;
        padding: 1rem;
        margin: 0 0 .5rem 1rem;
        border-radius: 3px;
        background-color: #ffffdf;
        border: 2px solid #e8cfa9;
    }

    .Ingredients h3 {
        margin: 0;
    }
}
```

这并不太糟糕，是吗？只需很少的代码，我们就建立了一个可以根据视口大小做出响应并在需要时提供更合适布局的页面。通过添加更多的样式，页面看起来甚至更加舒适。有了这些，我们基本的响应式页面现在在 iPhone 上看起来是这样的：

![修改示例以适应更大的屏幕](img/B03777_01_08.jpg)

就像上面的 50rem 宽度一样：

![修改示例以适应更大的屏幕](img/B03777_01_09.jpg)

这些进一步的视觉装饰并没有增加对响应式发生的理解，因此我在这里省略了它们，但如果你想查看相关代码，请在[`rwd.education`](http://rwd.education)或[`github.com/benfrain/rwd`](https://github.com/benfrain/rwd)下载本章代码。

这只是一个非常基本的示例，但它已经包含了构建响应式网页设计的基本方法论。

重申我们所涵盖的基本要点；从“基础”样式开始，这些样式可以在任何设备上使用。然后随着视口大小和/或功能的增加逐渐添加增强功能。

### 注意

你可以在这里找到 CSS 媒体查询（Level 3）的完整规范：[`www.w3.org/TR/css3-mediaqueries/`](http://www.w3.org/TR/css3-mediaqueries/)

这里还有一个 CSS 媒体查询（Level 4）的工作草案：[`dev.w3.org/csswg/mediaqueries-4/`](http://dev.w3.org/csswg/mediaqueries-4/)

# 我们示例的不足之处

在本章中，我们已经涵盖了基本响应式 HTML5 和 CSS3 驱动的网页的所有基本组成部分。

但你我都知道，这个基本的响应式示例很少是我们要构建的限制。也不应该反映我们能够构建的限制。

如果我们希望我们的页面对不同的光照条件做出响应怎么办？当人们使用不同的指向设备（例如手指而不是鼠标）时，链接的大小会发生变化怎么办？如果我们想要简单地使用 CSS 来实现动画和移动视觉元素呢？

然后是标记。我们如何使用更多语义元素来标记页面；文章、部分、菜单等，或者制作具有内置验证的表单（无需 JavaScript）？如果我们想要在不同的视口上更改元素的视觉顺序呢？

别忘了图片。在这个示例中，我们有流体图片，但如果人们在手机上访问这个页面，他们将需要下载一个大的图形（宽度为 2000 像素），而这个图形只会以其中的一小部分显示在他们的手机上。这将使页面加载速度比必要的慢得多。肯定有更好的办法吧？

那么标志和图标呢？在这个示例中，我们使用了 PNG，但我们可以轻松地使用**可伸缩矢量图形**（**SVG**）来享受具有分辨率独立性的图形。这样它们看起来会非常清晰，无论查看屏幕的分辨率如何。

希望你有时间留下来，因为这些正是我们将在接下来的章节中回答的问题。

# 总结

干得好，现在你知道并理解了创建完全响应式网页所需的基本要素。然而，正如我们刚刚发现的，有很多地方可以改进。

但这没关系。我们不只是想要能够制作称职的响应式网页设计，我们还想要能够创造“最佳体验”。所以让我们继续努力吧。

首先，我们将深入了解所有三级和四级 CSS 媒体查询所提供的内容。我们已经看到网页如何响应视口宽度，但现在我们可以做的远不止这些，而且很快会有更多有趣的东西出现在你的浏览器中。让我们去看一看。
